(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["safety"],{"00bd":function(t,e,a){},"0239":function(t,e,a){"use strict";var n=a("aa74"),i=a.n(n);i.a},"04f9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"self_process"},[a("a-page-header",{staticClass:"pageheader",on:{back:function(){return t.$router.go(-1)}}},[a("a-button",{attrs:{slot:"backIcon",icon:"left"},slot:"backIcon"},[t._v("返回")]),a("template",{slot:"title"},[a("span",[t._v(t._s(t.info.name))])]),a("template",{slot:"extra"},[a("span",[t._v("总活动进度 ")]),a("a-progress",{staticStyle:{width:"250px"},attrs:{"stroke-color":{"0%":"#108ee9","100%":"#87d068"},percent:t.checkinfo.checkProgress}}),a("a-button",{attrs:{disabled:!(1!=t.checkinfo.status&&0!=t.checkinfo.status),size:"small",icon:"download"},on:{click:t.handleExport}},[t._v("导出数据")])],1),a("p",[a("span",{staticStyle:{"font-size":"18px","font-weight":"600"}},[t._v(t._s(t.checkinfo.collegeName))]),t._v(" "),0==t.checkinfo.status?a("span",{staticStyle:{color:"gray"}},[t._v("未开始")]):1==t.checkinfo.status?a("span",{staticStyle:{color:"blue"}},[t._v("自查中")]):2==t.checkinfo.status?a("span",{staticStyle:{color:"orange"}},[t._v("院系自查负责人审核")]):3==t.checkinfo.status?a("span",{staticStyle:{color:"orange"}},[t._v("校领导审核")]):a("span",{staticStyle:{color:"green"}},[t._v("已审核")])]),a("a-space",{staticStyle:{padding:"4px"},attrs:{size:"middle"}},[a("span",{staticClass:"pageshow"},[a("span",{staticClass:"label"},[t._v("发起时间")]),a("span",{staticClass:"text"},[t._v(t._s(t.checkinfo.startTime))])]),a("span",{staticClass:"pageshow"},[a("span",{staticClass:"label"},[t._v("结束时间")]),a("span",{staticClass:"text"},[t._v(t._s(t.checkinfo.endTime))])]),a("span",{staticClass:"pageshow"},[a("span",{staticClass:"label"},[t._v("符合项")]),a("span",{staticClass:"text"},[t._v(t._s(t.checkStatistics.coincidence))])]),a("span",{staticClass:"pageshow"},[a("span",{staticClass:"label"},[t._v("不符合")]),a("span",{staticClass:"text"},[t._v(t._s(t.checkStatistics.incoincidence))])]),a("span",{staticClass:"pageshow"},[a("span",{staticClass:"label"},[t._v("不适用")]),a("span",{staticClass:"text"},[t._v(t._s(t.checkStatistics.notApplicable))])]),a("span",{staticClass:"pageshow"},[a("span",{staticClass:"label"},[t._v("未选择")]),a("span",{staticClass:"text"},[t._v(t._s(t.checkStatistics.unfilled))])])]),-1!=t.checkinfo.levels.indexOf(3)||-1!=t.checkinfo.levels.indexOf(2)?a("a-button",{staticStyle:{float:"right"},attrs:{disabled:2!=t.checkinfo.status||0!=t.checkStatistics.unfilled,type:"primary"},on:{click:t.handleVerity}},[t._v("审核")]):t._e(),-1!=t.checkinfo.levels.indexOf(1)?a("a-button",{staticStyle:{float:"right"},attrs:{disabled:3!=t.checkinfo.status||0!=t.checkStatistics.unfilled,type:"primary"},on:{click:t.handleVerity}},[t._v("审核")]):t._e(),-1==t.checkinfo.levels.indexOf(7)||-1!=t.checkinfo.levels.indexOf(9)||-1!=t.checkinfo.levels.indexOf(10)?a("a-button",{staticStyle:{float:"right","margin-right":"4px"},attrs:{disabled:1!=t.checkinfo.status||0!=t.checkStatistics.unfilled,type:"primary"},on:{click:t.handleSubmit}},[t._v("提交院部领导审核")]):t._e()],2),a("a-card",{staticClass:"show_content"},[a("a-tabs",{attrs:{"default-active-key":"1"},on:{change:t.tabChange}},[a("a-tab-pane",{key:"1",attrs:{tab:"自查清单"}},[a("a-spin",{attrs:{spinning:t.spinning}},[a("a-row",[a("a-col",{staticStyle:{"border-right":"1px solid #e8e8e8"},attrs:{span:4}},[a("a-steps",{staticClass:"stepsstyle",attrs:{type:"navigation",direction:"vertical"},on:{change:t.onChange},model:{value:t.currect,callback:function(e){t.currect=e},expression:"currect"}},t._l(t.processData,(function(e,n){return a("a-step",{key:n,attrs:{title:e.content,description:e.des,status:t.handleStatus(e.status)}})})),1)],1),a("a-col",{staticStyle:{"border-left":"1px solid #e8e8e8"},attrs:{span:20}},[this.nullitem.length>0?a("p",{staticClass:"nullDanger"},[t._v(t._s(t.nullitem.join(", "))+"不符合项未填写隐患")]):t._e(),a("a-card",{staticClass:"rightContent",attrs:{bordered:!1}},[0!=t.tableData.length?a("a-table",{attrs:{expandIcon:t.expandIcon,columns:t.columns,"data-source":t.tableData,rowKey:"id",defaultExpandAllRows:!0,pagination:!1,scroll:{y:600}},scopedSlots:t._u([{key:"code",fn:function(e,n){return[2!=n.level?a("span",{staticStyle:{"margin-left":"15px"}},[t._v(t._s(e))]):a("span",[t._v(t._s(e))])]}},{key:"conform",fn:function(e,n){return[2!=n.level&&t.isRet?a("a-checkbox",{attrs:{checked:0==n.itemStatus,disabled:t.eventItem.index>t.processindex||1!=t.checkinfo.status||-1==t.checkinfo.levels.indexOf(9)&&-1==t.checkinfo.levels.indexOf(10)&&-1==t.checkinfo.levels.indexOf(7)},on:{change:function(e){return t.checkchange(n,0)}}}):t._e()]}},{key:"incompatible",fn:function(e,n){return[2!=n.level?a("a-checkbox",{attrs:{checked:1==n.itemStatus,disabled:t.eventItem.index>t.processindex||1!=t.checkinfo.status||-1==t.checkinfo.levels.indexOf(9)&&-1==t.checkinfo.levels.indexOf(10)&&-1==t.checkinfo.levels.indexOf(7)},on:{change:function(e){return t.checkchange(n,1)}}}):t._e()]}},{key:"notsuitable",fn:function(e,n){return[2!=n.level?a("a-checkbox",{attrs:{checked:2==n.itemStatus,disabled:t.eventItem.index>t.processindex||1!=t.checkinfo.status||-1==t.checkinfo.levels.indexOf(9)&&-1==t.checkinfo.levels.indexOf(10)&&-1==t.checkinfo.levels.indexOf(7)},on:{change:function(e){return t.checkchange(n,2)}}}):t._e()]}},{key:"hiddenDangerNumber",fn:function(e,n){return[2!=n.level?a("span",[t._v(t._s(e))]):t._e()]}},{key:"action",fn:function(e,n){return[1==n.itemStatus?a("a-button",{attrs:{disabled:1!=t.checkinfo.status||-1==t.checkinfo.levels.indexOf(10)&&-1==t.checkinfo.levels.indexOf(9)&&-1==t.checkinfo.levels.indexOf(7),icon:"edit",size:"small"},on:{click:function(e){return t.handleEdit(n)}}},[t._v("填写隐患")]):t._e()]}}],null,!1,867447317)},[a("span",{attrs:{slot:"customName"},slot:"customName"},[a("a-checkbox",{staticClass:"checkquan",staticStyle:{color:"#000000"},attrs:{disabled:t.eventItem.index>t.processindex||1!=t.checkinfo.status||-1==t.checkinfo.levels.indexOf(9)&&-1==t.checkinfo.levels.indexOf(10)&&-1==t.checkinfo.levels.indexOf(7),indeterminate:t.indeterminate,checked:t.checkAll},on:{change:t.onCheckAllChange}},[t._v(" 全符合 ")])],1)]):t._e()],1)],1)],1)],1)],1),a("a-tab-pane",{key:"2"},[a("span",{staticStyle:{display:"flex"},attrs:{slot:"tab"},slot:"tab"},[a("span",{staticStyle:{"margin-right":"5px"}},[t._v("隐患")]),a("a-badge",{attrs:{"number-style":{minWidth:"14px",height:"14px",lineHeight:"14px"},count:t.dangerlistTotalCount}})],1),a("a-table",{attrs:{columns:t.dangercolumns,"data-source":t.dangerlist,rowKey:"id"},scopedSlots:t._u([{key:"content",fn:function(e){return[a("pre",[t._v(t._s(e))])]}},{key:"picture",fn:function(e,n){return t._l(n.photos.filter(t.findDanger).slice(0,1),(function(t,e){return a("div",{key:e,staticStyle:{float:"left"}},[a("img",{staticStyle:{"margin-right":"4px"},attrs:{src:t.url+"&type=3",alt:"",width:"80px"}})])}))}},{key:"rectifypicture",fn:function(e,n){return t._l(n.photos.filter(t.findRectify).slice(0,1),(function(t,e){return a("div",{key:e,staticStyle:{float:"left"}},[a("img",{staticStyle:{"margin-right":"4px"},attrs:{src:t.url+"&type=3",alt:"",width:"80px"}})])}))}},{key:"status",fn:function(e,n){return[0==e?a("a-tag",{attrs:{color:"red"}},[t._v("整改中")]):t._e(),1==e?a("a-tag",{attrs:{color:"blue"}},[t._v("审核中")]):t._e(),2==e?a("a-tag",{attrs:{color:"green"}},[t._v("整改完成")]):t._e()]}},{key:"action",fn:function(e,n){return[a("a-button",{staticStyle:{"margin-right":"4px"},attrs:{icon:"file-search",shape:"circle",title:"详情"},on:{click:function(e){return t.handleDetail(n)}}})]}}])})],1)],1)],1),a("edit-dangerlist",{ref:"dangerModal",on:{ok:t.handleEditOk}}),a("verity-active",{ref:"verityModal",on:{ok:t.handleOk}})],1)},i=[],o=(a("99af"),a("4160"),a("b0c0"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("2b3d"),a("1d87")),l=(a("ea98"),a("6a7e")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:1100,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("p",{staticStyle:{"font-size":"16px",width:"80%",float:"left"}},[t._v("检查要点："+t._s(t.checkPoint))]),a("a-button",{staticStyle:{float:"right","z-index":"99"},attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("添加")]),a("a-table",{attrs:{columns:t.columns,"data-source":t.data,rowKey:"id"},scopedSlots:t._u([{key:"content",fn:function(e,n){return[a("pre",[t._v(t._s(e))])]}},{key:"picture",fn:function(e,n){return t._l(n.photos.filter(t.findDanger).slice(0,1),(function(t,e){return a("div",{key:e,staticStyle:{float:"left"}},[a("img",{staticStyle:{"margin-right":"4px"},attrs:{src:t.url+"&type=3",alt:"",width:"80px"}})])}))}},{key:"action",fn:function(e,n){return[a("a-button",{attrs:{icon:"edit",shape:"circle",title:"编辑",size:"small"},on:{click:function(e){return t.handleEdit(n.id)}}}),t._v(" "),a("a-popconfirm",{attrs:{title:"确认删除隐患！","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.handleDelete(n.id)}}},[a("a-button",{attrs:{icon:"delete",shape:"circle",title:"删除",size:"small",type:"danger"}})],1)]}}])}),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("确认")])],1),a("edit-danger",{ref:"modal",on:{ok:t.handleRefresh}})],2)},s=[],c=a("2af9"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:700,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"formModel",attrs:{model:t.formDanger,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{ref:"branchGuid",attrs:{label:"实验分室",prop:"branchGuid"}},[a("a-select",{attrs:{placeholder:"请选择实验分室","allow-clear":"","filter-option":!1,"show-search":""},on:{search:t.fetchBranch},model:{value:t.formDanger.branchGuid,callback:function(e){t.$set(t.formDanger,"branchGuid",e)},expression:"formDanger.branchGuid"}},t._l(t.branchlist,(function(e){return a("a-select-option",{key:e.guid,attrs:{value:e.guid},on:{click:function(a){return t.branchChange(e)}}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-model-item",{ref:"content",attrs:{label:"地址",prop:"address"}},[a("a-select",{attrs:{"show-search":"",placeholder:"请选择地址","allow-clear":"","filter-option":!1,"show-arrow":!1,"not-found-content":null,value:t.formDanger.address},on:{search:t.fetchAddress},model:{value:t.formDanger.address,callback:function(e){t.$set(t.formDanger,"address",e)},expression:"formDanger.address"}},t._l(t.addresslist,(function(e){return a("a-select-option",{key:e,attrs:{value:e},on:{click:function(a){return t.addressChange(e)}}},[t._v(" "+t._s(e)+" ")])})),1)],1),a("a-form-model-item",{ref:"content",attrs:{label:"隐患内容",prop:"content"}},[a("a-textarea",{attrs:{placeholder:"请输入内容",rows:4},model:{value:t.formDanger.content,callback:function(e){t.$set(t.formDanger,"content",e)},expression:"formDanger.content"}})],1),a("a-form-model-item",{attrs:{label:"上传隐患照片"}},[a("a-upload",{attrs:{customRequest:t.uploadImg,remove:t.deletePhoto,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview}},[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancelp}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},u=[],h=(a("c975"),a("a434"),a("96cf"),a("1da1")),m=a("788a"),f=a("b047"),p=a.n(f);function b(t){return new Promise((function(e,a){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(t){return a(t)}}))}var g={content:"",files:[],collegeGuid:"",branchGuid:"",address:""},v={data:function(){return this.fetchBranch=p()(this.fetchBranch,800),this.fetchAddress=p()(this.fetchAddress,800),{title:"编辑隐患",visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},formDanger:this.clone(g),rules:{content:[{required:!0,message:"隐患内容不能为空！"}],branchGuid:[{required:!1,message:"请选择实验分室"}]},centerlist:[],lablist:[],branchlist:[],addresslist:[],fileList:[],previewVisible:!1,previewImage:"",isEdit:2,yhid:""}},components:{DragModal:c["c"]},methods:{clone:function(t){var e=JSON.parse(JSON.stringify(t));return e},modalshow:function(t,e,a,n){var i=this;this.visible=!0,n?(this.isEdit=1,this.yhid=n,Object(l["T"])(n).then((function(t){i.formDanger.eventId=t.eventId,i.formDanger.eventItemId=t.eventItemId,i.formDanger.collegeGuid=t.collegeGuid,i.formDanger.branchGuid=t.branchGuid,i.formDanger.content=t.content,i.formDanger.address=t.address,t.photos.forEach((function(t){0==t.type&&(i.formDanger.files.push({code:t.materialCode,url:t.url}),i.fileList.push({uid:t.materialCode,url:t.url,name:t.materialCode,status:"done",infoid:t.id}))}))}))):(this.isEdit=2,this.formDanger.eventId=t,this.formDanger.eventItemId=e,this.formDanger.collegeGuid=a),this.fetchBranch(""),this.fetchAddress("")},branchChange:function(t){t?(this.formDanger.branchGuid=t.guid,this.formDanger.address=t.address):this.formDanger.address=""},addressChange:function(t){var e=this;if(t){this.formDanger.address=t;var a={CollegeGuid:this.formDanger.collegeGuid,Address:t,MaxResultCount:999,SkipCount:0,key:""};Object(m["F"])(a).then((function(t){t.items.length>0&&(e.formDanger.branchGuid=t.items[0].guid)}))}else this.formDanger.address=""},fetchBranch:function(t){var e=this,a={CollegeGuid:this.formDanger.collegeGuid,key:t,SkipCount:0,MaxResultCount:1e3};Object(m["F"])(a).then((function(t){e.branchlist=t.items}))},fetchAddress:function(t){var e=this,a={CollegeGuid:this.formDanger.collegeGuid,branchGuid:this.formDanger.branchGuid,MaxResultCount:999,SkipCount:0,key:"",Address:t};this.addresslist=[],""!=t&&(this.addresslist=[t]),Object(m["G"])(a).then((function(t){var a=t;e.addresslist.push.apply(e.addresslist,a)}))},handleOk:function(){var t=this;this.btnloading=!0,this.$refs.formModel.validate((function(e){e?1==t.isEdit?Object(l["eb"])(t.formDanger,t.yhid).then((function(e){t.clearModal()})).catch((function(e){t.btnloading=!1})):2==t.isEdit&&Object(l["X"])(t.formDanger).then((function(e){t.clearModal()})).catch((function(e){t.btnloading=!1})):t.btnloading=!1}))},handleCancel:function(){this.visible=!1,this.formDanger=this.clone(g),this.fileList=[]},clearModal:function(){this.btnloading=!1,this.$message.success("编辑成功！"),this.$emit("ok"),this.formDanger=this.clone(g),this.fileList=[],this.visible=!1},handleCancelp:function(){this.previewVisible=!1},handlePreview:function(t){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,b(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},uploadImg:function(t){var e=this,a=new FormData;a.append("file",t.file),2==this.isEdit?Object(l["qb"])(a).then((function(t){e.fileList.push({uid:t.code,url:t.url,name:t.code,status:"done"}),e.formDanger.files.push({code:t.code,url:t.url}),e.$message.success("图片上传成功")})):1==this.isEdit&&Object(l["qb"])(a).then((function(t){if(e.formDanger.files.push({code:t.code,url:t.url}),e.$message.success("图片上传成功"),1==e.isEdit){var a={hiddenDangerId:e.yhid,materialCode:t.code,type:0};Object(l["a"])(a).then((function(a){e.fileList.push({uid:t.code,url:t.url,name:t.code,status:"done",infoid:a.id})}))}}))},deletePhoto:function(t){var e=this;if(1==this.isEdit)Object(l["l"])(t.infoid).then((function(a){var n=e.fileList.indexOf(t);-1!=n&&e.fileList.splice(n,1)}));else if(2==this.isEdit){var a=this.fileList.indexOf(t);-1!=a&&(this.fileList.splice(a,1),this.formDanger.files.splice(a,1))}}}},y=v,k=a("2877"),x=Object(k["a"])(y,d,u,!1,null,null,null),C=x.exports,_=[{title:"隐患内容",dataIndex:"content",ellipsis:!0,scopedSlots:{customRender:"content"}},{title:"实验室分室",dataIndex:"branchName",width:"120px"},{title:"所在地点",dataIndex:"address"},{title:"负责人",width:"100px",dataIndex:"principal"},{title:"联系方式",dataIndex:"phoneNum"},{title:"照片",dataIndex:"picture",scopedSlots:{customRender:"picture"}},{title:"操作",dataIndex:"action",width:"100px",scopedSlots:{customRender:"action"}}],w={data:function(){return{title:"编辑隐患",visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},data:[],columns:_,eventItemId:"",eventId:"",collegeGuid:"",checkPoint:""}},components:{DragModal:c["c"],EditDanger:C},methods:{modalshow:function(t,e,a,n){this.visible=!0,this.eventItemId=t,this.checkPoint=e,this.eventId=a,this.collegeGuid=n,this.getTable()},getTable:function(){var t=this,e={EventId:this.eventId,ItemId:this.eventItemId,CollegeGuid:this.collegeGuid,SkipCount:0,MaxResultCount:999};Object(l["S"])(e).then((function(e){t.data=e.items}))},handleOk:function(){this.visible=!1,this.$emit("ok")},handleCancel:function(){this.visible=!1,this.$emit("ok")},handleAdd:function(){this.$refs.modal.modalshow(this.eventId,this.eventItemId,this.collegeGuid)},handleEdit:function(t){this.$refs.modal.modalshow(this.eventId,this.eventItemId,this.collegeGuid,t)},findDanger:function(t,e,a){if(0==t.type)return t},handleDelete:function(t){var e=this;Object(l["p"])(t).then((function(t){e.handleRefresh()}))},handleRefresh:function(){this.getTable()}}},S=w,O=(a("0f3c"),Object(k["a"])(S,r,s,!1,null,null,null)),L=O.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:700,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"formModel",attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"审核"}},[a("a-radio-group",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("a-radio",{attrs:{value:!0}},[t._v("通过")]),a("a-radio",{attrs:{value:!1}},[t._v("不通过")])],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},D=[],$={data:function(){return{title:"",visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},value:!0,activeId:""}},components:{DragModal:c["c"]},methods:{modalshow:function(t,e){this.title=e+"审核",this.visible=!0,this.activeId=t},handleOk:function(){var t=this;Object(l["tb"])({id:this.activeId,passing:this.value}).then((function(e){t.visible=!1,t.$message.success("审核完成！"),t.$emit("ok")}))},handleCancel:function(){this.visible=!1}}},j=$,P=Object(k["a"])(j,I,D,!1,null,null,null),q=P.exports,R=[{title:"序号",dataIndex:"code",width:"100px",scopedSlots:{customRender:"code"}},{title:"检查项目",dataIndex:"checkItem"},{title:"检查要点",dataIndex:"checkPoint"},{dataIndex:"conform",scopedSlots:{customRender:"conform"},width:"50px",slots:{title:"customName"}},{title:"不符合",dataIndex:"incompatible",scopedSlots:{customRender:"incompatible"},width:"50px"},{title:"不适用",dataIndex:"notsuitable",scopedSlots:{customRender:"notsuitable"},width:"50px"},{title:"隐患",dataIndex:"hiddenDangerNumber",scopedSlots:{customRender:"hiddenDangerNumber"},width:"50px"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"120px"}],T=[{title:"实验室分室",dataIndex:"branchName",width:"120px"},{title:"隐患内容",dataIndex:"content",ellipsis:!0,scopedSlots:{customRender:"content"}},{title:"所在地点",dataIndex:"address",width:"150px"},{title:"实验分室负责人",dataIndex:"branchPrincipal",width:"150px"},{title:"整改负责人",dataIndex:"principal",width:"120px"},{title:"联系方式",dataIndex:"phoneNum",width:"100px"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"},width:"100px"},{title:"隐患照片",dataIndex:"picture",scopedSlots:{customRender:"picture"},width:"100px"},{title:"整改照片",dataIndex:"rectifypicture",scopedSlots:{customRender:"rectifypicture"},width:"100px"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"100px"}],E={components:{ASpace:o["a"],EditDangerlist:L,VerityActive:q},data:function(){return{spinning:!1,currect:0,processData:[],info:this.$route.query,columns:R,dangercolumns:T,tableData:[],eventItem:{},checkinfo:{checkStatistics:[],levels:[]},checkStatistics:{},statuslist:["未开始","进行中","待审核","已审核"],processindex:0,isPrcess:!1,isSchoolAdmin:!1,indeterminate:!0,checkAll:!1,isRet:!0,dangerlist:[],dangerlistTotalCount:0,nullitem:[]}},created:function(){this.init(!0)},mounted:function(){},methods:{onCheckAllChange:function(t){var e=this;if(t.target.checked=!0,t.target.checked){Object.assign(this,{indeterminate:!1,checkAll:!0});var a={parentItemId:this.eventItem.parentItemId,type:1};Object(l["b"])(a).then((function(t){t&&(e.init(!1),e.getContent(e.eventItem.parentItemId))}))}},traverseTree:function(t){if(t){for(var e=0,a=0,n=0;n<t.length;n++)if(t[n]&&t[n].children.length>0){e+=t[n].children.length;for(var i=0;i<t[n].children.length;i++)0==t[n].children[i].itemStatus&&(a+=1)}return e==a?(this.indeterminate=!1,this.checkAll=!0):this.indeterminate=!0}},init:function(t){this.getCheckInfo(t)},getCheckInfo:function(t){var e=this;t&&(this.spinning=!0),this.isPrcess=!1;var a={EventId:this.info.id};this.info.collegeguid&&(a.CollegeGuid=this.info.collegeguid),Object(l["B"])(a).then((function(a){e.spinning=!1,e.checkinfo=a,e.checkStatistics=a.checkStatistics,e.processData=a.eventParentItems,e.processData.length>0&&(e.processData.forEach((function(a){0!=a.incoincidenceItems.length?a.des="不符合："+a.incoincidence+" ("+a.incoincidenceItems.concat()+")":a.des="不符合："+a.incoincidence,1==a.status&&(e.processindex=a.index,e.isPrcess=!0,t&&(e.currect=a.index,e.getContent(a.id)))})),e.isPrcess||(e.processindex=e.processData[e.processData.length-1].index,t&&(e.currect=e.processindex,e.getContent(e.processData[e.processData.length-1].id))))}))},getContent:function(t){var e=this;this.tableData=[],Object(l["L"])({parentId:t}).then((function(t){e.eventItem=t,e.tableData=t.children,e.isRet=!0,e.judgeDanges(e.tableData)})),this.traverseTree(this.tableData)},judgeDanges:function(t){if(this.nullitem=[],t)for(var e=0;e<t.length;e++)for(var a=0;a<t[e].children.length;a++)1==t[e].children[a].itemStatus&&0==t[e].children[a].hiddenDangerNumber&&this.nullitem.push(t[e].children[a].code)},handleVerity:function(){this.$refs.verityModal.modalshow(this.checkinfo.id,this.info.name)},handleSubmit:function(){var t=this;Object(l["lb"])(this.checkinfo.id).then((function(e){t.$message.success("提交成功！"),t.init(!1)}))},expandIcon:function(t){var e=this.$createElement;return t.record.children.length>0?t.expanded?e("div",{attrs:{role:"button",tabindex:"0","aria-label":"关闭行"},class:"ant-table-row-expand-icon ant-table-row-expanded",on:{click:function(e){t.onExpand(t.record,e)}}}):e("div",{attrs:{role:"button",tabindex:"0","aria-label":"展开行"},class:"ant-table-row-expand-icon ant-table-row-collapsed",on:{click:function(e){t.onExpand(t.record,e)}}}):e("span")},checkchange:function(t,e){var a=this;if(t.itemStatus==e);else{if(null!=t.itemStatus){switch(t.itemStatus){case 0:this.checkStatistics.coincidence--;break;case 1:this.checkStatistics.incoincidence--;break;case 2:this.checkStatistics.notApplicable--}switch(e){case 0:this.checkStatistics.coincidence++;break;case 1:this.checkStatistics.incoincidence++;break;case 2:this.checkStatistics.notApplicable++}}else{switch(e){case 0:this.checkStatistics.coincidence++;break;case 1:this.checkStatistics.incoincidence++;break;case 2:this.checkStatistics.notApplicable++}this.checkStatistics.unfilled--}t.itemStatus=e,Object(l["jb"])(t).then((function(t){a.traverseTree(a.tableData),a.judgeDanges(a.tableData),t&&a.init(!1)}))}},handleEdit:function(t){this.$refs.dangerModal.modalshow(t.id,t.checkPoint,this.info.id,this.checkinfo.collegeGuid)},handleStatus:function(t){return this.traverseTree(this.tableData),0==t?"wait":1==t?"process":"finish"},onChange:function(t){this.currect=t,this.getContent(this.processData[t].id)},handleEditOk:function(){this.init(!1),this.getContent(this.eventItem.parentItemId),this.$message.success("填写完成！")},handleOk:function(){this.init(!1),this.getContent(this.eventItem.parentItemId)},tabChange:function(t){2==t&&this.getDangerList()},getDangerList:function(){var t=this,e={EventId:this.info.id,CollegeGuid:this.checkinfo.collegeGuid,SkipCount:0,MaxResultCount:999};Object(l["S"])(e).then((function(e){t.dangerlist=e.items,t.dangerlistTotalCount=e.totalCount}))},findDanger:function(t,e,a){if(0==t.type)return t},findRectify:function(t,e,a){if(1==t.type)return t},handleDetail:function(t){this.$router.push({name:"dangerDetail",query:{id:t.id}})},handleExport:function(){var t=this,e={EventId:this.info.id,CollegeGuid:this.checkinfo.collegeGuid};Object(l["t"])(e).then((function(e){var a=e,n=new Blob([a]),i=t.info.name+"("+t.checkinfo.collegeName+").xlsx";if("download"in document.createElement("a")){var o=document.createElement("a");o.download=i,o.style.display="none",o.href=URL.createObjectURL(n),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(n,i)}))}}},M=E,G=(a("a2c6"),Object(k["a"])(M,n,i,!1,null,null,null));e["default"]=G.exports},"0527":function(t,e,a){"use strict";var n=a("06ec"),i=a.n(n);i.a},"05a0":function(t,e,a){},"06ec":function(t,e,a){},"0a2a":function(t,e,a){},"0af1":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"riskdata"},[a("a-card",{staticStyle:{border:"none"}},[a("div",{staticClass:"cardtitle",attrs:{slot:"title"},slot:"title"},[a("span",[t._v("全校危险源数据统计")])]),a("a-table",{attrs:{"data-source":t.riskdata,columns:t.columns,pagination:!1}})],1)],1)},i=[],o=a("6a7e"),l=[{title:"院部",dataIndex:"collegeName"},{title:"一级危险实验分室数量",dataIndex:"riskLevelOneBranch"},{title:"危险源数量",dataIndex:"riskSourceNum"},{title:"危险源",dataIndex:"riskSourses"}],r={data:function(){return{riskdata:[],columns:l}},created:function(){this.init()},methods:{init:function(){var t=this;Object(o["R"])().then((function(e){t.riskdata=e}))}}},s=r,c=(a("660d"),a("2877")),d=Object(c["a"])(s,n,i,!1,null,null,null);e["default"]=d.exports},"0b34":function(t,e,a){},"0ce9":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:900,title:this.detailData&&this.detailData.id?"编辑教师":"新增教师",visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{model:t.form,rules:t.rules,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:16}}},[a("a-row",[a("a-col",{attrs:{span:9,offset:2}},[a("a-form-model-item",{attrs:{label:"姓名",prop:"name"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("a-col",{attrs:{span:9,offset:2}},[a("a-form-model-item",{attrs:{label:"工号",prop:"code"}},[a("a-input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1)],1),this.detailData&&this.detailData.id?t._e():a("a-col",{attrs:{span:9,offset:2}},[a("a-form-model-item",{attrs:{label:"登录密码",prop:"loginPassword"}},[a("a-input",{model:{value:t.form.loginPassword,callback:function(e){t.$set(t.form,"loginPassword",e)},expression:"form.loginPassword"}})],1)],1),a("a-col",{attrs:{span:9,offset:2}},[a("a-form-model-item",{attrs:{label:"所属院部"}},[a("a-select",{attrs:{"allow-clear":""},model:{value:t.form.collegeCode,callback:function(e){t.$set(t.form,"collegeCode",e)},expression:"form.collegeCode"}},t._l(t.collegeList,(function(e){return a("a-select-option",{key:e.guid,attrs:{value:e.guid}},[t._v(t._s(e.name))])})),1)],1)],1),a("a-col",{attrs:{span:9,offset:2}},[a("a-form-model-item",{attrs:{label:"手机号码"}},[a("a-input",{model:{value:t.form.phoneNumber,callback:function(e){t.$set(t.form,"phoneNumber",e)},expression:"form.phoneNumber"}})],1)],1),a("a-col",{attrs:{span:9,offset:2}},[a("a-form-model-item",{attrs:{label:"学历"}},[a("a-input",{model:{value:t.form.education,callback:function(e){t.$set(t.form,"education",e)},expression:"form.education"}})],1)],1),a("a-col",{attrs:{span:9,offset:2}},[a("a-form-model-item",{attrs:{label:"职称"}},[a("a-input",{model:{value:t.form.jobTitleCode,callback:function(e){t.$set(t.form,"jobTitleCode",e)},expression:"form.jobTitleCode"}})],1)],1),a("a-col",{attrs:{span:9,offset:2}},[a("a-form-model-item",{attrs:{label:"状态"}},[a("a-radio-group",{model:{value:t.form.statusId,callback:function(e){t.$set(t.form,"statusId",e)},expression:"form.statusId"}},[a("a-radio",{attrs:{value:1}},[t._v("在职")]),a("a-radio",{attrs:{value:0}},[t._v("未在职")])],1)],1)],1),a("a-col",{attrs:{span:17}},[a("a-form-model-item",{attrs:{label:"备注"}},[a("a-textarea",{attrs:{"auto-size":{minRows:3,maxRows:5}},model:{value:t.form.notes,callback:function(e){t.$set(t.form,"notes",e)},expression:"form.notes"}})],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},i=[],o=(a("d3b7"),a("788a")),l=a("c1df"),r=a.n(l),s=a("9d2c"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-info"},[a("span",[t._v(t._s(t.title))]),a("p",[t._v(t._s(t.value))]),t.bordered?a("em"):t._e()])},d=[],u={name:"Info",props:{title:{type:String,default:""},value:{type:String,default:""},bordered:{type:Boolean,default:!1}}},h=u,m=(a("b079"),a("2877")),f=Object(m["a"])(h,c,d,!1,null,"66d70aea",null),p=f.exports,b={name:"",code:"",englishName:"",loginPassword:"",gender:0,typeOfId:0,numberOfId:"",birthday:"",phoneNumber:"",email:"",address:"",notes:"",collegeCode:"",statusId:1,workTypeCode:"",jobTitleCode:"",education:""},g={components:{Info:p,dragModal:s["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,form:this.clone(b),rules:{name:[{required:!0,message:"未填写教师名称!"}],loginPassword:[{required:!0,message:"未填写登录密码!"}],code:[{required:!0,message:"未填写工号!"},{validator:this.validatorFun}]},queryParam:{SkipCount:0,MaxResultCount:100,Key:""},collegeList:[],jobList:[],educationList:[],worktypeList:[],detailData:{},code:""}},methods:{moment:r.a,clone:function(t){var e=JSON.parse(JSON.stringify(t));return e},modalshow:function(t){var e=this;this.detailData=t,this.getAllcollegeList(),t&&t.id?t.bindCode?Object(o["B"])({code:t.teacherCode}).then((function(t){e.form=t})):this.form=t:this.form.statusId=1,this.visible=!0},validatorFun:function(t,e,a){String(e).length>4&&/^[0-9a-zA-Z]*$/g.test(String(e))?a():a("请输入5位以上的数字或者字母")},handleOk:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;t.btnloading=!0,t.detailData&&t.detailData.id?Object(o["bb"])(t.form).then((function(e){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok",t.form),t.form=t.clone(b)})).finally((function(){t.confirmLoading=!1})):Object(o["Y"])(t.form).then((function(e){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok",t.form),t.form=t.clone(b)})).finally((function(){t.confirmLoading=!1}))}))},handleCancel:function(){this.form=this.clone(b),this.visible=!1},getAllcollegeList:function(){var t=this;Object(o["z"])(this.queryParam).then((function(e){t.collegeList=e.items}))}}},v=g,y=Object(m["a"])(v,n,i,!1,null,null,null);e["a"]=y.exports},"0d59":function(t,e,a){"use strict";var n=a("6f56"),i=a.n(n);i.a},"0e05":function(t,e,a){"use strict";var n=a("71ca"),i=a.n(n);i.a},"0e63":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inspection_log"},[a("a-card",[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"headtitle"},[t._v("巡查隐患")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[t.isSchoolAdmin||t.isCollege?a("a-button",{staticStyle:{"margin-right":"8px"},attrs:{type:"primary",icon:"plus"},on:{click:t.createBatchDanger}},[t._v("批量添加隐患")]):t._e(),t.isSchoolAdmin||t.isCollege?a("a-button",{attrs:{icon:"download"},on:{click:t.handleExport}},[t._v("导出数据")]):t._e()],1),t.isSchoolAdmin||t.isCollege?a("a-form",{staticClass:"selectform"},[a("a-form",{staticStyle:{"margin-top":"2px"},attrs:{form:t.form}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"院系"}},[a("select-collegeguid",{directives:[{name:"decorator",rawName:"v-decorator",value:["CollegeGuid"],expression:"['CollegeGuid']"}],ref:"Scollege",on:{change:t.handleSelectCollege}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"实验中心"}},[a("select-labcenter",{directives:[{name:"decorator",rawName:"v-decorator",value:["LabCenterGuid"],expression:"['LabCenterGuid']"}],ref:"Scenter",on:{change:t.handleSelectCenter}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"实验室"}},[a("select-lab",{directives:[{name:"decorator",rawName:"v-decorator",value:["LaboratoryGuid"],expression:"['LaboratoryGuid']"}],ref:"Slab",on:{change:t.handleSelectLab}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"实验分室"}},[a("select-branch",{directives:[{name:"decorator",rawName:"v-decorator",value:["LabBranchGuid"],expression:"['LabBranchGuid']"}],ref:"Sbranch",on:{change:t.handleSelectBranch}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"整改状态"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Status"],expression:"['Status']"}],ref:"Status",attrs:{"allow-clear":"","show-arrow":!1},on:{change:t.handleSelectStatus}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 整改中 ")]),a("a-select-option",{attrs:{value:"1"}},[t._v(" 审核中 ")]),a("a-select-option",{attrs:{value:"2"}},[t._v(" 通过 ")])],1)],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"级别"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["dangerLevel"],expression:"['dangerLevel']"}],ref:"dangerLevel",attrs:{"allow-clear":"","show-arrow":!1},on:{change:t.handledangerLevel}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 校级 ")]),a("a-select-option",{attrs:{value:"1"}},[t._v(" 院级 ")])],1)],1)],1)],1)],1)],1):t._e(),a("s-table",{ref:"table",attrs:{columns:t.columns,data:t.loaddata,rowKey:"id"},scopedSlots:t._u([{key:"branchName",fn:function(e,n){return[a("span",[t._v(t._s(n.branchName))]),t._v(" "),a("br"),a("span",[t._v(t._s(n.address))])]}},{key:"dangerpic",fn:function(e,n){return t._l(n.photos.filter(t.findDanger).slice(0,1),(function(t,e){return a("div",{key:e,staticStyle:{float:"left"}},[a("img",{staticStyle:{"margin-right":"4px","max-width":"80px","max-height":"100px"},attrs:{src:t.url+"&type=3",alt:""}})])}))}},{key:"rectifypic",fn:function(e,n){return t._l(n.photos.filter(t.findRectify).slice(0,1),(function(t,e){return a("div",{key:e,staticStyle:{float:"left"}},[a("img",{staticStyle:{"margin-right":"4px","max-width":"80px","max-height":"100px"},attrs:{src:t.url+"&type=3",alt:""}})])}))}},{key:"dangerLevel",fn:function(e,n){return[0==e?a("a-tag",{attrs:{color:"orange"}},[t._v("校级")]):t._e(),1==e?a("a-tag",{attrs:{color:"pink"}},[t._v("院级")]):t._e()]}},{key:"status",fn:function(e){return[0==e?a("a-tag",{attrs:{color:"red"}},[t._v("整改中")]):t._e(),1==e?a("a-tag",{attrs:{color:"blue"}},[t._v("审核中")]):t._e(),2==e?a("a-tag",{attrs:{color:"green"}},[t._v("整改完成")]):t._e()]}},{key:"creationTime",fn:function(e){return[a("span",[t._v(t._s(e?e.substring(0,10):""))])]}},{key:"action",fn:function(e,n){return[a("a-button",{staticStyle:{"margin-right":"4px"},attrs:{icon:"file-search",title:"详情"},on:{click:function(e){return t.handleDetail(n)}}}),1!=n.status||-1==n.level.indexOf(1)&&-1==n.level.indexOf(2)&&-1==n.level.indexOf(3)?t._e():a("a-button",{staticStyle:{"margin-right":"4px"},attrs:{icon:"file-done",title:"审核",type:"primary"},on:{click:function(e){return t.verity(n)}}}),0!=n.status||0!=n.dangerLevel||-1==n.level.indexOf(9)&&-1==n.level.indexOf(6)&&-1==n.level.indexOf(8)&&-1==n.level.indexOf(10)?t._e():a("a-button",{staticStyle:{"margin-right":"4px"},attrs:{type:"primary",icon:"edit",title:"上传整改"},on:{click:function(e){return t.submitRecitify(n)}}}),t.isSchoolAdmin?a("a-popconfirm",{attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.handledelete(n)}}},[a("a-button",{attrs:{type:"danger",icon:"delete",title:"删除"}})],1):t._e()]}}])}),a("create-danger",{ref:"modal",on:{ok:t.handleOk}}),a("create-batch-danger",{ref:"batchmodal",on:{ok:t.handleOk}}),a("edit-rectify",{ref:"remodel",on:{ok:t.handleOk}}),a("verity-rectify",{ref:"vemodel",on:{ok:t.handleOk}})],1)],1)},i=[],o=(a("c975"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("ade3")),l=a("2af9"),r=a("6a7e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:700,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"formModel",attrs:{model:t.formDanger,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[t.isCollege?t._e():a("a-form-model-item",{ref:"collegeGuid",attrs:{label:"院部",prop:"collegeGuid"}},[a("a-select",{attrs:{placeholder:"请选择院部","allow-clear":"","filter-option":!1,"show-search":""},on:{change:t.collegeChange,search:t.fetchCollege},model:{value:t.formDanger.collegeGuid,callback:function(e){t.$set(t.formDanger,"collegeGuid",e)},expression:"formDanger.collegeGuid"}},t._l(t.collegelist,(function(e){return a("a-select-option",{key:e.guid,attrs:{value:e.guid}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-model-item",{ref:"branchGuid",attrs:{label:"实验室分室"}},[a("a-select",{attrs:{placeholder:"请选择实验分室","allow-clear":"","filter-option":!1,"show-search":""},on:{search:t.fetchBranch,change:t.branchChangeA},model:{value:t.formDanger.branchGuid,callback:function(e){t.$set(t.formDanger,"branchGuid",e)},expression:"formDanger.branchGuid"}},t._l(t.branchlist,(function(e){return a("a-select-option",{key:e.guid,attrs:{value:e.guid},on:{click:function(a){return t.branchChange(e)}}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-model-item",{ref:"content",attrs:{label:"地址",prop:"address"}},[a("a-select",{attrs:{"show-search":"",placeholder:"请选择地址","allow-clear":"","filter-option":!1,"show-arrow":!1,"not-found-content":null,value:t.formDanger.address},on:{search:t.fetchAddress,change:t.addressChangeA},model:{value:t.formDanger.address,callback:function(e){t.$set(t.formDanger,"address",e)},expression:"formDanger.address"}},t._l(t.addresslist,(function(e){return a("a-select-option",{key:e,attrs:{value:e},on:{click:function(a){return t.addressChange(e)}}},[t._v(" "+t._s(e)+" ")])})),1)],1),a("a-form-model-item",{ref:"content",attrs:{label:"隐患内容",prop:"content"}},[a("a-textarea",{attrs:{placeholder:"请输入内容",rows:4},model:{value:t.formDanger.content,callback:function(e){t.$set(t.formDanger,"content",e)},expression:"formDanger.content"}})],1),a("a-form-model-item",{attrs:{label:"检查人员"}},[a("a-input",{model:{value:t.formDanger.inspectors,callback:function(e){t.$set(t.formDanger,"inspectors",e)},expression:"formDanger.inspectors"}})],1),a("a-form-model-item",{attrs:{label:"上传隐患照片"}},[a("a-upload",{attrs:{customRequest:t.uploadImg,remove:t.deletePhoto,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview}},[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("Upload")]),a("a-progress",{directives:[{name:"show",rawName:"v-show",value:t.progressVisible,expression:"progressVisible"}],attrs:{type:"line",percent:t.proGress}})],1),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancelp}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},c=[],d=(a("4de4"),a("a434"),a("b0c0"),a("96cf"),a("1da1")),u=a("53ca"),h=a("788a"),m=a("b047"),f=a.n(m),p={components:{DragModal:l["c"]},data:function(){return this.fetchBranch=f()(this.fetchBranch,800),this.fetchCollege=f()(this.fetchCollege,800),this.fetchAddress=f()(this.fetchAddress,800),{title:"发现隐患",visible:!1,progressVisible:!1,proGress:0,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},isCollege:!1,formDanger:{content:"",files:[],collegeGuid:"",labCenterGuid:"",laboratoryGuid:"",branchGuid:"",address:"",inspectors:""},rules:{collegeGuid:[{required:!0,message:"请选择院部！"}],content:[{required:!0,message:"隐患内容不能为空！"}]},collegelist:[],centerlist:[],lablist:[],branchlist:[],addresslist:[],fileList:[],previewVisible:!1,previewImage:""}},methods:{modalshow:function(t){this.isCollege=t,this.visible=!0,this.fetchCollege(""),this.fetchBranch(""),this.fetchAddress("")},fetchCollege:function(t){var e=this,a={key:t,MaxResultCount:999};Object(h["z"])(a).then((function(t){e.collegelist=t.items}))},fetchBranch:function(t){var e=this,a={CollegeGuid:this.formDanger.collegeGuid,key:t,MaxResultCount:999};Object(h["F"])(a).then((function(t){var a=t.items.filter((function(t){if(null!=t.name&&void 0!=Object(u["a"])(t.name)&&""!=t.name)return t}));e.branchlist=a}))},fetchAddress:function(t){var e=this,a={CollegeGuid:this.formDanger.collegeGuid,branchGuid:this.formDanger.branchGuid,MaxResultCount:999,SkipCount:0,key:"",address:t};this.addresslist=[],""!=t&&(this.addresslist=[t]),Object(h["G"])(a).then((function(t){var a=t;e.addresslist.push.apply(e.addresslist,a)}))},collegeChange:function(t){"undefined"==typeof t&&this.fetchCollege(""),this.formDanger.collegeGuid=t,this.fetchBranch(""),this.fetchAddress(""),this.formDanger.branchGuid="",this.formDanger.address=""},branchChangeA:function(t){"undefined"==typeof t&&this.fetchBranch("")},branchChange:function(t){t?(this.formDanger.collegeGuid=t.collegeGuid,this.formDanger.branchGuid=t.guid,this.formDanger.address=t.address):this.formDanger.address=""},addressChangeA:function(t){"undefined"==typeof t&&this.fetchAddress("")},addressChange:function(t){var e=this;if(t){this.formDanger.address=t;var a={CollegeGuid:this.formDanger.collegeGuid,Address:t,MaxResultCount:999,SkipCount:0,key:""};Object(h["F"])(a).then((function(t){t.items.length>0&&(e.formDanger.branchGuid=t.items[0].guid,e.formDanger.collegeGuid=t.items[0].collegeGuid)}))}else this.formDanger.address=""},handleCancelp:function(){this.previewVisible=!1},handlePreview:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,getBase64(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},uploadImg:function(t){var e=this,a=new FormData;a.append("file",t.file),this.progressVisible=!0,this.proGress=60,Object(r["qb"])(a,{}).then((function(t){e.proGress=100,e.fileList.push({uid:t.code,url:t.url,name:t.code,status:"done"}),e.formDanger.files.push({code:t.code,url:t.url}),e.$message.success("图片上传成功"),e.progressVisible=!1,e.proGress=0}))},deletePhoto:function(t){var e=this.fileList.indexOf(t);-1!=e&&(this.fileList.splice(e,1),this.formDanger.files.splice(e,1))},handleOk:function(){var t=this;this.btnloading=!0,this.$refs.formModel.validate((function(e){e?Object(r["X"])(t.formDanger).then((function(e){t.btnloading=!1,t.visible=!1,t.$emit("ok"),t.formDanger={content:"",files:[],collegeGuid:"",labCenterGuid:"",laboratoryGuid:"",branchGuid:"",inspectors:""},t.fileList=[]})).catch((function(e){t.btnloading=!1})):t.btnloading=!1})),this.visible=!1},handleCancel:function(){this.visible=!1,this.progressVisible=!1,this.proGress=60,this.formDanger={content:"",files:[],collegeGuid:"",labCenterGuid:"",laboratoryGuid:"",branchGuid:"",inspectors:""},this.fileList=[]}}},b=p,g=a("2877"),v=Object(g["a"])(b,s,c,!1,null,null,null),y=v.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:1200,title:t.title,visible:t.visible},on:{cancel:t.handleCancel}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:18,sm:24}},[a("a-form-model",{ref:"formModel",staticClass:"create-batch-search",attrs:{model:t.formDanger}},[a("a-row",{attrs:{gutter:24,type:"flex",justify:"space-between"}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-model-item",{ref:"collegeGuid",attrs:{label:"院部"}},[a("a-select",{attrs:{placeholder:"请选择院部","allow-clear":"","filter-option":!1,"show-search":"",disabled:t.disabledType},on:{change:t.collegeChange,search:t.fetchCollege},model:{value:t.formDanger.collegeGuid,callback:function(e){t.$set(t.formDanger,"collegeGuid",e)},expression:"formDanger.collegeGuid"}},t._l(t.collegelist,(function(e){return a("a-select-option",{key:e.guid,attrs:{value:e.guid}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-model-item",{attrs:{label:"校区"}},[a("select-campus",{ref:"Scampus",on:{change:t.campusChange},model:{value:t.formDanger.CampusCode,callback:function(e){t.$set(t.formDanger,"CampusCode",e)},expression:"formDanger.CampusCode"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-model-item",{ref:"collegeGuid",attrs:{label:"实验室类型"}},[a("a-select",{attrs:{placeholder:"请选择实验室类型","allow-clear":"","filter-option":!1,"show-search":""},on:{change:t.typeChange,search:t.fetchType},model:{value:t.formDanger.labType,callback:function(e){t.$set(t.formDanger,"labType",e)},expression:"formDanger.labType"}},t._l(t.labTypes,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.value)+" ")])})),1)],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-model-item",{ref:"collegeGuid",attrs:{label:"检查人员"}},[a("a-input",{attrs:{placeholder:"请输入检查人员"},model:{value:t.formDanger.inspectors,callback:function(e){t.$set(t.formDanger,"inspectors",e)},expression:"formDanger.inspectors"}})],1)],1)],1)],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-popconfirm",{staticStyle:{"margin-right":"5px"},attrs:{disabled:!t.disabledType,title:"重置列表数据将被清空","ok-text":"确认","cancel-text":"取消"},on:{confirm:t.handleReset}},[a("a-button",{attrs:{disabled:!t.disabledType,type:"primary"}},[t._v("重置")])],1),a("a-button",{staticClass:"editable-add-btn",staticStyle:{"margin-top":"4px"},attrs:{disabled:!t.disabledType,type:"primary"},on:{click:t.handleAdd}},[t._v(" 添加 ")])],1)],1),a("div",{staticClass:"create-batch-wrap"},[a("a-table",{ref:"table",attrs:{columns:t.columns,"data-source":t.dataList,pagination:!1,rowKey:"key"},scopedSlots:t._u([{key:"teacherName",fn:function(e){return t._l(e,(function(e){return a("div",{key:e.key,staticStyle:{"text-align":"center"},attrs:{value:e.key}},[a("span",[t._v(t._s(e.teacherName))])])}))}},{key:"branchGuid",fn:function(e,n){return[a("div",[a("a-select",{attrs:{placeholder:"请选择实验分室","allow-clear":"","filter-option":!1,"show-search":""},on:{search:function(e){return t.fetchBranch(e,n)},change:function(e){return t.branchChangeA(e,n)},dropdownVisibleChange:function(e){return t.dropdownVisibleChange(e,n)}},model:{value:n.branchGuid,callback:function(e){t.$set(n,"branchGuid",e)},expression:"record.branchGuid"}},t._l(t.branchlist,(function(e){return a("a-select-option",{key:e.guid,attrs:{value:e.guid},on:{click:function(a){return t.branchChange(e,n)}}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]}},{key:"address",fn:function(e,n){return[a("div",[a("a-select",{attrs:{"show-search":"",placeholder:"请选择地址","allow-clear":"","filter-option":!1,"show-arrow":!1,"not-found-content":null},on:{search:function(e){return t.fetchAddress(e,n)},change:function(e){return t.addressChangeA(e,n)}},model:{value:n.address,callback:function(e){t.$set(n,"address",e)},expression:"record.address"}},t._l(t.addresslist,(function(e){return a("a-select-option",{key:e,attrs:{value:e},on:{click:function(a){return t.addressChange(e,n)}}},[t._v(" "+t._s(e)+" ")])})),1)],1)]}},{key:"content",fn:function(e,n){return[a("div",[a("a-textarea",{attrs:{placeholder:"请输入内容",rows:4},model:{value:n.content,callback:function(e){t.$set(n,"content",e)},expression:"record.content"}})],1)]}},{key:"files",fn:function(e,n,i){return[a("div",[a("a-upload",{attrs:{customRequest:t.uploadImg,remove:t.deletePhoto,"list-type":"picture-card","file-list":n.files},on:{preview:t.handlePreview,change:function(e){return t.onChangeUpload(n,i)}}},[a("a-icon",{attrs:{type:"plus"},on:{click:function(e){return t.onChangeUpload(n,i)}}}),a("div",{staticClass:"ant-upload-text",on:{click:function(e){return t.onChangeUpload(n,i)}}},[t._v("Upload")]),a("a-progress",{directives:[{name:"show",rawName:"v-show",value:n.progressVisible,expression:"record.progressVisible"}],attrs:{type:"line",percent:n.proGress}})],1),a("a-modal",{attrs:{visible:n.previewVisible,footer:null},on:{cancel:t.handleCancelp}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:n.previewImage}})])],1)]}},{key:"action",fn:function(e,n){return[a("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:function(e){return t.onDelete(n.key)}}})]}}])})],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},x=[],C=(a("4160"),a("159b"),[{title:"实验分室",dataIndex:"branchGuid",scopedSlots:{customRender:"branchGuid"},width:"200px"},{title:"地址",dataIndex:"address",scopedSlots:{customRender:"address"},width:"200px"},{title:"实验分室负责人",dataIndex:"teacherName",scopedSlots:{customRender:"teacherName"},width:"200px",align:"center"},{title:"隐患内容",dataIndex:"content",scopedSlots:{customRender:"content"},width:"220px"},{title:"上传隐患照片",dataIndex:"files",scopedSlots:{customRender:"files"},width:"260px"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}]),_={components:{DragModal:l["c"],SelectCampus:l["j"]},data:function(){return this.fetchBranch=f()(this.fetchBranch,800),this.fetchCollege=f()(this.fetchCollege,800),this.fetchAddress=f()(this.fetchAddress,800),{title:"批量添加隐患",visible:!1,btnloading:!1,disabledType:!1,formDanger:{CampusCode:"",collegeGuid:"",inspectors:"",labType:""},labTypes:[],dataList:[],columns:C,collegelist:[],branchlist:[],addresslist:[],count:1,curId:""}},methods:{modalshow:function(){this.visible=!0,this.fetchCollege(""),this.fetchBranch(""),this.fetchAddress(""),this.fetchType(""),this.disabledType=!1,this.formDanger={collegeGuid:"",inspectors:""},this.dataList=[]},fetchCollege:function(){var t=this,e={key:"",MaxResultCount:999};Object(h["z"])(e).then((function(e){t.collegelist=e.items}))},collegeChange:function(t){"undefined"!=typeof t&&(this.disabledType=!0),this.formDanger.collegeGuid=t;var e={CampusCode:this.formDanger.CampusCode,collegeGuid:t,branchGuid:"",labType:this.formDanger.labType};this.fetchBranch("",e),this.fetchAddress("",e)},campusChange:function(t){this.formDanger.CampusCode=t;var e={CampusCode:t,collegeGuid:this.formDanger.collegeGuid,branchGuid:"",labType:this.formDanger.labType};this.fetchBranch("",e),this.fetchAddress("",e)},typeChange:function(t){this.formDanger.labType=t;var e={CampusCode:this.formDanger.CampusCode,collegeGuid:this.formDanger.collegeGuid,branchGuid:"",labType:t};this.fetchBranch("",e),this.fetchAddress("",e)},fetchBranch:function(t,e){var a=this,n={campusCode:e?e.CampusCode:"",CollegeGuid:e?e.collegeGuid:"",laboratoryTypeKey:e?e.labType:"",key:t,MaxResultCount:999};Object(h["I"])(n).then((function(t){var e=t.items.filter((function(t){if(null!=t.name&&void 0!=Object(u["a"])(t.name)&&""!=t.name)return t}));a.branchlist=e}))},fetchAddress:function(t,e){var a=this,n={campusCode:e?e.CampusCode:"",CollegeGuid:e?e.collegeGuid:"",branchGuid:e?e.branchGuid:"",laboratoryTypeKey:e?e.labType:"",MaxResultCount:999,SkipCount:0,key:"",address:t};this.addresslist=[],""!=t&&(this.addresslist=[t]),Object(h["G"])(n).then((function(t){var e=t;a.addresslist.push.apply(a.addresslist,e)}))},fetchType:function(){var t=this;Object(h["D"])({PropertyKey:"laboratoryType"}).then((function(e){t.labTypes=e.items}))},dropdownVisibleChange:function(){this.formDanger.CampusCode,this.formDanger.collegeGuid,this.formDanger.labType},branchChangeA:function(t){var e={CampusCode:this.formDanger.CampusCode,collegeGuid:this.formDanger.collegeGuid,branchGuid:"",labType:this.formDanger.labType};"undefined"==typeof t&&(this.fetchBranch("",e),e.address=void 0,e.teacherName=void 0)},branchChange:function(t,e){e.CampusCode=t.CampusCode,e.branchGuid=t.guid,e.address=t.address,e.teacherName=t.safetyResponsible},addressChangeA:function(t){var e={CampusCode:this.formDanger.CampusCode,collegeGuid:this.formDanger.collegeGuid,branchGuid:"",labType:this.formDanger.labType};"undefined"==typeof t&&(this.fetchAddress("",e),e.branchGuid=void 0,e.teacherName=void 0)},addressChange:function(t,e){if(t){e.address=t;var a={CollegeGuid:this.formDanger.collegeGuid,Address:t,MaxResultCount:999,SkipCount:0,key:"",a:""};Object(h["I"])(a).then((function(t){t.items.length>0&&(e.branchGuid=t.items[0].guid,e.teacherName=t.items[0].responsible)}))}else e.address=""},handleCancelp:function(){this.dataList[this.curId].previewVisible=!1},handlePreview:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,getBase64(t.originFileObj);case 3:t.preview=a.sent;case 4:e.dataList[e.curId].previewImage=t.url||t.preview,e.dataList[e.curId].previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},onChangeUpload:function(t,e){this.curId=e},uploadImg:function(t){var e=this;setTimeout((function(){var a=new FormData;a.append("file",t.file),e.dataList[e.curId].progressVisible=!0,Object(r["qb"])(a,{}).then((function(t){e.dataList[e.curId].proGress=100,e.dataList[e.curId].files.push({code:t.code,uid:t.code,url:t.url,name:t.code,status:"done"}),e.$message.success("图片上传成功"),e.dataList[e.curId].progressVisible=!1,e.dataList[e.curId].proGress=0}))}),500)},deletePhoto:function(t){var e=this.dataList[this.curId].files.indexOf(t);-1!=e&&this.dataList[this.curId].files.splice(e,1)},handleOk:function(){var t=this;if(""==this.formDanger.inspectors)return this.$message.warning("请输入检察人员");if(this.dataList&&0==this.dataList.length)return this.$message.warning("隐患列表不能为空");var e=!1;if(this.dataList.forEach((function(t){if(""==t.branchGuid||void 0==t.branchGuid)return e=!0})),1==e)return this.$message.warning("实验分室不能为空");this.btnloading=!0;var a={collegeGuid:this.formDanger.collegeGuid,inspectors:this.formDanger.inspectors,eventHiddenDangers:this.dataList};Object(r["Y"])(a).then((function(e){t.btnloading=!1,t.visible=!1,t.$emit("ok")})).catch((function(e){t.btnloading=!1})),this.visible=!1},handleCancel:function(){this.visible=!1,this.disabledType=!1,this.formDanger={collegeGuid:"",inspectors:""},this.dataList=[]},handleReset:function(){this.disabledType=!1,this.formDanger={collegeGuid:"",inspectors:""},this.dataList=[]},handleAdd:function(){var t=this.count,e={key:t,collegeGuid:this.formDanger.collegeGuid,labType:void 0,teacherName:void 0,branchGuid:void 0,address:void 0,inspectors:void 0,files:[],previewVisible:!1,previewImage:"",progressVisible:!1,proGress:0,dangerLevel:0};this.dataList.push(e),this.count=t+1},onDelete:function(t){var e="";this.dataList.forEach((function(a,n){a.key==t&&(e=n)})),this.dataList.splice(e,1)}}},w=_,S=(a("37fc"),Object(g["a"])(w,k,x,!1,null,"a0ba51de",null)),O=S.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:700,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"formModel",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{ref:"rectifyContent",attrs:{label:"隐患信息"}},[a("div",[t._v(t._s(t.detailData.content))])]),a("a-form-model-item",{ref:"rectifyContent",attrs:{label:"整改内容",prop:"rectifyContent"}},[a("a-textarea",{attrs:{placeholder:"请输入内容",rows:4},model:{value:t.form.rectifyContent,callback:function(e){t.$set(t.form,"rectifyContent",e)},expression:"form.rectifyContent"}})],1),a("a-form-model-item",{attrs:{label:"上传整改照片"}},[a("a-upload",{attrs:{customRequest:t.uploadImg,remove:t.deletePhoto,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview}},[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancelp}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},I=[];function D(t){return new Promise((function(e,a){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(t){return a(t)}}))}var $,j={components:{DragModal:l["c"]},data:function(){return{title:"整改内容",visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},form:{rectifyContent:""},rules:{rectifyContent:[{required:!0,message:"隐患内容不能为空！"}]},fileList:[],previewVisible:!1,previewImage:"",detailData:""}},methods:{modalshow:function(t){var e=this;this.visible=!0,this.detailData=t,this.form.id=t.id,Object(r["T"])(this.form.id).then((function(t){e.form.rectifyContent=t.rectifyContent,t.photos.forEach((function(t){1==t.type&&e.fileList.push({uid:t.materialCode,url:t.url,name:t.materialCode,status:"done",infoid:t.id})}))}))},handleOk:function(){var t=this;this.btnloading=!0,this.$refs.formModel.validate((function(e){e?Object(r["nb"])(t.form).then((function(e){t.$message.success("已提交，请等待审核"),t.btnloading=!1,t.visible=!1,t.$emit("ok"),t.form={rectifyContent:""},t.fileList=[]})).catch((function(e){t.btnloading=!1})):t.btnloading=!1}))},handleCancel:function(){this.visible=!1,this.form={rectifyContent:""},this.fileList=[]},handleCancelp:function(){this.previewVisible=!1},handlePreview:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,D(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},uploadImg:function(t){var e=this,a=new FormData;a.append("file",t.file),Object(r["qb"])(a).then((function(t){var a={hiddenDangerId:e.form.id,materialCode:t.code,type:1};Object(r["a"])(a).then((function(a){e.fileList.push({uid:t.code,url:t.url,name:t.code,status:"done",infoid:a.id}),e.$message.success("图片上传成功")}))}))},deletePhoto:function(t){var e=this;Object(r["l"])(t.infoid).then((function(a){var n=e.fileList.indexOf(t);-1!=n&&e.fileList.splice(n,1)}))}}},P=j,q=Object(g["a"])(P,L,I,!1,null,null,null),R=q.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{width:"700px",title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"formModel",attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{ref:"content",attrs:{label:"整改内容"}},[a("pre",[t._v(t._s(t.info.rectifyContent))])]),a("a-form-model-item",{ref:"content",attrs:{label:"整改图片"}},t._l(t.info.photos.filter(t.findRectify),(function(t,e){return a("div",{key:e},[a("img",{staticStyle:{"margin-right":"4px","max-width":"100px"},attrs:{src:t.url,alt:""}})])})),0),a("a-form-model-item",{attrs:{label:"审核"}},[a("a-radio-group",{on:{change:t.onChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("a-radio",{attrs:{value:!0}},[t._v("通过")]),a("a-radio",{attrs:{value:!1}},[t._v("不通过")])],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},E=[],M={data:function(){return{title:"审核",visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},value:!0,info:{photos:[]}}},methods:{modalshow:function(t){var e=this;this.visible=!0,Object(r["T"])(t).then((function(t){e.info=t}))},handleOk:function(){var t=this;Object(r["sb"])({dangerId:this.info.id,passing:this.value}).then((function(e){t.visible=!1,t.$message.info("已审核"),t.$emit("ok"),t.info={photos:[]}}))},handleCancel:function(){this.visible=!1,this.info={photos:[]}},onChange:function(){},findRectify:function(t,e,a){if(1==t.type)return t}}},G=M,A=Object(g["a"])(G,T,E,!1,null,null,null),N=A.exports,B=[{title:"院部",dataIndex:"collegeName",width:"120px"},{title:"实验室分室/所在地点",dataIndex:"branchName",width:"170px",scopedSlots:{customRender:"branchName"}},{title:"隐患内容",dataIndex:"content",ellipsis:!0,width:"190px",scopedSlots:{customRender:"content"}},{title:"实验分室负责人",dataIndex:"branchPrincipal",width:"130px"},{title:"整改负责人",dataIndex:"principal",width:"100px"},{title:"隐患照片",dataIndex:"dangerpic",ellipsis:!0,scopedSlots:{customRender:"dangerpic"}},{title:"整改照片",dataIndex:"rectifypic",ellipsis:!0,scopedSlots:{customRender:"rectifypic"}},{title:"整改状态",dataIndex:"status",scopedSlots:{customRender:"status"},width:"90px"},{title:"级别",dataIndex:"dangerLevel",scopedSlots:{customRender:"dangerLevel"},width:"70px"},{title:"发现时间",dataIndex:"creationTime",scopedSlots:{customRender:"creationTime"},ellipsis:!0},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"150px"}],F=($={mounted:function(){},components:{STable:l["h"],CreateDanger:y,CreateBatchDanger:O,EditRectify:R,VerityRectify:N,SelectCollegeguid:l["k"],SelectLabcenter:l["m"],SelectLab:l["l"],SelectBranch:l["i"]},data:function(){var t=this;return{columns:B,queryParam:{CollegeGuid:"",LabCenterGuid:"",LaboratoryGuid:"",LabBranchGuid:"",Status:"",dangerLevel:"",IsEventDanger:!1,SkipCount:0,MaxResultCount:10},isSchoolAdmin:!1,isCollege:!1,loaddata:function(e){return t.queryParam.SkipCount=(e.pageNo-1)*e.pageSize,t.queryParam.MaxResultCount=e.pageSize,Object(r["S"])(t.queryParam).then((function(t){var a={};return a={data:t.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:t.totalCount},a}))},form:this.$form.createForm(this)}},created:function(){}},Object(o["a"])($,"mounted",(function(){var t=this.$store.getters.userInfo.role;-1!=t.indexOf("SchoolAdministratory")&&(this.isSchoolAdmin=!0),-1==t.indexOf("HazardouChemicalContactPerson")&&-1==t.indexOf("CollegeLabCenterDirector")&&-1==t.indexOf("CollegeAdministratory")&&-1==t.indexOf("CollegeLeadership")&&-1==t.indexOf("CollegeSafetyAdministratory")||(this.isCollege=!0)})),Object(o["a"])($,"methods",{createDanger:function(){this.$refs.modal.modalshow(this.isCollege)},createBatchDanger:function(){this.$refs.batchmodal.modalshow()},handleOk:function(){this.$refs.table.refresh()},handleSelectCollege:function(t){this.queryParam.CollegeGuid=t,this.queryParam.LabCenterGuid="",this.queryParam.LaboratoryGuid="",this.queryParam.LabBranchGuid="",this.$refs.Scenter.handleCollegeChange(t),this.$refs.Slab.handleCollegeChange(t),this.$refs.Sbranch.handleParamChange(this.queryParam.CollegeGuid,this.queryParam.LabCenterGuid,this.queryParam.LaboratoryGuid),this.$refs.table.refresh()},handleSelectCenter:function(t){""==t&&this.$refs.Scenter.handleCollegeChange(this.queryParam.CollegeGuid),this.queryParam.LabCenterGuid=t,this.queryParam.LaboratoryGuid="",this.queryParam.LabBranchGuid="",this.$refs.Slab.handleLabcenterChange(t),this.$refs.Sbranch.handleParamChange(this.queryParam.CollegeGuid,this.queryParam.LabCenterGuid,this.queryParam.LaboratoryGuid),this.$refs.table.refresh()},handleSelectLab:function(t){""==t&&(this.$refs.Slab.handleCollegeChange(this.queryParam.CollegeGuid),this.$refs.Slab.handleLabcenterChange(this.queryParam.labcenterGuid)),this.queryParam.LaboratoryGuid=t,this.queryParam.LabBranchGuid="",this.$refs.Sbranch.handleParamChange(this.queryParam.CollegeGuid,this.queryParam.LabCenterGuid,this.queryParam.LaboratoryGuid),this.$refs.table.refresh()},handleSelectBranch:function(t){""==t&&this.$refs.Sbranch.handleParamChange(this.queryParam.CollegeGuid,this.queryParam.LabCenterGuid,this.queryParam.LaboratoryGuid),this.queryParam.LabBranchGuid=t,this.$refs.table.refresh()},handleSelectStatus:function(t){this.queryParam.Status=t,this.$refs.table.refresh()},handledangerLevel:function(t){this.queryParam.dangerLevel=t,this.$refs.table.refresh()},findDanger:function(t,e,a){if(0==t.type)return t},findRectify:function(t,e,a){if(1==t.type)return t},handleDetail:function(t){this.$router.push({name:"dangerDetail",query:{id:t.id}})},submitRecitify:function(t){this.$refs.remodel.modalshow(t)},verity:function(t){this.$refs.vemodel.modalshow(t.id)},handledelete:function(t){var e=this;Object(r["p"])(t.id).then((function(t){e.$refs.table.refresh()}))},handleExport:function(){var t={collegeGuid:this.queryParam.CollegeGuid,labCenterGuid:this.queryParam.LabCenterGuid,laboratoryGuid:this.queryParam.LaboratoryGuid,labBranchGuid:this.queryParam.LabBranchGuid,eventId:this.queryParam.EventId,status:""!=this.queryParam.Status?this.queryParam.Status:null,dangerLevel:""!=this.queryParam.dangerLevel?this.queryParam.dangerLevel:null,isEventDanger:!1,skipCount:this.queryParam.SkipCount,maxResultCount:this.queryParam.MaxResultCount};Object(r["x"])(t).then((function(t){var e=t,a=new Blob([e]),n="巡查隐患表.xlsx";if("download"in document.createElement("a")){var i=document.createElement("a");i.download=n,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}else navigator.msSaveBlob(a,n)}))}}),$),z=F,V=(a("0e05"),Object(g["a"])(z,n,i,!1,null,null,null));e["default"]=V.exports},"0ec5":function(t,e,a){"use strict";var n=a("dd10"),i=a.n(n);i.a},"0f3c":function(t,e,a){"use strict";var n=a("0b34"),i=a.n(n);i.a},"0f8c":function(t,e,a){},"10f8":function(t,e,a){},"169d":function(t,e,a){"use strict";var n=a("451e"),i=a.n(n);i.a},"16c0":function(t,e,a){"use strict";var n=a("f5d2"),i=a.n(n);i.a},"16ff":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"college_plan_detail"},[a("a-page-header",{staticClass:"pageheader",on:{back:function(){return t.$router.go(-1)}}},[a("template",{slot:"title"},[t._v(t._s(t.detailData.collegeName)+" "),a("span")])],2),a("a-card",[a("a-table",{ref:"table",attrs:{columns:t.columns,"data-source":t.data,pagination:!1},scopedSlots:t._u([t._l(t.editRowKeys,(function(e){return{key:e,fn:function(n,i,o){return[a("div",{key:e},[i.editable?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:n},on:{change:function(a){return t.handleChange(a.target.value,i.id,e)}}}):[t._v(" "+t._s(n)+" ")]],2)]}}})),{key:"action",fn:function(e,n,i){return[a("div",{staticClass:"editable-row-operations"},[n.editable?a("span",[a("a",{on:{click:function(){return t.save(n.id)}}},[t._v("保存")]),a("a-popconfirm",{attrs:{title:"确定取消编辑?","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(){return t.cancellabel(n.id)}}},[a("a",[t._v("取消")])])],1):a("span",[-1!=t.detailData.levels.indexOf(9)||-1!=t.detailData.levels.indexOf(10)||-1!=t.detailData.levels.indexOf(7)?a("a",{attrs:{disabled:""!=t.editingKey||!t.isEdit},on:{click:function(){return t.editlabel(n.id)}}},[t._v("编辑")]):t._e()])])]}}],null,!0)})],1),a("select-branch",{ref:"selectModal",on:{ok:t.handleOk}})],1)},i=[],o=(a("4de4"),a("4160"),a("c975"),a("d81d"),a("d3b7"),a("ac1f"),a("5319"),a("159b"),a("ddb0"),a("2909")),l=a("5530"),r=a("6a7e"),s=a("5a78"),c={mounted:function(){},components:{SelectBranch:s["a"]},data:function(){return{info:this.$route.query,columns:[],detailData:{levels:[]},data:[],editRowKeys:[],planDetail:{levels:[]},editingKey:"",cacheData:[],isEdit:!0,statusshow:""}},created:function(){this.init()},methods:{init:function(){var t=this;Object(r["H"])({customStatisticsId:this.info.customStatisticsId}).then((function(e){if(t.detailData=e,t.columns=[],t.data=[],e.values&&e.values.length>0){var a={};e.values.forEach((function(e,n){a={title:e.label,dataIndex:"label"+n,scopedSlots:{customRender:"label"+n}},t.editRowKeys.push("label"+n),t.columns.push(a)})),t.columns.push({title:"操作",dataIndex:"action",width:"110px",scopedSlots:{customRender:"action"}})}if(e.values&&e.values.length>0){var n={};t.detailData.values.forEach((function(t,e){var a="label"+e,i=t.value;n[a]=i})),t.data.push(n),t.cacheData=t.data.map((function(t){return Object(l["a"])({},t)}))}}))},handleOk:function(){this.init()},handleChange:function(t,e,a){var n=Object(o["a"])(this.data),i=n.filter((function(t){return e===t.id}))[0];i&&(i[a]=t,this.data=n)},cancellabel:function(t){var e=Object(o["a"])(this.data),a=e.filter((function(e){return t===e.id}))[0];this.editingKey="",a&&(Object.assign(a,this.cacheData.filter((function(e){return t===e.id}))[0]),delete a.editable,this.data=e)},editlabel:function(t){var e=Object(o["a"])(this.data),a=e.filter((function(e){return t===e.id}))[0];this.editingKey=t,a&&(a.editable=!0,this.data=e)},save:function(t){var e=Object(o["a"])(this.data),a=Object(o["a"])(this.cacheData),n=e.filter((function(e){return t===e.id}))[0],i=a.filter((function(e){return t===e.id}))[0];n&&i&&(delete n.editable,this.data=e,Object.assign(i,n),this.cacheData=a),this.editingKey="",this.submit()},submit:function(){var t=this;if(this.detailData&&this.detailData.values&&this.detailData.values.length>0){var e=this.data&&this.data.length>0?this.data[0]:[];this.detailData.values.forEach((function(t,a){for(var n in e)if(-1!=n.indexOf("label")){var i=n.replace("label","");i==a&&(t.value=e[n])}}))}Object(r["cb"])(this.detailData).then((function(e){t.init(),t.$message.info("保存成功！")}))}}},d=c,u=(a("7425"),a("2877")),h=Object(u["a"])(d,n,i,!1,null,null,null);e["default"]=h.exports},"172a":function(t,e,a){},1866:function(t,e,a){},"1ac9":function(t,e,a){},"1b25":function(t,e,a){},"1cf2":function(t,e,a){"use strict";a.r(e);for(var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",[a("a-tabs",{attrs:{"default-active-key":"2"}},[a("a-tab-pane",{key:"2",attrs:{tab:"危险源"}},[a("danger-list")],1),a("a-tab-pane",{key:"3",attrs:{tab:"防护措施"}},[a("protective-measures")],1),a("a-tab-pane",{key:"4",attrs:{tab:"灭火要点"}},[a("extinguishing-list")],1),a("a-tab-pane",{key:"5",attrs:{tab:"特种设备类型"}},[a("special-equipmenttype")],1)],1)],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"QualificationCard"},[a("div",{staticClass:"createButton"},[a("a-button",{attrs:{icon:"plus"},on:{click:t.handlecreate}},[t._v("新增")])],1),a("div",{staticClass:"paramscard"},[a("a-table",{attrs:{rowKey:function(t){return t.id},loading:t.tableLoading,columns:t.columns,pagination:{defaultPageSize:10,showTotal:function(t){return"共 "+t+" 条"}},"data-source":t.navList.items},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{staticStyle:{"font-size":"16px"},on:{click:function(e){return t.handleModify(n)}}},[t._v("修改")]),a("a-menu-item",{staticStyle:{"font-size":"16px"}},[a("a-popconfirm",{attrs:{title:"确定要删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.confirm(n.id)},cancel:t.cancel}},[t._v("删除")])],1)],1),a("a-button",{attrs:{icon:"bars"}})],1)]],2)}}])}),a("change-qualification",{ref:"modiftymodal",on:{ok:t.handleOk}}),a("create-qualification",{ref:"createmodal",on:{ok:t.handleOk}})],1)])},l=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:600,title:"修改",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"内容"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{initialValue:t.detailinfo.content,rules:[{required:!0}]}],expression:"['content',{initialValue:detailinfo.content,rules:[{required:true}]}]"}]})],1)],1),a("a-col",{staticStyle:{display:"none"},attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"序号"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["index",{initialValue:t.detailinfo.index,rules:[{required:!0}]}],expression:"['index',{initialValue:detailinfo.index,rules:[{required:true}]}]"}]})],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},s=[],c=a("cf1d"),d=a("9d2c"),u={components:{dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,detailinfo:{},form:this.$form.createForm(this,{name:"changequalification"})}},methods:{modalshow:function(t){this.visible=!0,this.detailinfo=t},handleCancel:function(){this.visible=!1},handleOk:function(){var t=this;this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){e?t.btnloading=!1:(t.detailinfo.content=a.content,t.detailinfo.index=a.index,Object(c["g"])(t.detailinfo,t.detailinfo.id).then((function(e){t.$emit("ok")})).catch((function(t){})),setTimeout((function(){t.btnloading=!1,t.visible=!1})))})),this.form.resetFields()}}},h=u,m=a("2877"),f=Object(m["a"])(h,r,s,!1,null,null,null),p=f.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:600,title:"添加参数",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"请输入名称"}]}],expression:"['content',{rules:[{required:true,message:'请输入名称'}]}]"}]})],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},g=[],v={components:{dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,form:this.$form.createForm(this,{name:"createqualification"})}},methods:{modalshow:function(){this.visible=!0},handleOk:function(){var t=this;this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){e?t.btnloading=!1:(Object(c["b"])(a).then((function(t){})).catch((function(t){})),setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok",a)}),1500))})),this.form.resetFields()},handleCancel:function(){this.visible=!1,this.form.resetFields()}}},y=v,k=Object(m["a"])(y,b,g,!1,null,null,null),x=k.exports,C=[{title:"内容",dataIndex:"content"},{title:"操作",dataIndex:"action",width:"120px",scopedSlots:{customRender:"action"}}],_={components:{ChangeQualification:p,CreateQualification:x},data:function(){return{columns:C,queryParam:{SkipCount:0,MaxResultCount:99},navList:[],tableLoading:!1}},mounted:function(){this.getQualification()},methods:{handleOk:function(){this.getQualification()},handlecreate:function(){this.$refs.createmodal.modalshow()},cancel:function(){},confirm:function(t){var e=this;Object(c["l"])(t).then((function(t){e.getQualification()}))},handleModify:function(t){this.$refs.modiftymodal.modalshow(t),this.getQualification()},getQualification:function(){var t=this;Object(c["q"])(this.queryParam).then((function(e){t.navList=e}))}}},w=_,S=(a("2e36"),Object(m["a"])(w,o,l,!1,null,null,null)),O=S.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Dangerlist"},[a("div",{staticClass:"createButton"},[a("a-button",{attrs:{icon:"plus"},on:{click:t.handlecreate}},[t._v("新增")])],1),a("div",{staticClass:"paramscard"},[a("a-table",{attrs:{rowKey:function(t){return t.id},loading:t.tableLoading,columns:t.columns,pagination:{defaultPageSize:10,showTotal:function(t){return"共 "+t+" 条"}},"data-source":t.navList.items},scopedSlots:t._u([{key:"dangerpic",fn:function(t,e){return[a("div",{key:e.id,staticStyle:{float:"left"}},[a("img",{staticStyle:{"margin-right":"4px","max-width":"80px","max-height":"100px"},attrs:{src:e.url,alt:""}})])]}},{key:"action",fn:function(e,n){return[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{staticStyle:{"font-size":"16px"},on:{click:function(e){return t.handleModify(n)}}},[t._v("修改")]),a("a-menu-item",{staticStyle:{"font-size":"16px"}},[a("a-popconfirm",{attrs:{title:"确定要删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.confirm(n.id)},cancel:t.cancel}},[t._v("删除")])],1)],1),a("a-button",{attrs:{icon:"bars"}})],1)]}}])}),a("change-danger",{ref:"modiftymodal",on:{ok:t.handleOk}}),a("create-danger",{ref:"createmodal",on:{ok:t.handleOk}}),a("danger-detail",{ref:"detailmodal",on:{ok:t.handleOk}})],1)])},I=[],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:600,title:"修改危险源信息",visible:t.visible,destroyOnClose:!0},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"内容"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{initialValue:t.detailinfo.content,rules:[{required:!0}]}],expression:"['content', { initialValue: detailinfo.content, rules: [{ required: true }] }]"}]})],1),a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:18},label:"等级"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["level",{initialValue:t.detailinfo.level,rules:[{required:!0}]}],expression:"['level',{ initialValue: detailinfo.level,  rules: [{ required: true }] }]"}]},[a("a-radio",{attrs:{value:1}},[t._v(" 1 ")]),a("a-radio",{attrs:{value:2}},[t._v(" 2 ")]),a("a-radio",{attrs:{value:3}},[t._v(" 3 ")])],1)],1)],1),a("a-col",{staticStyle:{display:"none"},attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},indexlabel:"序号"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["index",{initialValue:t.detailinfo.index,rules:[{required:!0}]}],expression:"['index',{initialValue:detailinfo.index,rules:[{required:true}]}]"}]})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("div",{staticClass:"clearfix",staticStyle:{"margin-left":"24px"}},[a("span",[t._v("图标")]),a("a-upload",{attrs:{customRequest:t.uploadImg,remove:t.deletePhoto,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview}},[t.fileList.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1):t._e()]),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancelp}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)])],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},$=[],j=(a("96cf"),a("1da1")),P=a("6a7e"),q={components:{dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,fileList:[],detailinfo:{},riskinfo:{},form:this.$form.createForm(this,{name:"changedanger"}),previewVisible:!1,previewImage:""}},methods:{modalshow:function(t){this.visible=!0,this.detailinfo=t,this.fileList=[],t.url&&this.fileList.push({uid:t.logo,url:t.url,name:t.logo,status:"done"})},handleOk:function(){var t=this;this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){t.detailinfo.content=a.content,t.detailinfo.index=a.index,t.detailinfo.level=a.level,Object(c["i"])(t.detailinfo,t.detailinfo.id).then((function(e){t.$message.success("修改成功"),t.$emit("ok",a)})),setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1}),1500)})),this.form.resetFields()},handleCancel:function(){this.visible=!1,this.fileList=[],this.form.resetFields()},handlePreview:function(t){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,getBase64(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleCancelp:function(){this.previewVisible=!1},uploadImg:function(t){var e=this,a=new FormData;a.append("file",t.file),Object(P["pb"])(a).then((function(a){t.onSuccess(a,t.file),e.fileList.push({uid:a.code,url:a.url,name:a.code,status:"done"}),e.detailinfo.logo=a.code,e.detailinfo.url=a.url}))},deletePhoto:function(){this.fileList=[],this.detailinfo.logo=null}}},R=q,T=Object(m["a"])(R,D,$,!1,null,null,null),E=T.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:600,title:"添加危险源信息",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:18},label:"内容"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0}]}],expression:"['content', { rules: [{ required: true }] }]"}]})],1),a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:18},label:"等级"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["level",{rules:[{required:!0}]}],expression:"['level',{ rules: [{ required: true }] }]"}]},[a("a-radio",{attrs:{value:1}},[t._v(" 1 ")]),a("a-radio",{attrs:{value:2}},[t._v(" 2 ")]),a("a-radio",{attrs:{value:3}},[t._v(" 3 ")])],1)],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("div",{staticClass:"clearfix",staticStyle:{"margin-left":"24px"}},[a("span",[t._v("图标")]),a("a-upload",{attrs:{customRequest:t.uploadImg,remove:t.deletePhoto,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview}},[t.fileList.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1):t._e()]),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancelp}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)])],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},G=[],A={components:{dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,queryParam:{SkipCount:0,MaxResultCount:10},fileList:[],riskinfo:{},logo:"",form:this.$form.createForm(this,{name:"createdanger"}),previewVisible:!1,previewImage:""}},methods:{modalshow:function(){this.visible=!0},handleOk:function(){var t=this;this.fileList=[],this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){t.riskinfo.content=a.content,t.riskinfo.level=a.level,Object(c["d"])(t.riskinfo).then((function(e){t.$message.success("添加成功")})),setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok",a)}),1500)})),this.form.resetFields()},handleCancel:function(){this.visible=!1,this.form.resetFields()},handlePreview:function(t){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,getBase64(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleCancelp:function(){this.previewVisible=!1},uploadImg:function(t){var e=this,a=new FormData;a.append("file",t.file),Object(P["pb"])(a).then((function(a){t.onSuccess(a,t.file),e.fileList.push({uid:a.code,url:a.url,name:a.code,status:"done"}),e.riskinfo.logo=a.code,e.riskinfo.url=a.url}))},deletePhoto:function(){this.fileList=[],delete this.riskinfo.logo}}},N=A,B=Object(m["a"])(N,M,G,!1,null,null,null),F=B.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{width:"900px",title:"危险源详情",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}}),a("a-row",[a("a-col",{attrs:{md:24,sm:24}},[a("a-card",{staticStyle:{height:"420px"}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(" 内容："),a("span",[t._v(t._s(t.detailinfo.content))])]),a("div",{staticStyle:{"text-align":"center",height:"300px"}},[a("a",{attrs:{href:t.detailinfo.url,target:"_blank",title:"查看原图"}},[a("img",{attrs:{height:"100%",controls:"controls",src:t.detailinfo.url}})])])])],1)],1),a("change-danger",{ref:"modiftymodal",on:{ok:t.handleOk}}),a("template",{slot:"footer"},[a("a-button",{key:"back",attrs:{type:"primary"},on:{click:t.handleCancel}},[t._v("返回")])],1)],2)},V=[],K={components:{ChangeDanger:E},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,detailinfo:{},form:this.$form.createForm(this,{name:"dangerdetail"})}},methods:{modalshow:function(t){this.visible=!0,this.detailinfo=t},handleCancel:function(){this.visible=!1},handleModify:function(t){this.$refs.modiftymodal.modalshow(t)},handleOk:function(){}}},U=K,Y=Object(m["a"])(U,z,V,!1,null,null,null),H=Y.exports,Q=[{title:"图标",dataIndex:"url",width:"220px",scopedSlots:{customRender:"dangerpic"}},{title:"内容",dataIndex:"content"},{title:"等级",dataIndex:"level"},{title:"操作",dataIndex:"action",width:"120px",scopedSlots:{customRender:"action"}}],J=[{key:"1",title:"危险源一",content:"危险源内容一"},{key:"2",title:"危险源二",content:"危险源内容二"}],W={components:{ChangeDanger:E,CreateDanger:F,DangerDetail:H},data:function(){return{data:J,columns:Q,queryParam:{SkipCount:0,MaxResultCount:99},navList:[],tableLoading:!1}},mounted:function(){this.getRisksource()},methods:{handleOk:function(){this.getRisksource()},handlecreate:function(){this.$refs.createmodal.modalshow()},handleDetail:function(t){this.$refs.detailmodal.modalshow(t)},cancel:function(){},confirm:function(t){var e=this;Object(c["n"])(t).then((function(t){e.getRisksource()}))},handleModify:function(t){this.$refs.modiftymodal.modalshow(t)},getRisksource:function(){var t=this;Object(c["s"])(this.queryParam).then((function(e){t.navList=e}))}}},Z=W,X=(a("313d"),Object(m["a"])(Z,L,I,!1,null,null,null)),tt=X.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Protective"},[a("div",{staticClass:"createButton"},[a("a-button",{attrs:{icon:"plus"},on:{click:t.handlecreate}},[t._v("新增")])],1),a("div",{staticClass:"paramscard"},[a("a-table",{attrs:{rowKey:function(t){return t.id},loading:t.tableLoading,columns:t.columns,pagination:{defaultPageSize:10,showTotal:function(t){return"共 "+t+" 条"}},"data-source":t.navList.items},scopedSlots:t._u([{key:"dangerpic",fn:function(t,e){return[a("div",{key:e.id,staticStyle:{float:"left"}},[a("img",{staticStyle:{"margin-right":"4px","max-width":"80px","max-height":"100px"},attrs:{src:e.url,alt:""}})])]}},{key:"action",fn:function(e,n){return a("span",{},[[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{staticStyle:{"font-size":"16px"},on:{click:function(e){return t.handleModify(n)}}},[t._v("修改")]),a("a-menu-item",{staticStyle:{"font-size":"16px"}},[a("a-popconfirm",{attrs:{title:"确定要删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.confirm(n.id)},cancel:t.cancel}},[t._v("删除")])],1)],1),a("a-button",{attrs:{icon:"bars"}})],1)]],2)}}])}),a("change-protective",{ref:"modiftymodal",on:{ok:t.handleOk}}),a("create-protective",{ref:"createmodal",on:{ok:t.handleOk}}),a("protective-detail",{ref:"detailmodal",on:{ok:t.handleOk}})],1)])},at=[],nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:600,title:"修改防护措施信息",visible:t.visible,destroyOnClose:!0},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:16}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"内容"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{initialValue:t.detailinfo.content,rules:[{required:!0}]}],expression:"['content',{initialValue:detailinfo.content,rules:[{required:true}]}]"}]})],1)],1),a("a-col",{staticStyle:{display:"none"},attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"序号"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["index",{initialValue:t.detailinfo.index,rules:[{required:!0}]}],expression:"['index',{initialValue:detailinfo.index,rules:[{required:true}]}]"}]})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("div",{staticClass:"clearfix",staticStyle:{"margin-left":"24px"}},[a("span",[t._v("图标")]),a("a-upload",{attrs:{customRequest:t.uploadImg,remove:t.deletePhoto,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview}},[t.fileList.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1):t._e()]),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancelp}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)])],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},it=[],ot={components:{dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,fileList:[],detailinfo:{},riskinfo:{},form:this.$form.createForm(this,{name:"changeprotective"}),previewVisible:!1,previewImage:""}},methods:{modalshow:function(t){this.visible=!0,this.detailinfo=t,this.fileList=[],t.url&&this.fileList.push({uid:t.logo,url:t.url,name:t.logo,status:"done"})},handleOk:function(){var t=this;this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){t.detailinfo.content=a.content,t.detailinfo.index=a.index,Object(c["h"])(t.detailinfo,t.detailinfo.id).then((function(e){t.$message.success("修改成功")})),setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok",a)}),1500)})),this.form.resetFields()},handleCancel:function(){this.visible=!1,this.fileList=[],this.form.resetFields()},handlePreview:function(t){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,getBase64(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleCancelp:function(){this.previewVisible=!1},uploadImg:function(t){var e=this,a=new FormData;a.append("file",t.file),Object(P["pb"])(a).then((function(a){t.onSuccess(a,t.file),e.fileList.push({uid:a.code,url:a.url,name:a.code,status:"done"}),e.detailinfo.logo=a.code,e.detailinfo.url=a.url}))},deletePhoto:function(){this.fileList=[],this.detailinfo.logo=null}}},lt=ot,rt=Object(m["a"])(lt,nt,it,!1,null,null,null),st=rt.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:600,title:"添加防护措施",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"内容"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0}]}],expression:"['content',{rules:[{required:true}]}]"}]})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("div",{staticClass:"clearfix",staticStyle:{"margin-left":"24px"}},[a("span",[t._v("图片")]),a("a-upload",{attrs:{customRequest:t.uploadImg,remove:t.deletePhoto,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview}},[t.fileList.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1):t._e()]),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancelp}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)])],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},dt=[],ut={components:{dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,fileList:[],protectiveinfo:{},form:this.$form.createForm(this,{name:"createdanger"}),previewVisible:!1,previewImage:""}},methods:{modalshow:function(){this.visible=!0},handleOk:function(){var t=this;this.fileList=[],this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){t.protectiveinfo.content=a.content,Object(c["c"])(t.protectiveinfo).then((function(e){t.$message.success("添加成功")})),setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok",a)}),1500)})),this.form.resetFields()},handleCancel:function(){this.visible=!1,this.form.resetFields()},handlePreview:function(t){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,getBase64(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleCancelp:function(){this.previewVisible=!1},uploadImg:function(t){var e=this,a=new FormData;a.append("file",t.file),Object(P["pb"])(a).then((function(a){t.onSuccess(a,t.file),e.fileList.push({uid:a.code,url:a.url,name:a.code,status:"done"}),e.protectiveinfo.logo=a.code,e.protectiveinfo.url=a.url}))},deletePhoto:function(){this.fileList=[],delete this.protectiveinfo.logo}}},ht=ut,mt=Object(m["a"])(ht,ct,dt,!1,null,null,null),ft=mt.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{width:"900px",title:"危险源详情",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}}),a("a-row",[a("a-col",{attrs:{md:24,sm:24}},[a("a-card",{staticStyle:{height:"420px"}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(" 内容："),a("span",[t._v(t._s(t.detailinfo.content))])]),a("div",{staticStyle:{"text-align":"center",height:"300px"}})])],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",attrs:{type:"primary"},on:{click:t.handleCancel}},[t._v("返回")])],1),a("change-danger",{ref:"modiftymodal",on:{ok:t.handleOk}})],2)},bt=[],gt={components:{ChangeDanger:E},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,detailinfo:{},form:this.$form.createForm(this,{name:"protectivedetail"})}},methods:{modalshow:function(t){this.visible=!0,this.detailinfo=t},handleCancel:function(){this.visible=!1},handleModify:function(t){this.$refs.modiftymodal.modalshow(t)},handleOk:function(){}}},vt=gt,yt=Object(m["a"])(vt,pt,bt,!1,null,null,null),kt=yt.exports,xt=[{title:"图标",dataIndex:"url",width:"220px",scopedSlots:{customRender:"dangerpic"}},{title:"内容",dataIndex:"content"},{title:"操作",dataIndex:"action",width:"120px",scopedSlots:{customRender:"action"}}],Ct={components:{ChangeProtective:st,CreateProtective:ft,ProtectiveDetail:kt},data:function(){return{columns:xt,queryParam:{SkipCount:0,MaxResultCount:99},navList:[],tableLoading:!1}},mounted:function(){this.getprotective()},methods:{handleOk:function(){this.getprotective()},handlecreate:function(){this.$refs.createmodal.modalshow()},cancel:function(){this.getprotective()},confirm:function(t){var e=this;Object(c["m"])(t).then((function(t){e.getprotective()}))},handleDetail:function(t){this.$refs.detailmodal.modalshow(t)},handleModify:function(t){this.$refs.modiftymodal.modalshow(t)},getprotective:function(){var t=this;Object(c["r"])(this.queryParam).then((function(e){t.navList=e}))}}},_t=Ct,wt=(a("3a16"),Object(m["a"])(_t,et,at,!1,null,null,null)),St=wt.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Extinguishing"},[a("div",{staticClass:"createButton"},[a("a-button",{attrs:{icon:"plus"},on:{click:t.handlecreate}},[t._v("新增")])],1),a("div",{staticClass:"paramscard"},[a("a-table",{attrs:{rowKey:function(t){return t.id},loading:t.tableLoading,columns:t.columns,pagination:{defaultPageSize:10,showTotal:function(t){return"共 "+t+" 条"}},"data-source":t.navList.items},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{staticStyle:{"font-size":"16px"},on:{click:function(e){return t.handleModify(n)}}},[t._v("修改")]),a("a-menu-item",{staticStyle:{"font-size":"16px"}},[a("a-popconfirm",{attrs:{title:"确定要删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.confirm(n.id)},cancel:t.cancel}},[t._v("删除")])],1)],1),a("a-button",{attrs:{icon:"bars"}})],1)]],2)}}])}),a("change-extinguishing",{ref:"modiftymodal",on:{ok:t.handleOk}}),a("create-extinguishing",{ref:"createmodal",on:{ok:t.handleOk}})],1)])},Lt=[],It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:600,title:"修改灭火要点",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"内容"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{initialValue:t.detailinfo.content,rules:[{required:!0}]}],expression:"['content',{initialValue:detailinfo.content,rules:[{required:true}]}]"}]})],1)],1),a("a-col",{staticStyle:{display:"none"},attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"序号"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["index",{initialValue:t.detailinfo.index,rules:[{required:!0}]}],expression:"['index',{initialValue:detailinfo.index,rules:[{required:true}]}]"}]})],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},Dt=[],$t={components:{dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,title:"",content:"",detailinfo:{},form:this.$form.createForm(this,{name:"changeextinguishing"})}},methods:{modalshow:function(t){this.visible=!0,this.detailinfo=t},handleCancel:function(){this.visible=!1},handleOk:function(){var t=this;this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){e?t.btnloading=!1:(t.detailinfo.content=a.content,t.detailinfo.index=a.index,Object(c["f"])(t.detailinfo,t.detailinfo.id).then((function(e){t.$emit("ok")})).catch((function(t){})),setTimeout((function(){t.btnloading=!1,t.visible=!1})))})),this.form.resetFields()}}},jt=$t,Pt=Object(m["a"])(jt,It,Dt,!1,null,null,null),qt=Pt.exports,Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:600,title:"添加灭火要点",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"内容"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0}]}],expression:"['content',{rules:[{required:true}]}]"}]})],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},Tt=[],Et={components:{dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,form:this.$form.createForm(this,{name:"createextinguishing"})}},methods:{modalshow:function(){this.visible=!0},handleOk:function(){var t=this;this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){e?t.btnloading=!1:(Object(c["a"])(a).then((function(t){})).catch((function(t){})),setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok",a)}),1500))})),this.form.resetFields()},handleCancel:function(){this.visible=!1,this.form.resetFields()}}},Mt=Et,Gt=Object(m["a"])(Mt,Rt,Tt,!1,null,null,null),At=Gt.exports,Nt=[{title:"内容",dataIndex:"content"},{title:"操作",dataIndex:"action",width:"120px",scopedSlots:{customRender:"action"}}],Bt={components:{ChangeExtinguishing:qt,CreateExtinguishing:At},data:function(){return{columns:Nt,queryParam:{SkipCount:0,MaxResultCount:99},navList:[],tableLoading:!1}},mounted:function(){this.getextinguishing()},methods:{handleOk:function(){this.getextinguishing()},handlecreate:function(){this.$refs.createmodal.modalshow()},cancel:function(){},confirm:function(t){var e=this;Object(c["k"])(t).then((function(t){e.getextinguishing()}))},handleModify:function(t){this.$refs.modiftymodal.modalshow(t)},getextinguishing:function(){var t=this;Object(c["p"])(this.queryParam).then((function(e){t.navList=e}))}}},Ft=Bt,zt=(a("a1a3"),Object(m["a"])(Ft,Ot,Lt,!1,null,null,null)),Vt=zt.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{bordered:!1}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(" 实验室级别清单 ")]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{attrs:{icon:"plus"},on:{click:t.handlecreate}},[t._v("新增")])],1),a("a-table",{attrs:{columns:t.columns,"data-source":t.data},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{staticStyle:{"font-size":"16px"},on:{click:function(e){return t.handleModify(n)}}},[t._v("修改")]),a("a-menu-item",{staticStyle:{"font-size":"16px"}},[a("a-popconfirm",{attrs:{title:"确定要删除?","ok-text":"是","cancel-text":"否"},on:{cancel:t.cancel}},[t._v("删除")])],1)],1),a("a-button",{attrs:{icon:"bars"}})],1)]],2)}}])}),a("change-level",{ref:"modiftymodal",on:{ok:t.handleOk}}),a("create-level",{ref:"createmodal",on:{ok:t.handleOk}})],1)},Ut=[],Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:600,title:"修改实验室级别",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{initialValue:t.detailinfo.title,rules:[{required:!0,message:"请输入名称"}]}],expression:"['title',{initialValue:detailinfo.title,rules:[{required:true,message:'请输入名称'}]}]"}]})],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},Ht=[],Qt={components:{dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,detailinfo:{},form:this.$form.createForm(this,{name:"changelevel"})}},methods:{modalshow:function(t){this.visible=!0,this.detailinfo=t},handleCancel:function(){this.visible=!1},handleOk:function(){this.btnloading=!0}}},Jt=Qt,Wt=Object(m["a"])(Jt,Yt,Ht,!1,null,null,null),Zt=Wt.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:600,title:"添加实验室级别",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0}]}],expression:"['title',{rules:[{required:true}]}]"}]})],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},te=[],ee={components:{dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,title:"",form:this.$form.createForm(this,{name:"createlevel"})}},methods:{modalshow:function(){this.visible=!0},handleOk:function(){this.btnloading=!0},handleCancel:function(){this.visible=!1,this.form.resetFields()}}},ae=ee,ne=Object(m["a"])(ae,Xt,te,!1,null,null,null),ie=ne.exports,oe=[{title:"名称",dataIndex:"title"},{title:"操作",dataIndex:"action",width:"120px",scopedSlots:{customRender:"action"}}],le=[{key:"1",title:"级别一"},{key:"2",title:"级别二"}],re={components:{ChangeLevel:Zt,CreateLevel:ie},data:function(){return{data:le,columns:oe}},methods:{handleOk:function(){},handlecreate:function(){this.$refs.createmodal.modalshow()},cancel:function(){},confirm:function(t){this.$refs.table.refresh()},handleModify:function(t){this.$refs.modiftymodal.modalshow(t)}}},se=re,ce=Object(m["a"])(se,Kt,Ut,!1,null,null,null),de=ce.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"SpecialEquipment"},[a("div",{staticClass:"createButton"},[a("a-button",{attrs:{icon:"plus"},on:{click:t.handlecreate}},[t._v("新增")])],1),a("div",{staticClass:"paramscard"},[a("a-table",{attrs:{rowKey:function(t){return t.id},loading:t.tableLoading,columns:t.columns,pagination:{defaultPageSize:10,showTotal:function(t){return"共 "+t+" 条"}},"data-source":t.navList.items},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{staticStyle:{"font-size":"16px"},on:{click:function(e){return t.handleModify(n.id)}}},[t._v("修改")]),a("a-menu-item",{staticStyle:{"font-size":"16px"}},[a("a-popconfirm",{attrs:{title:"确定要删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.confirm(n.id)},cancel:t.cancel}},[t._v("删除")])],1)],1),a("a-button",{attrs:{icon:"bars"}})],1)]],2)}}])}),a("create-specialequipment",{ref:"createmodal",on:{ok:t.handleOk}}),a("change-equipmenttype",{ref:"modiftymodal",on:{ok:t.handleOk}})],1)])},he=[],me=(a("d81d"),a("d3b7"),a("25f0"),a("5530")),fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:900,title:"添加特种设备类型",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"类型名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0}]}],expression:"['name', { rules: [{ required: true }] }]"}]})],1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{md:24,sm:24}},[a("a-card",{staticStyle:{"margin-top":"24px"},attrs:{bordered:!1}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("属性清单")]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{attrs:{icon:"plus"},on:{click:t.handlecreate}},[t._v("新增")])],1),a("a-table",{attrs:{columns:t.columns,"data-source":t.navList,bordered:""},scopedSlots:t._u([t._l(["name","content","type"],(function(e){return{key:e,fn:function(n,i){return[a("div",{key:e},[i.editable?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:n},on:{change:function(a){return t.handleChange(a.target.value,i,e)}}}):[t._v(" "+t._s(n)+" ")]],2)]}}})),{key:"operation",fn:function(e,n){return[a("div",{staticClass:"editable-row-operations"},[n.editable?a("span",[a("a",{on:{click:function(){return t.save(n)}}},[t._v("保存")]),a("a-popconfirm",{attrs:{title:"确定要取消?","ok-text":"是","cancel-text":"否"},on:{confirm:function(){return t.cancel(n)}}},[a("a",{staticStyle:{"margin-left":"20px"}},[t._v("取消")])])],1):a("span",[a("a",{attrs:{disabled:t.editingitem==n},on:{click:function(){return t.edit(n)}}},[t._v("编辑")])]),a("span",{staticStyle:{"padding-left":"10px"}},[a("a-popconfirm",{attrs:{title:"确定要删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.confirm(n)}}},[t._v("删除")])],1)])]}}],null,!0)}),a("create-tips",{ref:"createmodal",on:{oks:t.handleOks}})],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},pe=[],be=(a("c975"),a("a434"),a("b0c0"),a("2909")),ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:600,title:"添加属性标签",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"标签名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0}]}],expression:"['name', { rules: [{ required: true }] }]"}]})],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"类型选择"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:this.type}],expression:"['type', { initialValue: this.type }]"}],on:{change:t.onChange}},[a("a-radio",{attrs:{value:2}},[t._v(" 选择 ")]),a("a-radio",{attrs:{value:1}},[t._v(" 自填 ")])],1)],1)],1),2===this.type?a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"内容"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content"],expression:"['content']"}]})],1)],1):t._e()],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},ve=[],ye={components:{dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,value:"",type:2,queryParam:{SkipCount:0,MaxResultCount:10},navList:{},form:this.$form.createForm(this,{name:"createtips"})}},methods:{modalshow:function(){this.visible=!0},handleCancel:function(){this.visible=!1,this.form.resetFields()},onChange:function(t){this.type=t.target.value},handleOk:function(){var t=this;this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("oks",a)}),1500)})),this.form.resetFields()}}},ke=ye,xe=Object(m["a"])(ke,ge,ve,!1,null,null,null),Ce=xe.exports,_e={1:{type:"1",text:"自填"},2:{type:"2",text:"选择"}},we=[{title:"属性",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"可选值",dataIndex:"content",scopedSlots:{customRender:"content"}},{title:"操作",dataIndex:"operation",width:"120px",scopedSlots:{customRender:"operation"}}],Se=[],Oe=0;Oe<6;Oe++)Se.push({key:Oe.toString(),name:"标签 ".concat(Oe),type:"选择"});for(var Le={components:{CreateTips:Ce,dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,value:1,queryParam:{SkipCount:0,MaxResultCount:10},data:Se,columns:we,tableLoading:!1,editingitem:{},navList:[],propertylist:[],detailinfo:{},cacheData:[],key:0,form:this.$form.createForm(this,{name:"createspcialequipment"})}},filters:{typeFilter:function(t){return _e[t].text}},mounted:function(){},methods:{modalshow:function(){this.visible=!0},handleCancel:function(){this.visible=!1,this.form.resetFields(),this.navList=[]},confirm:function(t){var e=this.navList.indexOf(t);-1!=e&&(this.navList.splice(e,1),this.cacheData=this.navList.map((function(t){return Object(me["a"])({},t)})))},onChange:function(t){},handlecreate:function(){this.$refs.createmodal.modalshow()},handleOks:function(t){this.navList.push({name:t.name,type:t.type,content:t.content}),this.cacheData=this.navList.map((function(t){return Object(me["a"])({},t)}))},handleOk:function(){var t=this;this.confirmLoading=!0,this.btnloading=!0,this.detailinfo.propertys=this.navList,this.form.validateFieldsAndScroll((function(e,a){t.detailinfo.name=a.name,e?(t.btnloading=!1,t.confirmLoading=!1):(Object(c["e"])(t.detailinfo).then((function(t){})).catch((function(t){})),setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok",t.detailinfo),t.navList=[],t.form.resetFields()}),1500))}))},handleChange:function(t,e,a){var n=Object(be["a"])(this.navList),i=n.indexOf(e),o=n[i];o&&(o[a]=t,this.navList=n)},edit:function(t){var e=Object(be["a"])(this.navList),a=e.indexOf(t),n=e[a];this.editingitem=t,n&&(n.editable=!0,this.navList=e)},save:function(t){var e=Object(be["a"])(this.navList),a=Object(be["a"])(this.cacheData),n=e.indexOf(t),i=e[n],o=a[n];i&&o&&(delete i.editable,this.navList=e,Object.assign(o,i),this.cacheData=a),this.editingitem=""},cancel:function(t){var e=Object(be["a"])(this.navList),a=e.indexOf(t),n=e[a];this.editingitem="",n&&(Object.assign(n,this.cacheData[a]),delete n.editable,this.navList=e)}}},Ie=Le,De=Object(m["a"])(Ie,fe,pe,!1,null,null,null),$e=De.exports,je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:1e3,title:"修改特种设备类型",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},label:"类型名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:t.detailinfo.name,rules:[{required:!0}]}],expression:"['name', { initialValue: detailinfo.name, rules: [{ required: true }] }]"}]})],1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{md:24,sm:24}},[a("a-card",{staticStyle:{"margin-top":"24px"},attrs:{bordered:!1}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("属性清单")]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{attrs:{icon:"plus"},on:{click:t.handlecreate}},[t._v("新增")])],1),a("a-table",{attrs:{columns:t.columns,"data-source":t.navList,bordered:""},scopedSlots:t._u([t._l(["name","content"],(function(e){return{key:e,fn:function(n,i){return[a("div",{key:e},[i.editable?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:n},on:{change:function(a){return t.handleChange(a.target.value,i,e)}}}):[t._v(" "+t._s(n)+" ")]],2)]}}})),{key:"operation",fn:function(e,n){return[a("div",{staticClass:"editable-row-operations"},[n.editable?a("span",[a("a",{on:{click:function(){return t.save(n)}}},[t._v("保存")]),a("a-popconfirm",{attrs:{title:"确定要取消?","ok-text":"是","cancel-text":"否"},on:{confirm:function(){return t.cancel(n)}}},[a("a",{staticStyle:{"margin-left":"20px"}},[t._v("取消")])])],1):a("span",[a("a",{attrs:{disabled:t.editingitem==n},on:{click:function(){return t.edit(n)}}},[t._v("编辑")])]),a("span",{staticStyle:{"padding-left":"10px"}},[a("a-popconfirm",{attrs:{disabled:t.editingitem==n,title:"确定要删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.confirm(n)}}},[t._v("删除")])],1)])]}}],null,!0)}),a("create-tips",{ref:"createmodal",on:{oks:t.handleOks}})],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},Pe=[],qe=a("ade3"),Re=[{title:"属性",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"可选值",dataIndex:"content",scopedSlots:{customRender:"content"}},{title:"操作",dataIndex:"operation",width:"150px",scopedSlots:{customRender:"operation"}}],Te={components:{CreateTips:Ce,dragModal:d["a"]},data:function(){var t;return t={visible:!1,confirmLoading:!1,btnloading:!1,value:1,queryParam:{SkipCount:0,MaxResultCount:99},columns:Re,tableLoading:!1,editingitem:{},navList:[],propertylist:[],detailinfo:{}},Object(qe["a"])(t,"propertylist",{}),Object(qe["a"])(t,"cacheData",[]),Object(qe["a"])(t,"propertyid",""),Object(qe["a"])(t,"form",this.$form.createForm(this,{name:"createspcialequipment"})),t},mounted:function(){},methods:{modalshow:function(t){this.propertyid=t,this.propertylist.id=t,this.getbyid(),this.visible=!0},handleCancel:function(){this.visible=!1,this.form.resetFields(),this.navList=[]},confirm:function(t){var e=this.navList.indexOf(t);-1!=e&&(this.navList.splice(e,1),this.cacheData=this.navList.map((function(t){return Object(me["a"])({},t)})))},onChange:function(t){},handlecreate:function(){this.$refs.createmodal.modalshow()},handleOks:function(t){this.navList.push({name:t.name,type:t.type,content:t.content}),this.cacheData=this.navList.map((function(t){return Object(me["a"])({},t)}))},handleOk:function(){var t=this;this.confirmLoading=!0,this.btnloading=!0,this.propertylist.propertys=this.navList,this.form.validateFieldsAndScroll((function(e,a){t.propertylist.name=a.name,e?(t.btnloading=!1,t.confirmLoading=!1):(Object(c["j"])(t.propertylist,t.propertylist.id).then((function(t){})).catch((function(t){})),setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok",t.propertylist),t.navList=[],t.form.resetFields()}),1500))}))},getbyid:function(){var t=this;Object(c["u"])(this.propertyid).then((function(e){t.detailinfo=e;for(var a=0;a<e.propertys.length;a++)t.navList.push({name:e.propertys[a].name,type:e.propertys[a].type,content:e.propertys[a].content})}))},handleChange:function(t,e,a){var n=Object(be["a"])(this.navList),i=n.indexOf(e),o=n[i];o&&(o[a]=t,this.navList=n)},edit:function(t){var e=Object(be["a"])(this.navList),a=e.indexOf(t),n=e[a];this.editingitem=n,n&&(n.editable=!0,this.navList=e)},save:function(t){var e=Object(be["a"])(this.navList),a=Object(be["a"])(this.navList),n=e.indexOf(t),i=e[n],o=a[n];i&&o&&(delete i.editable,this.navList=e,Object.assign(o,i),this.cacheData=a),this.editingitem=""},cancel:function(t){var e=Object(be["a"])(this.navList),a=e.indexOf(t),n=e[a];this.editingitem="",n&&(Object.assign(n,this.cacheData[a]),delete n.editable,this.navList=e)}}},Ee=Te,Me=Object(m["a"])(Ee,je,Pe,!1,null,null,null),Ge=Me.exports,Ae=[{title:"类型名称",dataIndex:"name"},{title:"操作",dataIndex:"action",width:"120px",scopedSlots:{customRender:"action"}}],Ne=[],Be=0;Be<6;Be++)Ne.push({key:Be.toString(),name:"类型 ".concat(Be)});var Fe={components:{CreateSpecialequipment:$e,ChangeEquipmenttype:Ge},data:function(){return this.cacheData=Ne.map((function(t){return Object(me["a"])({},t)})),{data:Ne,columns:Ae,tableLoading:!1,queryParam:{SkipCount:0,MaxResultCount:10},navList:{},propertylist:[]}},mounted:function(){this.getspecialequipmenttype()},methods:{handleOk:function(t){this.getspecialequipmenttype()},cancel:function(){this.form.resetFields()},handlecreate:function(){this.$refs.createmodal.modalshow()},handleModify:function(t){this.$refs.modiftymodal.modalshow(t)},confirm:function(t){Object(c["o"])(t),this.getspecialequipmenttype()},getspecialequipmenttype:function(){var t=this;Object(c["t"])(this.queryParam).then((function(e){t.navList=e}))}}},ze=Fe,Ve=(a("de5d"),Object(m["a"])(ze,ue,he,!1,null,null,null)),Ke=Ve.exports,Ue={components:{LaboratoryQualification:O,DangerList:tt,ProtectiveMeasures:St,ExtinguishingList:Vt,LaboratoryLevel:de,SpecialEquipmenttype:Ke}},Ye=Ue,He=Object(m["a"])(Ye,n,i,!1,null,null,null);e["default"]=He.exports},"1d87":function(t,e,a){"use strict";var n=a("92fa"),i=a.n(n),o=a("6042"),l=a.n(o),r=a("4d91"),s=a("daa3"),c=a("4df5"),d=r["a"].oneOfType([r["a"].number,r["a"].oneOf(["small","middle","large"])]),u={small:8,middle:16,large:24},h={prefixCls:r["a"].string,size:d,direction:r["a"].oneOf(["horizontal","vertical"]),align:r["a"].oneOf(["start","end","center","baseline"])},m={functional:!0,name:"ASpace",props:Object(s["t"])(h,{size:"small",direction:"horizontal"}),inject:{configProvider:{default:function(){return c["a"]}}},render:function(t,e){var a,n=e.prefixCls,o=e.injections.configProvider,r=e.children,c=e.props,d=c.align,h=c.size,m=c.direction,f=o.getPrefixCls,p=f("space",n),b=Object(s["c"])(r),g=b.length;if(0===g)return null;var v=void 0===d&&"horizontal"===m?"center":d,y=[(a={},l()(a,p,!0),l()(a,p+"-"+m,!0),l()(a,p+"-align-"+v,v),a)];e.data["class"]&&y.push(e.data["class"]);var k=p+"-item",x="marginRight";return t("div",i()([e.data,{class:y}]),[b.map((function(e,a){return t("div",{class:k,key:k+"-"+a,style:a===g-1?{}:l()({},"vertical"===m?"marginBottom":x,"string"===typeof h?u[h]+"px":h+"px")},[e])}))])},install:function(t){t.component(m.name,m)}};e["a"]=m},"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("d3b7"),a("e6cf");function n(t,e,a,n,i,o,l){try{var r=t[o](l),s=r.value}catch(c){return void a(c)}r.done?e(s):Promise.resolve(s).then(n,i)}function i(t){return function(){var e=this,a=arguments;return new Promise((function(i,o){var l=t.apply(e,a);function r(t){n(l,i,o,r,s,"next",t)}function s(t){n(l,i,o,r,s,"throw",t)}r(void 0)}))}}},"1ea2":function(t,e,a){"use strict";var n=a("f307"),i=a.n(n);i.a},"1fc9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"active_list"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"headtitle"},[t._v("自查活动")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{directives:[{name:"action",rawName:"v-action:SchoolAdministratory",arg:"SchoolAdministratory"}],attrs:{type:"primary",icon:"plus"},on:{click:t.onCreateClick}},[t._v("发起自查活动")])],1),a("s-table",{ref:"table",attrs:{customRow:t.rowClick,columns:t.columns,data:t.loaddata,rowKey:"id"},scopedSlots:t._u([{key:"progress",fn:function(e,n){return[a("span",[t._v(t._s(n.completeNum)+"/"+t._s(n.collegeNum))])]}},{key:"status",fn:function(e,n){return[0==e?a("a-tag",{attrs:{color:"gray"}},[t._v("未开始")]):1==e?a("a-tag",{attrs:{color:"red"}},[t._v("自查中")]):2==e?a("a-tag",{attrs:{color:"orange"}},[t._v("院系自查负责人审核")]):3==e?a("a-tag",{attrs:{color:"blue"}},[t._v("校管理员审核")]):a("a-tag",{attrs:{color:"green"}},[t._v("已审核")])]}},{key:"action",fn:function(e,n){return[a("a-button",{directives:[{name:"action",rawName:"v-action:SchoolAdministratory",arg:"SchoolAdministratory"}],attrs:{title:"编辑",icon:"edit"},on:{click:function(e){return t.editDetail(n)}}}),t._v(" "),a("a-button",{attrs:{icon:"file-search",title:"详情"},on:{click:function(e){return t.handleDetail(n)}}}),t._v(" "),a("a-popconfirm",{directives:[{name:"action",rawName:"v-action:SchoolAdministratory",arg:"SchoolAdministratory"}],attrs:{title:"确认删除活动？","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.handleDelete(n.id)},cancel:t.handleCancel}},[a("a-button",{attrs:{icon:"delete",type:"danger",title:"删除"}})],1)]}}])}),a("create-active",{ref:"modal",on:{ok:t.handleOk}})],1)},i=[],o=(a("c975"),a("b0c0"),a("2af9")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:700,title:this.detailData&&this.detailData.id?"修改自查活动":"发布自查活动",visible:t.visible,destroyOnClose:""},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"活动名称",prop:"name"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("a-form-model-item",{attrs:{label:"活动时限",prop:"range_time"}},[a("a-range-picker",{attrs:{format:t.dateFormat},model:{value:t.form.range_time,callback:function(e){t.$set(t.form,"range_time",e)},expression:"form.range_time"}})],1),a("a-form-model-item",{staticClass:"a-form-model-bottom",attrs:{"wrapper-col":{span:24}}},[a("a-row",[a("a-col",{attrs:{span:6}}),a("a-col",{attrs:{span:14}},[a("a-checkbox",{attrs:{indeterminate:t.indeterminate,checked:t.checkAll},on:{change:t.onCheckAllChange}},[t._v(" 全选 ")])],1)],1)],1),a("a-form-model-item",{attrs:{label:"选择学院",prop:"checkedList"}},[a("a-checkbox-group",{on:{change:t.onChange},model:{value:t.form.checkedList,callback:function(e){t.$set(t.form,"checkedList",e)},expression:"form.checkedList"}},[a("a-row",{attrs:{type:"flex",justify:"start"}},t._l(t.collegeList,(function(e,n){return a("a-col",{key:n,attrs:{span:12}},[a("a-checkbox",{key:e.code,attrs:{value:e.guid}},[t._v(" "+t._s(e.name)+" ")])],1)})),1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},r=[],s=(a("4160"),a("159b"),a("96cf"),a("1da1")),c=a("788a"),d=a("6a7e"),u=a("c1df"),h=a.n(u),m={name:"",startTime:"",endTime:"",range_time:[],checkedList:[]},f={data:function(){return{visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},form:this.clone(m),dateFormat:"YYYY-MM-DD",indeterminate:!1,checkAll:!1,collegeList:[],plainOptions:[],queryParam:{SkipCount:0,MaxResultCount:100,Key:""},detailData:{},rules:{name:[{required:!0,message:"请填写名称！",trigger:"blur"}],range_time:[{type:"array",required:!0,message:"请选择活动时限!",trigger:"change"}],checkedList:[{type:"array",required:!0,message:"请选择学院!",trigger:"change"}]}}},components:{DragModal:o["c"]},methods:{moment:h.a,clone:function(t){var e=JSON.parse(JSON.stringify(t));return e},modalShow:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getCollegeList();case 2:if(!t){a.next=9;break}return a.next=5,e.getActiveDetail(t);case 5:e.onChange(e.detailData.collegeGuidList),e.form={name:e.detailData.name,startTime:e.detailData.startTime,endTime:e.detailData.endTime,range_time:[e.detailData.startTime?h()(e.detailData.startTime.substr(0,10),"YYYY-MM-DD"):null,e.detailData.endTime?h()(e.detailData.endTime.substr(0,10),"YYYY-MM-DD"):null],checkedList:e.detailData.collegeGuidList},a.next=11;break;case 9:e.form=e.clone(m),e.onCheckAllChange({target:{checked:!0}});case 11:e.visible=!0;case 12:case"end":return a.stop()}}),a)})))()},getActiveDetail:function(t){var e=this;return Object(d["A"])(t).then((function(t){e.detailData=t}))},getCollegeList:function(){var t=this;return Object(c["z"])(this.queryParam).then((function(e){t.collegeList=e.items}))},optionsCode:function(){var t=[];this.collegeList&&this.collegeList.length>0&&(this.collegeList.forEach((function(e){t.push(e.guid)})),this.plainOptions=t)},onChange:function(t){this.optionsCode(),this.indeterminate=!!t.length&&t.length<this.plainOptions.length,this.checkAll=t.length===this.plainOptions.length},onCheckAllChange:function(t){this.optionsCode(),this.form.checkedList=t.target.checked?this.plainOptions:[],t.target.checked,Object.assign(this,{indeterminate:!1,checkAll:t.target.checked})},handleOk:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return!1;var a={};a.name=t.form.name,a.startTime=h()(t.form.range_time[0]).format("YYYY-MM-DD")+" 00:00:00",a.endTime=h()(t.form.range_time[1]).format("YYYY-MM-DD")+" 00:00:00";var n=[];t.form&&t.form.checkedList?(t.form.checkedList.forEach((function(t){n.push({guid:t,checked:!0})})),a.selectCollegeInfos=n):t.$message.warning("请选择学院"),t.detailData&&t.detailData.id?(a.id=t.detailData?t.detailData.id:"",a.bookId=t.detailData?t.detailData.bookId:"",Object(d["Z"])(a).then((function(e){t.clearModal()})).catch((function(e){t.btnloading=!1}))):Object(d["W"])(a).then((function(e){t.clearModal()})).catch((function(e){t.btnloading=!1}))}))},clearModal:function(){this.btnloading=!1,this.detailData&&this.detailData.id?this.$message.success("编辑成功"):this.$message.success("添加成功"),this.$emit("ok"),this.detailData=this.clone(m),this.visible=!1,this.$refs.ruleForm.resetFields()},handleCancel:function(){this.detailData=this.clone(m),this.visible=!1,this.$refs.ruleForm.resetFields()}}},p=f,b=(a("d274"),a("2877")),g=Object(b["a"])(p,l,r,!1,null,null,null),v=g.exports,y=[{title:"活动名称",dataIndex:"name"},{title:"自查活动时限",dataIndex:"time",scopedSlots:{customRender:"time"}},{title:"操作",dataIndex:"action",width:200,scopedSlots:{customRender:"action"}}],k={components:{STable:o["h"],CreateActive:v},data:function(){var t=this;return{columns:y,isSchoolAdmin:!1,queryParam:{Key:"",SkipCount:0,MaxResultCount:10},loaddata:function(e){return t.queryParam.SkipCount=(e.pageNo-1)*e.pageSize,t.queryParam.MaxResultCount=e.pageSize,Object(d["z"])(t.queryParam).then((function(t){var a={};return a={data:t.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:t.totalCount},a}))}}},mounted:function(){var t=this.$store.getters.userInfo.role;-1!=t.indexOf("SchoolAdministratory")?(this.isSchoolAdmin=!0,this.columns=[{title:"活动名称",dataIndex:"name"},{title:"自查活动时限",dataIndex:"time",scopedSlots:{customRender:"time"}},{title:"完成度",dataIndex:"progress",scopedSlots:{customRender:"progress"}},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}]):this.columns=[{title:"活动名称",dataIndex:"name"},{title:"自查活动时限",dataIndex:"time",scopedSlots:{customRender:"time"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}]},methods:{rowClick:function(t,e){var a=this;return{on:{dblclick:function(){a.isSchoolAdmin?a.$router.push({name:"activedetail",query:{id:t.id}}):a.$router.push({name:"selfprocess",query:{id:t.id,name:t.name}})}}}},handleDetail:function(t){this.isSchoolAdmin?this.$router.push({name:"activedetail",query:{id:t.id}}):this.$router.push({name:"selfprocess",query:{id:t.id,name:t.name}})},handleDelete:function(t){var e=this;Object(d["i"])(t).then((function(t){e.$refs.table.refresh()}))},handleCancel:function(){},onCreateClick:function(){this.$refs.modal.modalShow()},editDetail:function(t){this.$refs.modal.modalShow(t.id)},handleOk:function(){this.$refs.table.refresh(!0)}}},x=k,C=(a("0ec5"),Object(b["a"])(x,n,i,!1,null,null,null));e["default"]=C.exports},"217f":function(t,e,a){},2466:function(t,e,a){"use strict";var n=a("4505"),i=a.n(n);i.a},2641:function(t,e,a){"use strict";var n=a("cc5f"),i=a.n(n);i.a},2854:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"open_plan"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"headtitle"},[t._v("开放统计")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[t.isSchoolAdmin?a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.onAddClick}},[t._v("新建开放计划统计表")]):t._e()],1),a("s-table",{ref:"table",staticClass:"actioncol",attrs:{columns:t.columns,data:t.loaddata,rowKey:"id"},scopedSlots:t._u([{key:"statusId",fn:function(e){return[0==e?a("a-badge",{attrs:{color:"yellow",text:"发起"}}):1==e?a("a-badge",{attrs:{color:"green",text:"审核完成"}}):t._e()]}},{key:"collegeLoginStatusId",fn:function(e){return[0==e?a("a-tag",{attrs:{color:"gray"}},[t._v("未提交")]):1==e?a("a-tag",{attrs:{color:"blue"}},[t._v("审核中")]):2==e?a("a-tag",{attrs:{color:"green"}},[t._v("审核通过")]):t._e(),3==e?a("a-tag",{attrs:{color:"red"}},[t._v("审核失败")]):t._e()]}},{key:"process",fn:function(e,n){return[a("span",[t._v(t._s(n.complete)+"/"+t._s(n.departmentPlanNumber))])]}},{key:"action",fn:function(e,n){return[t.isSchoolAdmin?a("a",{on:{click:function(e){return t.setField(n.id)}}},[t._v("自定义字段")]):t._e(),t.isSchoolAdmin?a("a",{on:{click:function(e){return t.onDetail(n.id)}}},[t._v("详情")]):t._e(),t.isCollegeAdmin?a("a",{on:{click:function(e){return t.onDetail2(n.id)}}},[t._v("编辑")]):t._e(),t.isSchoolAdmin?a("a",{on:{click:function(e){return t.onEditClick(n)}}},[t._v("编辑")]):t._e(),t.isSchoolAdmin?a("a-popconfirm",{attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.handledelete(n)}}},[a("a",[t._v("删除")])]):t._e()]}}])}),a("create-open-plan",{ref:"createModal",on:{ok:t.handleOk}}),a("set-field",{ref:"setModel",on:{ok:t.handleOk}})],1)},i=[],o=(a("c975"),a("2af9")),l=a("6a7e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:700,title:this.detailData&&this.detailData.id?"修改实验室开放计划":"新建实验室开放计划",visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"活动名称",prop:"name"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("a-form-model-item",{attrs:{label:"活动时限",prop:"range_time"}},[a("a-range-picker",{attrs:{format:t.dateFormat},model:{value:t.form.range_time,callback:function(e){t.$set(t.form,"range_time",e)},expression:"form.range_time"}})],1),a("a-form-model-item",{staticClass:"a-form-model-bottom",attrs:{"wrapper-col":{span:24}}},[a("a-row",[a("a-col",{attrs:{span:6}}),a("a-col",{attrs:{span:14}},[a("a-checkbox",{attrs:{indeterminate:t.indeterminate,checked:t.checkAll},on:{change:t.onCheckAllChange}},[t._v(" 全选 ")])],1)],1)],1),a("a-form-model-item",{attrs:{label:"选择学院",prop:"checkedList"}},[a("a-checkbox-group",{on:{change:t.onChange},model:{value:t.form.checkedList,callback:function(e){t.$set(t.form,"checkedList",e)},expression:"form.checkedList"}},[a("a-row",{attrs:{type:"flex",justify:"start"}},t._l(t.collegeList,(function(e,n){return a("a-col",{key:n,attrs:{span:12}},[a("a-checkbox",{key:e.code,attrs:{value:e.guid}},[t._v(" "+t._s(e.name)+" ")])],1)})),1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},s=[],c=(a("4160"),a("b0c0"),a("159b"),a("96cf"),a("1da1")),d=a("788a"),u=a("c1df"),h=a.n(u),m={id:"",name:"",startTime:"",endTime:"",range_time:[],checkedList:[]},f={components:{DragModal:o["c"]},data:function(){return{visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},form:this.clone(m),dateFormat:"YYYY-MM-DD",indeterminate:!1,checkAll:!1,collegeList:[],plainOptions:[],queryParam:{SkipCount:0,MaxResultCount:100,Key:""},detailData:{},rules:{name:[{required:!0,message:"请填写名称！",trigger:"blur"}],range_time:[{type:"array",required:!0,message:"请选择活动时限!",trigger:"change"}],checkedList:[{type:"array",required:!0,message:"请选择学院!",trigger:"change"}]}}},methods:{moment:h.a,clone:function(t){var e=JSON.parse(JSON.stringify(t));return e},modalShow:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getCollegeList();case 2:e.detailData=t,t&&t.id?(e.onChange(t.collegeGuidList),e.form={name:t.name,startTime:t.beginTime,endTime:t.endTime,range_time:[t.beginTime?h()(t.beginTime.substr(0,10),"YYYY-MM-DD"):null,t.endTime?h()(t.endTime.substr(0,10),"YYYY-MM-DD"):null],checkedList:t.collegeGuidList}):(e.form=e.clone(m),e.checkAll=!1,e.indeterminate=!1),e.visible=!0;case 5:case"end":return a.stop()}}),a)})))()},getCollegeList:function(){var t=this;return Object(d["z"])(this.queryParam).then((function(e){t.collegeList=e.items}))},optionsCode:function(){var t=[];this.collegeList&&this.collegeList.length>0&&(this.collegeList.forEach((function(e){t.push(e.guid)})),this.plainOptions=t)},onChange:function(t){this.optionsCode(),this.indeterminate=!!t.length&&t.length<this.plainOptions.length,this.checkAll=t.length===this.plainOptions.length},onCheckAllChange:function(t){this.optionsCode(),this.form.checkedList=t.target.checked?this.plainOptions:[],t.target.checked&&this.$refs.ruleForm.clearValidate("checkedList"),Object.assign(this,{indeterminate:!1,checkAll:t.target.checked})},handleOk:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return!1;var a={};a.name=t.form.name,a.beginTime=h()(t.form.range_time[0]).format("YYYY-MM-DD")+" 00:00:00",a.endTime=h()(t.form.range_time[1]).format("YYYY-MM-DD")+" 00:00:00";var n=[];t.form&&t.form.checkedList?(t.form.checkedList.forEach((function(t){n.push({guid:t,checked:!0})})),a.selectCollegeInfos=n):t.$message.warning("请选择学院"),t.detailData&&t.detailData.id?(a.id=t.detailData.id,Object(l["db"])(a).then((function(e){t.clearModal()})).catch((function(e){t.btnloading=!1}))):Object(l["g"])(a).then((function(e){t.clearModal()})).catch((function(e){t.btnloading=!1}))}))},clearModal:function(){this.btnloading=!1,this.detailData&&this.detailData.id?this.$message.success("编辑成功"):this.$message.success("添加成功"),this.$emit("ok"),this.form=this.clone(m),this.visible=!1,this.$refs.ruleForm.resetFields()},handleCancel:function(){this.form=this.clone(m),this.visible=!1,this.$refs.ruleForm.resetFields()}}},p=f,b=(a("31e5"),a("2877")),g=Object(b["a"])(p,r,s,!1,null,null,null),v=g.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:800,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("p",{staticStyle:{"margin-top":"5px","font-weight":"600","font-size":"16px"}},[t._v("表格预览(点击表头可编辑):")]),a("a-table",{attrs:{"data-source":t.defaultslist,pagination:!1,bordered:""}},t._l(t.fields,(function(e,n){return a("a-table-column",{key:n},[a("a-popconfirm",{attrs:{slot:"title",title:"选择操作","ok-text":"删除","cancel-text":"编辑"},on:{confirm:function(a){return t.deleteField(e.id)},cancel:function(a){return t.handleModify(e)}},slot:"title"},[a("a",[t._v(t._s(e.label))])])],1)})),1),a("a-card",[a("a-form-model",{ref:"modelform",attrs:{layout:"inline",model:t.form,rules:t.rules}},[a("a-form-model-item",{attrs:{label:"字段名",prop:"label"}},[a("a-input",{model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}})],1),a("a-form-model-item",{attrs:{label:"显示索引",prop:"displayIndex"}},[a("a-input-number",{attrs:{min:0},model:{value:t.form.displayIndex,callback:function(e){t.$set(t.form,"displayIndex",e)},expression:"form.displayIndex"}})],1),a("a-form-model-item",[a("a-button",{attrs:{type:"primary",loading:t.btnloading},on:{click:t.addField}},[t._v("新增")])],1)],1)],1),a("edit-field",{ref:"edit",on:{ok:t.handlefrash}}),a("template",{slot:"footer"},[a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOks}},[t._v("确认")])],1)],2)},k=[],x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:600,title:"修改自定义字段",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{staticStyle:{display:"none"},attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"planId"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["planId",{initialValue:t.detailinfo.planId}],expression:"['planId', { initialValue: detailinfo.planId }]"}]})],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"字段"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["label",{initialValue:t.detailinfo.label}],expression:"['label', { initialValue: detailinfo.label }]"}]})],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:7},label:"索引"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["displayIndex",{initialValue:t.detailinfo.displayIndex}],expression:"['displayIndex', { initialValue: detailinfo.displayIndex }]"}],attrs:{min:0,max:9999,"default-value":0}})],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},C=[],_={components:{DragModal:o["c"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,detailinfo:{planId:"",label:"",displayIndex:0},form:this.$form.createForm(this,{name:"changelabtype"})}},methods:{modalshow:function(t){this.visible=!0,this.detailinfo=t},handleCancel:function(){this.visible=!1},handleOk:function(){var t=this;this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){e?t.btnloading=!1:(Object(l["e"])(a,t.detailinfo.id).then((function(e){t.$emit("ok")})).catch((function(t){})),setTimeout((function(){t.btnloading=!1,t.visible=!1})))})),this.form.resetFields()}}},w=_,S=(a("ec86"),Object(b["a"])(w,x,C,!1,null,"490a3619",null)),O=S.exports,L=[{title:"字段",dataIndex:"label",scopedSlots:{customRender:"label"}},{title:"显示索引",dataIndex:"displayIndex",scopedSlots:{customRender:"displayIndex"}},{title:"操作",width:"100px",dataIndex:"action",scopedSlots:{customRender:"action"}}],I={components:{STable:o["h"],EditField:O,DragModal:o["c"]},data:function(){return{columns:L,title:"设置自定义字段",visible:!1,btnloading:!1,fields:[],defaultslist:[],form:{label:"",displayIndex:0},rules:{label:[{required:!0,message:"请填写字段名称"}]},queryParam:{PlanId:"",SkipCount:0,MaxResultCount:99},confirmLoading:!1}},methods:{init:function(t){var e=this;this.queryParam.PlanId=t,Object(l["N"])(this.queryParam).then((function(t){e.fields=t.items}))},modalshow:function(t){this.visible=!0,this.form.planId=t,this.init(t)},addField:function(){var t=this;this.btnloading=!0,this.$refs.modelform.validate((function(e){if(!e)return t.btnloading=!1,!1;Object(l["kb"])(t.form).then((function(e){t.btnloading=!1,t.init(t.form.planId),t.form.label="",t.form.displayIndex=0})).catch((function(e){t.btnloading=!1}))}))},handleModify:function(t){this.$refs.edit.modalshow(t)},deleteField:function(t){var e=this;Object(l["n"])(t).then((function(t){e.init(e.form.planId)}))},handlefrash:function(){this.init(this.form.planId)},handleOk:function(){var t=this;this.form={label:"",displayIndex:0},Object(l["N"])(this.queryParam).then((function(e){t.fields=e.items})),this.$refs.modelform.resetFields(),this.fields=[]},handleOks:function(){this.visible=!1},handleCancel:function(){this.form={label:"",displayIndex:0},this.fields=[],this.$refs.modelform.resetFields(),this.visible=!1},rowHeaderClick:function(t,e){return{on:{click:function(){}}}}}},D=I,$=Object(b["a"])(D,y,k,!1,null,null,null),j=$.exports,P=[{title:"计划名称",dataIndex:"name"},{title:"状态",dataIndex:"statusId",scopedSlots:{customRender:"statusId"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],q={components:{STable:o["h"],CreateOpenPlan:v,SetField:j},data:function(){var t=this;return{columns:P,isCollegeAdmin:!1,isSchoolAdmin:!1,queryParam:{Key:"",SkipCount:0,MaxResultCount:10},loaddata:function(e){return t.queryParam.SkipCount=(e.pageNo-1)*e.pageSize,t.queryParam.MaxResultCount=e.pageSize,Object(l["Q"])(t.queryParam).then((function(t){var a={};return a={data:t.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:t.totalCount},a}))}}},mounted:function(){var t=this.$store.getters.userInfo.role;-1==t.indexOf("HazardouChemicalContactPerson")&&-1==t.indexOf("CollegeLabCenterDirector")&&-1==t.indexOf("CollegeAdministratory")&&-1==t.indexOf("CollegeLeadership")&&-1==t.indexOf("CollegeSafetyAdministratory")||(this.isCollegeAdmin=!0,this.columns=[{title:"计划名称",dataIndex:"name"},{title:"状态",dataIndex:"collegeLoginStatusId",scopedSlots:{customRender:"collegeLoginStatusId"}},{title:"操作",dataIndex:"action",width:"100px",scopedSlots:{customRender:"action"}}]),-1!=t.indexOf("SchoolAdministratory")&&(this.isSchoolAdmin=!0,this.columns=[{title:"计划名称",dataIndex:"name"},{title:"状态",dataIndex:"statusId",scopedSlots:{customRender:"statusId"}},{title:"完成度",dataIndex:"process",scopedSlots:{customRender:"process"}},{title:"操作",dataIndex:"action",width:"210px",scopedSlots:{customRender:"action"}}])},methods:{onAddClick:function(){this.$refs.createModal.modalShow()},onEditClick:function(t){this.$refs.createModal.modalShow(t)},handleOk:function(){this.$refs.table.refresh(!0)},setField:function(t){this.$refs.setModel.modalshow(t)},onDetail:function(t){this.$router.push({name:"plandetail",query:{planId:t}})},onDetail2:function(t){this.$router.push({name:"cplandetail",query:{planId:t}})},handledelete:function(t){var e=this;Object(l["m"])(t).then((function(t){e.$refs.table.refresh()}))}}},R=q,T=(a("2d23"),Object(b["a"])(R,n,i,!1,null,null,null));e["default"]=T.exports},"297c":function(t,e,a){"use strict";var n=a("c310"),i=a.n(n);i.a},2980:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"safety-dashboard"},[n("a-row",{attrs:{gutter:18}},[n("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[n("chart-card",{attrs:{title:"实验分室数量",total:e.topData.schoolLabBranchCount}},[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("div",[n("span",{staticStyle:{color:"green","padding-right":"10px"}},[e._v("启用")]),e._v(" "+e._s(e.topData.schoolEnableLabBranchCount)+" ")]),n("div",[n("span",{staticStyle:{color:"green","padding-right":"10px"}},[e._v("未启用")]),e._v(" "+e._s(e.topData.schoolLabBranchCount-e.topData.schoolEnableLabBranchCount)+" ")])]),n("template",{slot:"footer"},[e._v("一级危险源数量"),n("span",{staticStyle:{"padding-left":"10px"}},[e._v(e._s(e.topData.schoolLevelOneRiskBranchCount))])])],2)],1),n("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[n("chart-card",{ref:"lineChart",attrs:{title:"隐患总数",total:e.topData.schoolYearHiddenDangerCount}},[n("div",{staticStyle:{width:"110%",height:"170%",top:"70px",left:"-8px"},attrs:{id:"miniArea"}}),n("template",{slot:"footer"},[e._v("今年隐患数量"),n("span",{staticStyle:{"padding-left":"10px"}},[e._v(e._s(e.topData.schoolYearHiddenDangerCount))])])],2)],1),n("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[n("chart-card",{attrs:{title:"院部隐患数量",total:e.getDangeCount()}},[n("div",{staticStyle:{width:"110%",height:"170%",top:"70px",left:"-8px"},attrs:{id:"miniBar"}}),n("template",{slot:"footer"},[e._v(" 已整改数量 "),n("span",{staticStyle:{"padding-left":"10px"}},[e._v(" "+e._s(e.getChangeCount())+" ")])])],2)],1),n("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[n("chart-card",{attrs:{title:"整改情况",total:e.topData.schoolSolveSecurityRiskCount}},[n("div",[n("mini-progress",{attrs:{color:"rgb(19, 194, 194)",target:e.topData.growth>0?e.topData.growth/100:0,percentage:e.topData.growth>0?e.topData.growth/100:0,height:"8px"}})],1),n("template",{slot:"footer"},[e.topData.growth>0?n("trend",{attrs:{flag:"up"}},[n("span",{attrs:{slot:"term"},slot:"term"},[e._v("年度隐患同比增长")]),e._v(" "+e._s(e.topData.growth/100+"%")+" ")]):n("trend",{attrs:{flag:"down"}},[n("span",{attrs:{slot:"term"},slot:"term"},[e._v("年度隐患同比下降")]),e._v(" "+e._s(-e.topData.growth/100+"%")+" ")])],1)],2)],1)],1),n("a-row",{attrs:{gutter:20,type:"flex"}},[n("a-col",{attrs:{span:18}},[n("a-card",{staticStyle:{border:"none",position:"relative",height:"100%"}},[n("a-tabs",{attrs:{"default-active-key":"1"},on:{change:e.callback}},[1==e.tabKey?n("div",{staticClass:"extra-wrapper",attrs:{slot:"tabBarExtraContent"},slot:"tabBarExtraContent"},[n("div",{staticStyle:{"margin-left":"50px"}},[n("a",{class:1==e.queryParm.TimeType?"selecteda":"",staticStyle:{"margin-right":"10px"},on:{click:function(){e.queryParm.TimeType=1,t.getHistogram()}}},[e._v("年 ")]),n("a",{class:2==e.queryParm.TimeType?"selecteda":"",staticStyle:{"margin-right":"10px"},on:{click:function(){e.queryParm.TimeType=2,t.getHistogram()}}},[e._v("月 ")]),n("a-month-picker",{on:{change:e.onChange}})],1)]):e._e(),n("a-tab-pane",{key:"1",attrs:{tab:"巡查隐患",forceRender:!0}},[n("div",{staticStyle:{width:"112%","min-height":"350px",margin:"-20px 0px 0px -45px"},attrs:{id:"barChart"}})]),n("a-tab-pane",{key:"2",attrs:{tab:"整改图表",forceRender:!0}},[n("div",{staticStyle:{width:"112%",height:"350px",margin:"-20px 0px 0px -45px"},attrs:{id:"solveChart"}})])],1)],1)],1),n("a-col",{attrs:{span:6}},[n("a-card",{staticStyle:{border:"none",height:"100%"}},[n("span",{attrs:{slot:"title"},slot:"title"},[n("span",[e._v("隐患排行")])]),n("div",[n("rank-list",{attrs:{list:e.dangerRank}})],1)])],1)],1),n("a-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20,type:"flex"}},[n("a-col",{attrs:{span:18}},[n("a-card",{staticClass:"todo",attrs:{bordered:!1}},[n("div",{staticStyle:{display:"flex"},attrs:{slot:"title"},slot:"title"},[n("span",{staticStyle:{"margin-right":"5px"}},[e._v("待办事项")]),n("a-badge",{attrs:{"number-style":{minWidth:"14px",height:"14px",lineHeight:"14px"},count:e.todoTotalCount}})],1),null!=e.todolist.adminSelfCheckTodoList&&0!=e.countlist.adminCheckCount?n("div",[n("p",{staticClass:"tabletitle"},[e._v("校级自查活动（"+e._s(e.countlist.adminCheckCount)+"）")]),e._l(e.todolist.adminSelfCheckTodoList,(function(t,a){return n("div",{key:a},[n("a-table",{attrs:{"data-source":t.selfCheckInfos,bordered:"",rowKey:"collegeGuid",pagination:!1}},[n("a-table-column",{key:"activename",attrs:{"data-index":"activename"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-row",[n("a-col",{attrs:{xs:8,xxl:4}},[n("img",{staticStyle:{width:"34px"},attrs:{src:"icon_zicha@2x.png",alt:""}})]),n("a-col",{attrs:{xs:16,xxl:20}},[n("p",[e._v(e._s(a.collegeName))]),n("p",[e._v(e._s(a.principal))])])],1)]}}],null,!0)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])]),n("a-table-column",{key:"overTime",attrs:{"data-index":"overTime"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("p",[e._v(e._s(a.submitTime))]),0==a.status?n("p",[e._v("未开始")]):1==a.status?n("p",[e._v("进行中")]):2==a.status||3==a.status?n("p",[e._v("待审核")]):4==a.status?n("p",[e._v("整改中")]):5==a.status?n("p",[e._v("已完成")]):e._e()]}}],null,!0)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("自查活动时限 "+e._s(t.overTime))])]),n("a-table-column",{key:"action",attrs:{"data-index":"action",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a,i){return[n("a-button",{attrs:{size:"small",shape:"circle",icon:"edit",title:"详情",type:"primary"},on:{click:function(a){return e.activeDetail(t.id,i.collegeGuid,t.name)}}})]}}],null,!0)},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{on:{click:function(a){return e.checkActiveAll(t.id)}}},[e._v("查看全部")])])])],1)],1)}))],2):e._e(),null!=e.todolist.adminEventHiddenDangerList&&0!=e.countlist.adminEventDangerCount?n("div",[n("p",{staticClass:"tabletitle"},[e._v("校级自查整改反馈（"+e._s(e.countlist.adminEventDangerCount)+"）")]),n("a-table",{attrs:{"data-source":e.todolist.adminEventHiddenDangerList,bordered:"",pagination:!1}},[n("a-table-column",{key:"collegeName",attrs:{"data-index":"collegeName"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-row",[n("a-col",{attrs:{xs:8,xxl:4}},[n("img",{attrs:{width:"22px",src:"icon_zhenggai@2x.png",alt:""}})]),n("a-col",{attrs:{xs:16,xxl:20}},[e._v(" "+e._s(t)+" ")])],1)]}}],null,!1,3647088960)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("院部")])]),n("a-table-column",{key:"address",attrs:{"data-index":"address"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("地址")])]),n("a-table-column",{key:"content",attrs:{"data-index":"content",ellipsis:"true"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("隐患内容")])]),n("a-table-column",{key:"rectifyContent",attrs:{"data-index":"rectifyContent",ellipsis:"true"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("整改内容")])]),n("a-table-column",{key:"branchPrincipal",attrs:{width:"105px","data-index":"branchPrincipal"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("实验分室负责人")])]),n("a-table-column",{key:"principal",attrs:{width:"105px","data-index":"principal"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("整改负责人")])]),n("a-table-column",{key:"action",attrs:{"data-index":"action",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-button",{attrs:{size:"small",shape:"circle",icon:"edit",title:"详情",type:"primary"},on:{click:function(t){return e.dangerDetail(a.id)}}})]}}],null,!1,685241669)},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{on:{click:function(t){return e.checkBranchEventsAll()}}},[e._v("查看全部")])])])],1)],1):e._e(),null!=e.todolist.adminPendingReviewDanger&&0!=e.countlist.adminDangerCount?n("div",[n("p",{staticClass:"tabletitle"},[e._v("日常巡查整改反馈（"+e._s(e.countlist.adminDangerCount)+"）")]),n("a-table",{attrs:{"data-source":e.todolist.adminPendingReviewDanger,bordered:"",pagination:!1}},[n("a-table-column",{key:"collegeName",attrs:{"data-index":"collegeName"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-row",[n("a-col",{attrs:{xs:8,xxl:4}},[n("img",{attrs:{width:"22px",src:"icon_zhenggai@2x.png",alt:""}})]),n("a-col",{attrs:{xs:16,xxl:20}},[e._v(" "+e._s(t)+" ")])],1)]}}],null,!1,3647088960)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("院部")])]),n("a-table-column",{key:"address",attrs:{"data-index":"address"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("地址")])]),n("a-table-column",{key:"content",attrs:{"data-index":"content",ellipsis:"true"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("隐患内容")])]),n("a-table-column",{key:"rectifyContent",attrs:{"data-index":"rectifyContent",ellipsis:"true"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("整改内容")])]),n("a-table-column",{key:"branchPrincipal",attrs:{"data-index":"branchPrincipal"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("实验分室负责人")])]),n("a-table-column",{key:"principal",attrs:{width:"105px","data-index":"principal"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("整改负责人")])]),n("a-table-column",{key:"action",attrs:{"data-index":"action",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-button",{attrs:{size:"small",shape:"circle",icon:"edit",title:"详情",type:"primary"},on:{click:function(t){return e.dangerDetail(a.id)}}})]}}],null,!1,685241669)},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{on:{click:function(t){return e.checkinspectionall()}}},[e._v("查看全部")])])])],1)],1):e._e(),null!=e.todolist.adminOpenPlanTodoList&&0!=e.countlist.adminOpenCount?n("div",[n("p",{staticClass:"tabletitle"},[e._v("实验室开放统计（ "+e._s(e.countlist.adminOpenCount)+" ）")]),e._l(e.todolist.adminOpenPlanTodoList,(function(t,a){return n("div",{key:a,staticStyle:{"margin-bottom":"15px"}},[n("a-table",{attrs:{"data-source":t.openPlanDetails,bordered:"",pagination:!1}},[n("a-table-column",{key:"collegeName",attrs:{"data-index":"collegeName"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-row",[n("a-col",{attrs:{xs:6,xxl:3}},[n("img",{attrs:{width:"22px",src:"icon_kaifang@2x.png",alt:""}})]),n("a-col",{attrs:{xs:18,xxl:21}},[e._v(" "+e._s(t)+" ")])],1)]}}],null,!0)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.planName))])]),n("a-table-column",{key:"time",attrs:{"data-index":"time",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("p",{staticClass:"boldword"},[n("span",{staticStyle:{"margin-right":"10px"}},[e._v("实验室： "+e._s(a.labCount))])])]}}],null,!0)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("开放统计")])]),n("a-table-column",{key:"action",attrs:{"data-index":"action",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a,i){return[n("a-button",{attrs:{size:"small",shape:"circle",icon:"edit",title:"详情",type:"primary"},on:{click:function(a){return e.openPlanDetail(t.id,i.collegeGuid)}}})]}}],null,!0)},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{on:{click:function(a){return e.checkopenplanall(t.id)}}},[e._v("查看全部")])])])],1)],1)}))],2):e._e(),null!=e.todolist.adminCustomStatistics&&0!=e.countlist.adminCustomCount?n("div",[n("p",{staticClass:"tabletitle"},[e._v("实验室自定义统计（ "+e._s(e.countlist.adminCustomCount)+" ）")]),n("a-table",{attrs:{"data-source":e.todolist.adminCustomStatistics,bordered:"",pagination:!1}},[n("a-table-column",{key:"title",attrs:{"data-index":"title"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("img",{attrs:{width:"22px",src:"icon_kaifang@2x.png",alt:""}}),n("span",{staticClass:"headername"},[e._v(e._s(t)+" ")])]}}],null,!1,2134188183)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("名称")])]),n("a-table-column",{key:"time",attrs:{"data-index":"time"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("span",[e._v(e._s(a.beginTime?a.beginTime.substring(0,10):"")+" — "+e._s(a.endTime?a.endTime.substring(0,10):""))])]}}],null,!1,709886665)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("计划时限")])]),n("a-table-column",{key:"action",attrs:{"data-index":"action",width:"100px",align:"center"}},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{on:{click:function(t){return e.checkcustomall()}}},[e._v("查看全部")])])])],1)],1):e._e(),null!=e.todolist.departmentVeritySelfCheckTodoList&&0!=e.countlist.departmentVerityCount?n("div",[n("p",{staticClass:"tabletitle"},[e._v("院系自查活动待审核（"+e._s(e.countlist.departmentVerityCount)+"）")]),n("a-table",{attrs:{"data-source":e.todolist.departmentVeritySelfCheckTodoList,bordered:"",pageination:!1}},[n("a-table-column",{key:"name",attrs:{"data-index":"name"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("活动名称")])]),n("a-table-column",{key:"collegeName",attrs:{"data-index":"collegeName"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("学院")])]),n("a-table-column",{key:"overTime",attrs:{"data-index":"overTime"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("提交时间")])]),n("a-table-column",{key:"status",attrs:{"data-index":"status"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-tag",{attrs:{color:"blue"}},[e._v("待审核")])]}}],null,!1,45125020)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("状态")])]),n("a-table-column",{key:"action",attrs:{"data-index":"action",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-button",{attrs:{size:"small",shape:"circle",icon:"edit",title:"详情",type:"primary"},on:{click:function(t){return e.editSelfCheck(a)}}})]}}],null,!1,3566757002)},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{on:{click:function(t){return e.checkSelfCheckAll()}}},[e._v("查看全部")])])])],1)],1):e._e(),null!=e.todolist.departmentSelfCheckTodoList&&0!=e.countlist.departmentCheckCount?n("div",[n("p",{staticClass:"tabletitle"},[e._v("校级自查活动待办（"+e._s(e.countlist.departmentCheckCount)+"）")]),n("a-table",{attrs:{"data-source":e.todolist.departmentSelfCheckTodoList,bordered:"",pagination:!1}},[n("a-table-column",{key:"name",attrs:{"data-index":"name"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("img",{attrs:{width:"22px",src:"icon_zicha@2x.png",alt:""}}),n("span",{staticClass:"headername"},[e._v(e._s(t))])]}}],null,!1,3691226888)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("活动名称")])]),n("a-table-column",{key:"status",attrs:{"data-index":"status",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[0==t?n("a-tag",{attrs:{color:"gray"}},[e._v("未开始")]):1==t?n("a-tag",{attrs:{color:"red"}},[e._v("进行中")]):2==t?n("a-tag",{attrs:{color:"blue"}},[e._v("审核中")]):3==t?n("a-tag",{attrs:{color:"green"}},[e._v("已完成")]):e._e()]}}],null,!1,676870607)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("状态")])]),n("a-table-column",{key:"action",attrs:{"data-index":"action",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-button",{attrs:{size:"small",shape:"circle",icon:"edit",type:"primary",title:"详情"},on:{click:function(t){return e.editSelfCheck(a)}}})]}}],null,!1,50333546)},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{on:{click:function(t){return e.checkSelfCheckAll()}}},[e._v("查看全部")])])])],1)],1):e._e(),null!=e.todolist.departmentEventHiddenDangerList&&0!=e.countlist.departmentDangerCount?n("div",[n("p",{staticClass:"tabletitle"},[e._v("校级自查隐患待办（"+e._s(e.countlist.departmentDangerCount)+"）")]),n("a-table",{attrs:{"data-source":e.todolist.departmentEventHiddenDangerList,bordered:"",pagination:!1}},[n("a-table-column",{key:"branchName",attrs:{"data-index":"branchName"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("img",{attrs:{width:"22px",src:"icon_kaifang@2x.png",alt:""}}),n("span",{staticClass:"headername"},[e._v(e._s(t)+" ")])]}}],null,!1,2134188183)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("实验分室")])]),n("a-table-column",{key:"branchPrincipal",attrs:{"data-index":"branchPrincipal"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("实验分室负责人")])]),n("a-table-column",{key:"principal",attrs:{"data-index":"principal"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("整改负责人")])]),n("a-table-column",{key:"content",attrs:{"data-index":"content",ellipsis:"true"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("隐患内容")])]),n("a-table-column",{key:"rectifyContent",attrs:{"data-index":"rectifyContent",ellipsis:"true"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("整改内容")])]),n("a-table-column",{key:"action",attrs:{"data-index":"action",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-button",{attrs:{size:"small",shape:"circle",icon:"edit",title:"详情",type:"primary"},on:{click:function(t){return e.editDanger(a)}}})]}}],null,!1,3224548235)},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{on:{click:function(t){return e.checkdepartdangerall()}}},[e._v("查看全部")])])])],1)],1):e._e(),null!=e.todolist.departmentOpenPlanTodoList&&0!=e.countlist.departmentOpenPlanCount?n("div",[n("p",{staticClass:"tabletitle"},[e._v("实验室开放统计待办（"+e._s(e.countlist.departmentOpenPlanCount)+"）")]),n("a-table",{attrs:{"data-source":e.todolist.departmentOpenPlanTodoList,bordered:"",pagination:!1}},[n("a-table-column",{key:"planName",attrs:{"data-index":"planName"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("img",{attrs:{width:"22px",src:"icon_kaifang@2x.png",alt:""}}),n("span",{staticClass:"headername"},[e._v(e._s(t)+" ")])]}}],null,!1,2134188183)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("名称")])]),n("a-table-column",{key:"statusId",attrs:{"data-index":"statusId"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[0==t||null==t?n("a-tag",{attrs:{color:"gray"}},[e._v("未提交")]):1==t?n("a-tag",{attrs:{color:"blue"}},[e._v("审核中")]):2==t?n("a-tag",{attrs:{color:"green"}},[e._v("审核通过")]):3==t?n("a-tag",{attrs:{color:"red"}},[e._v("审核失败")]):e._e()]}}],null,!1,689622379)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("状态")])]),n("a-table-column",{key:"action",attrs:{"data-index":"action",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-button",{attrs:{size:"small",shape:"circle",icon:"edit",title:"详情",type:"primary"},on:{click:function(t){return e.editopenPlan(a.planId)}}})]}}],null,!1,4162506535)},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{on:{click:function(t){return e.checkdepartopenplanall()}}},[e._v("查看全部")])])])],1)],1):e._e(),null!=e.todolist.departmentCustomStatistics&&0!=e.countlist.departmentCustomCount?n("div",[n("p",{staticClass:"tabletitle"},[e._v("实验室自定义统计待办（"+e._s(e.countlist.departmentCustomCount)+"）")]),n("a-table",{attrs:{"data-source":e.todolist.departmentCustomStatistics,bordered:"",pagination:!1}},[n("a-table-column",{key:"title",attrs:{"data-index":"title"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("img",{attrs:{width:"22px",src:"icon_kaifang@2x.png",alt:""}}),n("span",{staticClass:"headername"},[e._v(e._s(t)+" ")])]}}],null,!1,2134188183)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("名称")])]),n("a-table-column",{key:"action",attrs:{"data-index":"action",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-button",{attrs:{size:"small",shape:"circle",icon:"edit",title:"详情",type:"primary"},on:{click:function(t){return e.editcustom(a.customStatisticsId)}}})]}}],null,!1,2738698838)},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{on:{click:function(t){return e.checkcustomall()}}},[e._v("查看全部")])])])],1)],1):e._e(),null!=e.todolist.labCenterCheckEventDangers&&0!=e.countlist.labCenterEventCount?n("div",[n("p",{staticClass:"tabletitle"},[e._v("校级自查隐患待整改("+e._s(e.countlist.labCenterEventCount)+")")]),n("a-table",{attrs:{"data-source":e.todolist.labCenterCheckEventDangers,bordered:"",pagination:!1}},[n("a-table-column",{key:"branchName",attrs:{"data-index":"branchName"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("img",{attrs:{width:"22px",src:"icon_zicha@2x.png",alt:""}}),n("span",{staticClass:"headername"},[e._v(" "+e._s(t))])]}}],null,!1,2059970979)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("实验分室名称")])]),n("a-table-column",{key:"address",attrs:{"data-index":"address"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("地址")])]),n("a-table-column",{key:"content",attrs:{"data-index":"content",ellipsis:"true"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("隐患内容")])]),n("a-table-column",{key:"branchPrincipal",attrs:{"data-index":"branchPrincipal"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("实验分室负责人")])]),n("a-table-column",{key:"principal",attrs:{"data-index":"principal"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("整改负责人")])]),n("a-table-column",{key:"action",attrs:{"data-index":"action",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-button",{attrs:{size:"small",shape:"circle",icon:"edit",title:"详情",type:"primary"},on:{click:function(t){return e.editBranchEvent(a)}}})]}}],null,!1,3162937928)},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{on:{click:function(t){return e.checkBranchEventsAll()}}},[e._v("查看全部")])])])],1)],1):e._e(),null!=e.todolist.labCenterCheckDangers&&0!=e.countlist.labCenterDangersCount?n("div",[n("p",{staticClass:"tabletitle"},[e._v("日常巡查待整改隐患（"+e._s(e.countlist.labCenterDangersCount)+"）")]),n("a-table",{attrs:{"data-source":e.todolist.labCenterCheckDangers,bordered:"",pagination:!1}},[n("a-table-column",{key:"branchName",attrs:{"data-index":"branchName"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("实验分室")])]),n("a-table-column",{key:"content",attrs:{"data-index":"content",ellipsis:"true"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("隐患内容")])]),n("a-table-column",{key:"branchPrincipal",attrs:{"data-index":"branchPrincipal"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("实验分室负责人")])]),n("a-table-column",{key:"principal",attrs:{"data-index":"principal"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("整改负责人")])]),n("a-table-column",{key:"status",attrs:{"data-index":"status"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[0==t?n("a-tag",{attrs:{color:"red"}},[e._v("整改中")]):e._e(),1==t?n("a-tag",{attrs:{color:"blue"}},[e._v("审核中")]):e._e(),2==t?n("a-tag",{attrs:{color:"green"}},[e._v("整改完成")]):e._e()]}}],null,!1,1574073308)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("状态")])]),n("a-table-column",{key:"action",attrs:{"data-index":"action",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-button",{attrs:{size:"small",shape:"circle",icon:"edit",title:"详情",type:"primary"},on:{click:function(t){return e.editBranchDanger(a)}}})]}}],null,!1,3182948927)},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{on:{click:function(t){return e.checkBranchDangerAll()}}},[e._v("查看全部")])])])],1)],1):e._e(),null!=e.todolist.labBranchCheckDangers&&0!=e.countlist.labBranchCheckCount?n("div",[n("p",{staticClass:"tabletitle"},[e._v("日常巡查待整改（"+e._s(e.countlist.labBranchCheckCount)+"）")]),n("a-table",{attrs:{"data-source":e.todolist.labBranchCheckDangers,bodered:"",pagination:!1}},[n("a-table-column",{key:"branchName",attrs:{"data-index":"branchName"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("实验分室")])]),n("a-table-column",{key:"content",attrs:{"data-index":"content",ellipsis:"true"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("隐患内容")])]),n("a-table-column",{key:"branchPrincipal",attrs:{"data-index":"branchPrincipal"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("实验分室负责人")])]),n("a-table-column",{key:"principal",attrs:{"data-index":"principal"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("整改负责人")])]),n("a-table-column",{key:"status",attrs:{"data-index":"status"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[0==t?n("a-tag",{attrs:{color:"red"}},[e._v("整改中")]):e._e(),1==t?n("a-tag",{attrs:{color:"blue"}},[e._v("审核中")]):e._e(),2==t?n("a-tag",{attrs:{color:"green"}},[e._v("整改完成")]):e._e()]}}],null,!1,1574073308)},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("状态")])]),n("a-table-column",{key:"action",attrs:{"data-index":"action",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("a-button",{attrs:{size:"small",shape:"circle",icon:"edit",title:"详情",type:"primary"},on:{click:function(t){return e.editBranchDanger(a)}}})]}}],null,!1,3182948927)},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{on:{click:function(t){return e.checkBranchDangerAll()}}},[e._v("查看全部")])])])],1)],1):e._e()])],1),n("a-col",{attrs:{span:6}},[n("a-card",{staticClass:"mylablist",attrs:{bordered:!1}},[n("span",{staticClass:"headtitle",attrs:{slot:"title"},slot:"title"},[e._v("我的实验分室")]),e.workData.myLaboratoryBranchs?n("div",{attrs:{slot:"extra"},slot:"extra"},[n("a-select",{attrs:{"label-in-value":"","default-value":{key:"全部"}},on:{change:e.handleChange}},[n("a-select-option",{attrs:{value:"全部"}},[e._v(" 全部 ("+e._s(e.workData.myLaboratoryBranchs.length)+") ")]),n("a-select-option",{attrs:{value:"科研"}},[e._v(" 科研 ("+e._s(e.ky.length)+") ")]),n("a-select-option",{attrs:{value:"教学"}},[e._v(" 教学 ("+e._s(e.jx.length)+") ")]),n("a-select-option",{attrs:{value:"其他"}},[e._v(" 其他 ("+e._s(e.qt.length)+") ")])],1)],1):e._e(),n("a-list",{attrs:{"item-layout":"vertical","data-source":e.filterbranch},scopedSlots:e._u([{key:"renderItem",fn:function(t,a){return n("a-list-item",{staticClass:"labCard",class:{bluelist:t.status},on:{click:function(a){return e.toLaboratoryBranchs(t)}}},[n("div",{staticClass:"leftbar",class:{bluebar:t.status}}),n("div",{staticClass:"list-top"},[n("span",{staticClass:"text1",attrs:{title:t.laboratoryName}},[e._v(e._s(t.name))]),n("span",{staticClass:"text2"},[e._v(e._s(t.typeName))])]),n("div",{staticClass:"listcontent"},[n("div",{staticStyle:{margin:"4px 12px 2px 17px"}},[n("span",[e._v("所属实验室：")]),n("span",{staticClass:"labname",attrs:{title:t.laboratoryName}},[e._v(e._s(t.laboratoryName))])]),n("div",{staticStyle:{margin:"2px 12px 2px 17px"}},[n("span",[e._v("使用面积：")]),n("span",{staticClass:"usearea"},[e._v(" "+e._s(t.usageArea))])])])])}}])})],1)],1)],1)],1)},i=[],o=(a("4de4"),a("4160"),a("a15b"),a("b0c0"),a("159b"),a("a4d3"),a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0"),a("06c5"));function l(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Object(o["a"])(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,l=!0,r=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){r=!0,i=t},f:function(){try{l||null==n["return"]||n["return"]()}finally{if(r)throw i}}}}var r=a("c1df"),s=a.n(r),c=a("6a7e"),d=a("2af9"),u={data:function(){return{roles:[],workData:{},tabKey:1,topData:{},miniAreaData:[],miniBarNum:[],miniBarDanger:[],miniBarSolve:[],dangecount:0,changecount:0,dangerCollegeData:[],dangerRank:[],solveDangers:[],queryParm:{TimeType:1,Time:s()().format("YYYY-MM")},todolist:{},countlist:{adminEventDangerCount:0,adminOpenCount:0,adminCustomCount:0,adminDangerCount:0,adminCheckCount:0,departmentVerityCount:0,departmentOpenPlanCount:0,departmentDangerCount:0,departmentCheckCount:0,departmentCustomCount:0,labCenterDangersCount:0,labCenterEventCount:0,labBranchCheckCount:0},todoTotalCount:0,levelName:["","校管理员","院部分管领导","院部实验室安全自查负责人","实验中心主任","实验室负责人","实验分室负责人","院部危险化学品联络人","实验分室安全责任人","院部实验中心主任","院部实验室安全管理员"],filterbranch:[],ky:[],jx:[],qt:[]}},components:{ChartCard:d["b"],MiniProgress:d["d"],RankList:d["g"],Bar:d["a"],Trend:d["o"],NumberInfo:d["f"],MiniSmoothArea:d["e"]},created:function(){this.init()},methods:{init:function(){var t=this;Object(c["ob"])().then((function(e){for(var a in t.todolist=e,t.todoTotalCount=0,null!=e.adminEventHiddenDangerList&&(t.countlist.adminEventDangerCount=e.adminEventHiddenDangerList.length),null!=e.adminOpenPlanTodoList&&(t.countlist.adminOpenCount=e.adminOpenPlanTodoList.length),null!=e.adminCustomStatistics&&(t.countlist.adminCustomCount=e.adminCustomStatistics.length),null!=e.adminPendingReviewDanger&&(t.countlist.adminDangerCount=e.adminPendingReviewDanger.length),null!=e.adminSelfCheckTodoList&&(t.countlist.adminCheckCount=e.adminSelfCheckTodoList.length),null!=e.departmentVeritySelfCheckTodoList&&(t.countlist.departmentVerityCount=e.departmentVeritySelfCheckTodoList.length),null!=e.departmentOpenPlanTodoList&&(t.countlist.departmentOpenPlanCount=e.departmentOpenPlanTodoList.length),null!=e.departmentSelfCheckTodoList&&(t.countlist.departmentCheckCount=e.departmentSelfCheckTodoList.length),null!=e.departmentEventHiddenDangerList&&(t.countlist.departmentDangerCount=e.departmentEventHiddenDangerList.length),null!=e.departmentCustomStatistics&&(t.countlist.departmentCustomCount=e.departmentCustomStatistics.length),null!=e.labCenterCheckDangers&&(t.countlist.labCenterDangersCount=e.labCenterCheckDangers.length),null!=e.labCenterCheckEventDangers&&(t.countlist.labCenterEventCount=e.labCenterCheckEventDangers.length),null!=e.labBranchCheckDangers&&(t.countlist.labBranchCheckCount=e.labBranchCheckDangers.length),t.countlist)t.todoTotalCount+=t.countlist[a]})),Object(c["ub"])().then((function(e){t.workData=e,t.topData=e.schoolDashboard,t.miniAreaData=e.yearFindHiddenDangers,t.miniBarNum=e.collegeHiddenDangerInfos,t.miniBarDanger=e.yearFindHiddenDangers,t.miniBarSolve=e.yearSolveHiddenDangers,t.solveDangers=e.collegeHiddenDangerInfos,t.filterbranch=e.myLaboratoryBranchs,t.ky=t.filterbranch.filter((function(t){return"科研"==t.typeName})),t.jx=t.filterbranch.filter((function(t){return"教学"==t.typeName})),t.qt=t.filterbranch.filter((function(t){return"其他"==t.typeName}));var a=[];t.workData.levels.forEach((function(e){a.push(t.levelName[e])})),t.roles=a.join("、"),t.loadSolveChart(),t.loadMiniArea(),t.loadMiniBar()})),this.getHistogram(),this.getranklist()},getranklist:function(){var t=this;this.dangerRank=[];var e=s()(this.queryParm.Time).format("YYYY");Object(c["y"])({year:e}).then((function(e){e.forEach((function(e){t.dangerRank.push({name:e.x,desc:e.y})}))}))},getHistogram:function(){var t=this;Object(c["J"])(this.queryParm).then((function(e){t.dangerCollegeData=e,t.loadBarEchart()}))},onChange:function(t,e){this.queryParm.Time=s()(t).format("YYYY-MM"),this.getHistogram(),this.getranklist()},loadMiniArea:function(){var t=this.$echarts.init(document.getElementById("miniArea")),e={title:{text:" "},tooltip:{},xAxis:{type:"category",data:this.getx(this.miniAreaData),show:!1},yAxis:{type:"value",axisLabel:{fontSize:9},axisLine:{show:!0},minInterval:5},series:[{data:this.gety(this.miniAreaData),type:"line",areaStyle:{},itemStyle:{color:"#1890ff"}}]};t.setOption(e),document.getElementById("miniArea").style.width=this.$refs["lineChart"].offsetWidth+"px",t.resize(),window.addEventListener("resize",(function(){t.resize()}))},loadMiniBar:function(){var t=this.$echarts.init(document.getElementById("miniBar")),e={title:{text:" "},tooltip:{},legend:{data:["已整改","未整改"],right:"10%",top:"8%",orient:"vertical",textStyle:{fontSize:8},itemWidth:10,itemHeight:7},xAxis:{type:"category",data:this.getminiareax(this.miniBarNum),show:!1},yAxis:{type:"value",axisLabel:{fontSize:9},axisLine:{show:!0},minInterval:5},series:[{name:"未整改",data:this.gety3(this.miniBarNum),type:"bar",stack:"隐患详情",areaStyle:{},itemStyle:{color:"red"}},{name:"已整改",data:this.gety2(this.miniBarNum),type:"bar",stack:"隐患详情",areaStyle:{},itemStyle:{color:"#1890ff"}}]};t.setOption(e),window.addEventListener("resize",(function(){t.resize()}))},loadSolveChart:function(){var t=this.$echarts.init(document.getElementById("solveChart")),e={title:{text:""},tooltip:{},legend:{data:["已整改"],top:"5%",right:"10%"},xAxis:{type:"category",data:this.getChangex(this.solveDangers),axisLabel:{rotate:30}},yAxis:{type:"value"},series:[{name:"已整改",data:this.gety2(this.solveDangers),type:"bar",areaStyle:{},itemStyle:{color:"#1890ff"}}]};t.setOption(e),window.addEventListener("resize",(function(){t.resize()}))},loadBarEchart:function(){var t=this.$echarts.init(document.getElementById("barChart")),e={title:{text:""},tooltip:{},xAxis:[{type:"category",data:this.getx2(this.dangerCollegeData),axisLabel:{rotate:30}}],yAxis:{type:"value"},series:[{data:this.gety(this.dangerCollegeData),type:"bar",itemStyle:{color:"#1890ff"}}]};t.setOption(e),window.addEventListener("resize",(function(){t.resize()}))},checkopenplanall:function(t){this.$router.push({name:"plandetail",query:{planId:t}})},openPlanDetail:function(t,e){var a={collegeId:e,planId:t};this.$router.push({name:"verifyopenplan",query:a})},checkinspectionall:function(){this.$router.push({name:"inspectionlog"})},dangerDetail:function(t){this.$router.push({name:"dangerDetail",query:{id:t}})},checkActiveAll:function(t){this.$router.push({name:"activedetail",query:{id:t}})},activeDetail:function(t,e,a){this.$router.push({name:"selfprocess",query:{id:t,collegeguid:e,name:a}})},checkdepartopenplanall:function(){this.$router.push({name:"openplan"})},checkcustomall:function(){this.$router.push({name:"custom"})},editopenPlan:function(t){this.$router.push({name:"cplandetail",query:{planId:t}})},editcustom:function(t){this.$router.push({name:"customdetail",query:{customStatisticsId:t}})},checkSelfCheckAll:function(){this.$router.push({name:"activelist"})},editSelfCheck:function(t){this.$router.push({name:"selfprocess",query:{id:t.eventId,name:t.name}})},checkdepartdangerall:function(){this.$router.push({name:"hiddendanger"})},editDanger:function(t){this.$router.push({name:"dangerDetail",query:{id:t.id}})},checkBranchEventsAll:function(){this.$router.push({name:"hiddendanger"})},editBranchEvent:function(t){this.$router.push({name:"dangerDetail",query:{id:t.id}})},checkBranchDangerAll:function(){this.$router.push({name:"inspectionlog"})},editBranchDanger:function(t){this.$router.push({name:"dangerDetail",query:{id:t.id}})},toLaboratoryBranchs:function(t){this.$router.push({name:"branchdetail",query:{guid:t.guid}})},handleChange:function(t){if("全部"==t.key)this.filterbranch=this.workData.myLaboratoryBranchs;else{var e=this.workData.myLaboratoryBranchs.filter((function(e){return e.typeName==t.key}));this.filterbranch=e}},getx:function(t){var e=[];return t.forEach((function(t){e.push(t.x)})),e},getx2:function(t){var e=[];return t.forEach((function(t){e.push(t.x.substring(0,5))})),e},getChangex:function(t){var e=[];return t.forEach((function(t){e.push(t.name.substring(0,5))})),e},getminiareax:function(t){var e=[];return t.forEach((function(t){e.push(t.name)})),e},gety:function(t){var e=[];return t.forEach((function(t){e.push(t.y)})),e},gety2:function(t){var e=[];return t.forEach((function(t){e.push(t.completeNum)})),e},gety3:function(t){var e=[];return t.forEach((function(t){e.push(t.undoneNum)})),e},getDangeCount:function(){var t,e=0,a=l(this.miniBarNum);try{for(a.s();!(t=a.n()).done;){var n=t.value;e+=n.undoneNum}}catch(i){a.e(i)}finally{a.f()}return e},getChangeCount:function(){var t,e=0,a=l(this.miniBarNum);try{for(a.s();!(t=a.n()).done;){var n=t.value;e+=n.completeNum}}catch(i){a.e(i)}finally{a.f()}return e},callback:function(t){this.tabKey=t,this.loadSolveChart()}}},h=u,m=(a("aae1"),a("2877")),f=Object(m["a"])(h,n,i,!1,null,null,null);e["default"]=f.exports},"2b36":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"teacherpage"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"headtitle"},[t._v("校区管理")])]),a("div",{attrs:{slot:"extra"},slot:"extra"}),a("s-table",{ref:"table",attrs:{columns:t.columns,data:t.loaddata,rowKey:"id"},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[[a("a",{on:{click:function(e){return t.handleEdit(n)}}},[t._v("修改")])]],2)}}])}),a("create-campus",{ref:"campusmodal",on:{ok:t.handleOk}})],1)},i=[],o=a("c1df"),l=a.n(o),r=a("2af9"),s=a("788a"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:800,title:"编辑校区",visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{model:t.form,rules:t.rules,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:16}}},[a("a-row",[a("a-col",{attrs:{span:9,offset:2}},[a("a-form-model-item",{attrs:{label:"校区名称",prop:"name"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("a-col",{attrs:{span:9,offset:2}},[a("a-form-model-item",{attrs:{label:"报警电话"}},[a("a-input",{model:{value:t.form.emergencyCall,callback:function(e){t.$set(t.form,"emergencyCall",e)},expression:"form.emergencyCall"}})],1)],1),a("a-col",{attrs:{span:9,offset:2}},[a("a-form-model-item",{attrs:{label:"物业电话"}},[a("a-input",{model:{value:t.form.propertyServicePhone,callback:function(e){t.$set(t.form,"propertyServicePhone",e)},expression:"form.propertyServicePhone"}})],1)],1),a("a-col",{attrs:{span:9,offset:2}},[a("a-form-model-item",{attrs:{label:"地址"}},[a("a-input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},d=[],u=(a("d3b7"),a("9d2c")),h={name:"",code:"",emergencyCall:"",propertyServicePhone:"",address:"",id:""},m={components:{dragModal:u["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,form:this.clone(h),rules:{name:[{required:!0,message:"请填写校区名称!"}]}}},methods:{moment:l.a,clone:function(t){var e=JSON.parse(JSON.stringify(t));return e},modalshow:function(t){this.form=this.clone(t),this.visible=!0},handleOk:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.btnloading=!0,Object(s["ab"])(t.form).then((function(e){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok",t.form),t.form=t.clone(h)})).finally((function(){t.confirmLoading=!1})))}))},handleCancel:function(){this.form=this.clone(h),this.visible=!1}}},f=m,p=a("2877"),b=Object(p["a"])(f,c,d,!1,null,null,null),g=b.exports,v={components:{STable:r["h"],CreateCampus:g},data:function(){var t=this;return{queryParam:{SkipCount:0,MaxResultCount:10,Key:""},columns:[{title:"校区名称",dataIndex:"name"},{title:"报警电话",dataIndex:"emergencyCall"},{title:"物业电话",dataIndex:"propertyServicePhone"},{title:"地址",dataIndex:"address"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:100}],loaddata:function(e){return t.queryParam.SkipCount=(e.pageNo-1)*e.pageSize,t.queryParam.MaxResultCount=e.pageSize,Object(s["S"])(t.queryParam).then((function(t){var a={};return a={data:t.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:t.totalCount},a}))}}},methods:{handleEdit:function(t){this.$refs.campusmodal.modalshow(t)},handleDetail:function(t){this.$refs.detailmodal.modalshow(t)},handleOk:function(){this.$refs.table.refresh(!0)}}},y=v,k=(a("e24d"),Object(p["a"])(y,n,i,!1,null,"7318b6c5",null));e["default"]=k.exports},"2c06":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"danger-list"},[a("a-page-header",{staticClass:"pageheader",on:{back:function(){return t.$router.go(-1)}}},[a("a-button",{attrs:{slot:"backIcon",icon:"left"},slot:"backIcon"},[t._v("返回")]),a("template",{slot:"title"},[a("span",[t._v(" "+t._s(t.info.name))]),a("span",[t._v(" ("+t._s(t.info.collegename)+")")])]),a("template",{slot:"extra"},[a("a-button",{attrs:{size:"small",icon:"download"},on:{click:t.handleDownLoad}},[t._v("导出数据")])],1),a("a-space",{staticStyle:{padding:"4px"},attrs:{size:"middle"}},[a("span",{staticClass:"pageshow"},[a("span",{staticClass:"label"},[t._v("隐患数")]),a("span",{staticClass:"text"},[t._v(t._s(t.data.length))])]),a("span",{staticClass:"pageshow"},[a("span",{staticClass:"label"},[t._v("整改数")]),a("span",{staticClass:"text"},[t._v(t._s(t.data.filter(t.findRecNum).length))])])])],2),a("a-card",[a("a-table",{attrs:{columns:t.columns,"data-source":t.data,pagination:!1,rowKey:"id"},scopedSlots:t._u([{key:"content",fn:function(e){return[a("pre",[t._v(t._s(e))])]}},{key:"picture",fn:function(e,n){return t._l(n.photos.filter(t.findDanger).slice(0,2),(function(t,e){return a("div",{key:e,staticStyle:{float:"left"}},[a("img",{staticStyle:{"margin-right":"4px"},attrs:{src:t.url+"&type=3",alt:"",width:"80px"}})])}))}},{key:"rectifypicture",fn:function(e,n){return t._l(n.photos.filter(t.findRectify).slice(0,2),(function(t,e){return a("div",{key:e,staticStyle:{float:"left"}},[a("img",{staticStyle:{"margin-right":"4px"},attrs:{src:t.url+"&type=3",alt:"",width:"80px"}})])}))}},{key:"status",fn:function(e,n){return[0==e?a("a-badge",{attrs:{color:"red",text:"整改中"}}):t._e(),1==e?a("a-badge",{attrs:{color:"yellow",text:"审核中"}}):t._e(),2==e?a("a-badge",{attrs:{color:"green",text:"完成"}}):t._e()]}},{key:"action",fn:function(e,n){return[a("a-button",{staticStyle:{"margin-right":"4px"},attrs:{icon:"file-search",shape:"circle",title:"详情"},on:{click:function(e){return t.handleDetail(n)}}}),-1!=n.level.indexOf(9)||-1!=n.level.indexOf(10)||-1!=n.level.indexOf(7)?a("a-button",{attrs:{title:"上传整改图片",icon:"edit",shape:"circle"},on:{click:function(e){return t.uploadRectify(n)}}}):t._e(),-1!=n.level.indexOf(1)?a("a-button",{attrs:{title:"审核",icon:"file-done",shape:"circle",disabled:1!=n.status},on:{click:function(e){return t.HandleRectify(n)}}}):t._e()]}}])})],1),a("edit-rectify",{ref:"modal",on:{ok:t.handleRefresh}}),a("verity-rectify",{ref:"vemodal",on:{ok:t.handleRefresh}})],1)},i=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("d973")),l=a("f0a9"),r=a("1d87"),s=(a("ea98"),a("6a7e")),c=[{title:"隐患内容",dataIndex:"content",ellipsis:!0,scopedSlots:{customRender:"content"}},{title:"实验室分室",dataIndex:"branchName",width:"120px"},{title:"所在地点",dataIndex:"address"},{title:"负责人",dataIndex:"principal",width:"120px"},{title:"联系方式",dataIndex:"phoneNum"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"隐患照片",dataIndex:"picture",scopedSlots:{customRender:"picture"},width:"200px"},{title:"整改照片",dataIndex:"rectifypicture",scopedSlots:{customRender:"rectifypicture"},width:"200px"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"150px"}],d={components:{ASpace:r["a"],EditRectify:o["a"],VerityRectify:l["a"]},data:function(){return{columns:c,data:[],info:this.$route.query,checkinfo:{}}},created:function(){this.init()},methods:{init:function(){this.getDangerList()},handleDownLoad:function(){var t=this,e={eventId:this.info.planId,collegeGuid:this.info.collegeguid};Object(s["w"])(e).then((function(e){var a=e,n=new Blob([a]),i=t.info.collegename+"实验室检查隐患登记表.xlsx";if("download"in document.createElement("a")){var o=document.createElement("a");o.download=i,o.style.display="none",o.href=URL.createObjectURL(n),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(n,i)}))},getDangerList:function(){var t=this,e={EventId:this.info.planId,SkipCount:0,MaxResultCount:999};this.info.collegeguid&&(e.CollegeGuid=this.info.collegeguid),Object(s["S"])(e).then((function(e){t.data=e.items}))},findDanger:function(t,e,a){if(0==t.type)return t},findRectify:function(t,e,a){if(1==t.type)return t},findRecNum:function(t,e,a){if(0!=t.status)return t},uploadRectify:function(t){this.$refs.modal.modalshow(t.id)},handleDetail:function(t){this.$router.push({name:"dangerDetail",query:{id:t.id}})},HandleRectify:function(t){this.$refs.vemodal.modalshow(t.id)},handleRefresh:function(){this.init()}}},u=d,h=(a("1ea2"),a("2877")),m=Object(h["a"])(u,n,i,!1,null,null,null);e["default"]=m.exports},"2c77":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:800,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-input-search",{staticStyle:{width:"100%"},attrs:{placeholder:"输入教师名称和工号"},on:{search:t.onSearch}}),a("s-table",{ref:"table",attrs:{columns:t.columns,data:t.loaddata,rowKey:"code","row-selection":{selectedRowKeys:t.selectedRowKeys,selectedRows:t.selectedRows,onChange:t.onSelectChange,type:t.tabletype}},scopedSlots:t._u([{key:"statusId",fn:function(e,n){return a("span",{},[[0==n.statusId?a("span",[t._v("未在职")]):1==n.statusId?a("span",[t._v("在职")]):t._e()]],2)}}])})],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},i=[],o=a("2af9"),l=a("9d2c"),r=a("788a"),s={components:{STable:o["h"],dragModal:l["a"]},data:function(){var t=this;return{title:"新增校管理员",visible:!1,confirmLoading:!1,btnloading:!1,columns:[{title:"姓名",dataIndex:"name"},{title:"学工号",dataIndex:"code"},{title:"院系",dataIndex:"collegeName"},{title:"状态",dataIndex:"statusId",scopedSlots:{customRender:"statusId"}}],queryparam:{Key:"",SkipCount:0,bindCode:"",MaxResultCount:10},params:{teacherCode:"",bindCode:"",level:1,id:0},savetype:"post",tabletype:"radio",selectedRowKeys:[],selectedRows:[],isFirst:!0,loaddata:function(e){return t.queryparam.SkipCount=(e.pageNo-1)*e.pageSize,t.queryparam.MaxResultCount=e.pageSize,Object(r["U"])(t.queryparam).then((function(a){var n={};return t.isFirst=!1,n={data:a.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:a.totalCount},n}))}}},methods:{modalshow:function(t,e,a,n){this.params.bindCode=e,this.params.level=a,t&&(this.queryparam.level=a,this.queryparam.bindCode=t),n?(this.params.id=n,this.savetype="put"):this.savetype="post",1==a?this.title="新增校级管理员":2==a?this.title="新增院领导":3==a?this.title="新增实验室安全自查负责人":4==a?this.title="新增实验中心主任":5==a?this.title="新增实验室负责人":6==a?this.title=n?"编辑实验室分室负责人":"新增实验室分室负责人":7==a?this.title="新增院系危险化学品联络人":8==a?this.title=n?"编辑实验分室安全责任人":"新增实验分室安全责任人":9==a?this.title="新增实验中心主任":10==a&&(this.title="新增实验室安全管理员"),this.isFirst||this.$refs.table.refresh(),this.visible=!0},handleOk:function(){var t=this;this.btnloading=!0,0!=this.selectedRowKeys.length?"post"==this.savetype?Object(r["a"])(this.params).then((function(e){t.btnloading=!1,t.visible=!1,t.params={teacherCode:"",bindCode:"",level:1,id:0},t.selectedRowKeys=[],t.selectedRows=[],t.$emit("ok")})):Object(r["r"])(this.params).then((function(e){t.btnloading=!1,t.visible=!1,t.params={teacherCode:"",bindCode:"",level:1,id:0},t.queryparam.bindCode="",t.selectedRowKeys=[],t.selectedRows=[],t.$emit("ok")})):(this.btnloading=!1,this.visible=!1)},handleCancel:function(){this.params={teacherCode:"",bindCode:"",level:1,id:0},this.queryparam.bindCode="",this.selectedRowKeys=[],this.selectedRows=[],this.visible=!1},onSelectChange:function(t,e){this.selectedRowKeys=t,this.params.teacherCode=t[0],this.selectedRows=e},onSearch:function(t){this.queryparam.Key=t,this.$refs.table.refresh()}}},c=s,d=a("2877"),u=Object(d["a"])(c,n,i,!1,null,null,null);e["a"]=u.exports},"2d23":function(t,e,a){"use strict";var n=a("1b25"),i=a.n(n);i.a},"2e36":function(t,e,a){"use strict";var n=a("5c67"),i=a.n(n);i.a},3115:function(t,e,a){},"313d":function(t,e,a){"use strict";var n=a("f8a9"),i=a.n(n);i.a},"31e5":function(t,e,a){"use strict";var n=a("69f5"),i=a.n(n);i.a},"31f9":function(t,e,a){},"36a3":function(t,e,a){"use strict";var n=a("6eb3"),i=a.n(n);i.a},"37fc":function(t,e,a){"use strict";var n=a("0f8c"),i=a.n(n);i.a},"3a16":function(t,e,a){"use strict";var n=a("3e0e"),i=a.n(n);i.a},"3e0e":function(t,e,a){},"3f4c":function(t,e,a){},"3fa2":function(t,e,a){},4505:function(t,e,a){},"451e":function(t,e,a){},"47e1":function(t,e,a){},"491b":function(t,e,a){"use strict";var n=a("505c"),i=a.n(n);i.a},"497f":function(t,e,a){},"4a5f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"verify_plan"},[a("a-page-header",{staticClass:"pageheader",on:{back:function(){return t.$router.go(-1)}}},[a("a-button",{attrs:{slot:"backIcon",icon:"left"},slot:"backIcon"},[t._v("返回")]),a("template",{slot:"title"},[t._v(t._s(t.planDetail.collegeName)+" "),a("span",[t._v("("+t._s(t.statusshow)+")")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{staticStyle:{margin:"0 25px"},attrs:{disabled:1!=t.planDetail.statusId,type:"primary"},on:{click:t.onVerify}},[t._v("审核")]),a("a-button",{attrs:{disabled:2!=t.planDetail.statusId,type:"primary"},on:{click:t.onrevoke}},[t._v("撤销审核")])],1)],2),a("a-card",[a("a-table",{attrs:{columns:t.columns,"data-source":t.data,pagination:!1,rowKey:"id"}})],1),a("verify-modal",{ref:"modal",on:{ok:t.handleOk}})],1)},i=[],o=(a("4160"),a("159b"),a("6a7e")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{width:"700px",title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-radio-group",{on:{change:t.onChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("a-radio",{attrs:{value:!0}},[t._v("通过")]),a("a-radio",{attrs:{value:!1}},[t._v("不通过")])],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("确认")])],1)],2)},r=[],s={data:function(){return{title:"审核",visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},departmentPlanId:"",value:!0}},methods:{modalshow:function(t){this.visible=!0,this.departmentPlanId=t},onChange:function(){},handleOk:function(){var t=this;Object(o["rb"])({departmentPlanId:this.departmentPlanId,pass:this.value}).then((function(e){t.visible=!1,t.$emit("ok")}))},handleCancel:function(){this.visible=!1}}},c=s,d=a("2877"),u=Object(d["a"])(c,l,r,!1,null,null,null),h=u.exports,m={data:function(){return{columns:[],info:this.$route.query,planDetail:{},data:[],statusshow:""}},components:{VerifyModal:h},created:function(){this.init()},methods:{onVerify:function(){this.$refs.modal.modalshow(this.planDetail.id)},handleOk:function(){this.init()},init:function(){var t=this;Object(o["D"])({PlanId:this.info.planId,CollegeId:this.info.collegeId}).then((function(e){t.planDetail=e,0==t.planDetail.statusId?t.statusshow="未提交":1==t.planDetail.statusId?t.statusshow="审核中":2==t.planDetail.statusId?t.statusshow="审核完成":3==t.planDetail.statusId&&(t.statusshow="审核失败");var a=[];null!=t.planDetail.details&&(t.planDetail.details.forEach((function(t){var e={};e=t,t.customerFieldValues.forEach((function(t,a){var n="label"+a,i=t.value;e[n]=i})),a.push(e)})),t.data=a)})),Object(o["N"])({PlanId:this.info.planId}).then((function(e){var a=e.items;t.columns=[{title:"实验分室名称",dataIndex:"laboratoryName"}],a.forEach((function(e,a){var n={title:e.label,dataIndex:"label"+a};t.columns.push(n)}))}))},onrevoke:function(){var t=this;Object(o["fb"])(this.planDetail.id).then((function(e){t.init(),t.$message.info("撤销成功 请修改")}))}}},f=m,p=(a("bc83"),Object(d["a"])(f,n,i,!1,null,null,null));e["default"]=p.exports},"4d7e":function(t,e,a){},"4fd2":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"branch_detail"},["5"==t.selectedlevel?a("branch-base",{attrs:{guid:t.selectedGuid,formType:t.formType,code:t.selectedKeys[0]}}):t._e()],1)},i=[],o=a("8459c"),l={components:{BranchBase:o["a"]},data:function(){return{selectedKeys:[],selectedlevel:"1",selectedGuid:"",guid:"",formType:"heightDetail"}},created:function(){this.guid=this.$route.query.guid,this.handleChange()},methods:{handleChange:function(){this.selectedlevel=5,this.selectedGuid=this.guid}}},r=l,s=(a("a237"),a("2877")),c=Object(s["a"])(r,n,i,!1,null,null,null);e["default"]=c.exports},"505c":function(t,e,a){},5592:function(t,e,a){},5619:function(t,e,a){"use strict";var n=a("e6e7"),i=a.n(n);i.a},"5a78":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{staticClass:"select_branch",attrs:{width:800,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("a-input-search",{staticStyle:{width:"290px"},attrs:{placeholder:"请输入实验分室名称或编号","allow-clear":""},on:{search:t.onSearch},model:{value:t.queryParam.key,callback:function(e){t.$set(t.queryParam,"key",e)},expression:"queryParam.key"}}),a("a-select",{attrs:{"allow-clear":"",placeholder:"请选择实验室类型"},on:{change:t.handleSelectType},model:{value:t.queryParam.LaboratoryTypeKey,callback:function(e){t.$set(t.queryParam,"LaboratoryTypeKey",e)},expression:"queryParam.LaboratoryTypeKey"}},t._l(t.labTypes,(function(e){return a("a-select-option",{key:e.key},[t._v(" "+t._s(e.value)+" ")])})),1),a("a-select",{attrs:{"allow-clear":"",placeholder:"请选择校区"},on:{change:t.handleSelectSchool},model:{value:t.queryParam.campusCode,callback:function(e){t.$set(t.queryParam,"campusCode",e)},expression:"queryParam.campusCode"}},t._l(t.school,(function(e){return a("a-select-option",{key:e.code},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-table",{attrs:{columns:t.columns,"data-source":t.list,"row-selection":{selectedRowKeys:t.selectedRowKeys,selectedRows:t.selectedRows,onChange:t.onSelectChange,type:"checkbox"},rowKey:"guid"},scopedSlots:t._u([{key:"responsible",fn:function(e){return[a("div",t._l(e,(function(e,n){return a("span",{key:n,staticStyle:{"margin-right":"2px"}},[t._v(t._s(e.teacherName))])})),0)]}}])}),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},i=[],o=a("2af9"),l=a("6a7e"),r=a("788a"),s=[{title:"实验分室",dataIndex:"name"},{title:"实验分室负责人",dataIndex:"responsible",scopedSlots:{customRender:"responsible"}},{title:"地址",dataIndex:"address"},{title:"校区",dataIndex:"schoolRegionName"},{title:"类型",dataIndex:"typeName"}],c={data:function(){return{title:"选择实验分室",visible:!1,btnloading:!1,columns:s,list:[],selectedRowKeys:[],selectedRows:[],collegeId:"",planId:"",queryParam:{key:"",LaboratoryTypeKey:void 0,LabBranchGuids:[],campusCode:void 0,SkipCount:0,MaxResultCount:999},labTypes:[],school:[]}},components:{DragModal:o["c"]},methods:{getList:function(){var t=this;Object(r["I"])(this.queryParam).then((function(e){t.list=e.items}))},modalshow:function(t,e,a){this.visible=!0,this.collegeId=t,this.planId=e,this.queryParam.LabBranchGuids=a,this.getDictionaryInfoList(),this.getSchoolRegionList(),this.getList()},getDictionaryInfoList:function(){var t=this;Object(r["D"])({PropertyKey:"laboratoryType"}).then((function(e){t.labTypes=e.items}))},getSchoolRegionList:function(){var t=this;Object(r["S"])().then((function(e){t.school=e.items}))},onSearch:function(t){this.queryParam.key=t,this.getList()},handleSelectType:function(t){this.queryParam.LaboratoryTypeKey=t,this.getList()},handleSelectSchool:function(t){this.queryParam.campusCode=t,this.getList()},onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},handleOk:function(){var t=this;if(this.btnloading=!0,0!=this.selectedRowKeys.length){var e={collegeId:this.collegeId,planId:this.planId,laboratoryIds:this.selectedRowKeys};Object(l["gb"])(e).then((function(e){t.btnloading=!1,t.queryParam={key:"",LaboratoryTypeKey:void 0,SkipCount:0,MaxResultCount:999},t.selectedRowKeys=[],t.selectedRows=[],t.$emit("ok")}))}else this.btnloading=!1;this.visible=!1},handleCancel:function(){this.queryParam={key:"",LaboratoryTypeKey:void 0,SkipCount:0,MaxResultCount:999},this.selectedRowKeys=[],this.selectedRows=[],this.visible=!1}}},d=c,u=(a("9fea"),a("2877")),h=Object(u["a"])(d,n,i,!1,null,null,null);e["a"]=h.exports},"5b51":function(t,e,a){},"5b7a":function(t,e,a){"use strict";var n=a("1866"),i=a.n(n);i.a},"5c67":function(t,e,a){},"5cf7":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:900,title:"导出列表",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",[a("a-checkbox",{attrs:{indeterminate:t.indeterminate,checked:t.checkAll},on:{change:t.onCheckAllChange}},[t._v(" 全选 ")])],1),a("a-form-model-item",{attrs:{label:"",prop:"checkedList"}},[a("a-checkbox-group",{attrs:{name:"checkedList"},on:{change:t.onChange},model:{value:t.form.checkedList,callback:function(e){t.$set(t.form,"checkedList",e)},expression:"form.checkedList"}},[a("a-row",t._l(t.defaultPlainOptions,(function(e){return a("a-col",{key:e.index,attrs:{span:6}},[a("a-checkbox",{attrs:{value:e.index}},[t._v(" "+t._s(e.name)+" ")])],1)})),1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("导出")])],1)],2)},i=[],o=(a("4de4"),a("4160"),a("c975"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("c1df")),l=a.n(o),r=a("788a"),s=a("9d2c"),c=[{index:0,name:"院部名称"},{index:3,name:"实验中心名称"},{index:7,name:"实验室名称"},{index:14,name:"实验分室名称"},{index:15,name:"实验室使用状态"},{index:12,name:"实验分室属性"},{index:23,name:"实验分室面积"},{index:25,name:"实验分室所在地点"},{index:1,name:"院部分管领导"},{index:2,name:"实验中心编号"},{index:4,name:"实验中心主任"},{index:5,name:"院部实验室安全管理员"},{index:6,name:"实验室编号"},{index:8,name:"实验室建立时间"},{index:9,name:"实验室负责人"},{index:10,name:"实验室类型"},{index:11,name:"实验室建设备注"},{index:13,name:"实验分室编号"},{index:16,name:"使用状态原因"},{index:17,name:"实验分室建立时间"},{index:18,name:"实验分室负责人"},{index:19,name:"实验分室负责人学历"},{index:20,name:"实验分室负责人职称"},{index:21,name:"实验分室负责人联系电话"},{index:22,name:"实验分室安全责任人"},{index:24,name:"实验分室所在校区"},{index:26,name:"危险源"},{index:27,name:"危险源级别"},{index:28,name:"防护措施"},{index:29,name:"灭火要点"}],d=[0,3,7,14,15,12,23,25],u={components:{dragModal:s["a"]},data:function(){return{wrapperCol:{span:24},visible:!1,btnloading:!1,indeterminate:!0,checkAll:!1,defaultPlainOptions:c,plainOptions:[],form:{checkedList:[]},rules:{checkedList:[{type:"array",required:!0,message:"请选择导出列",trigger:"change"}]},queryParam:{}}},methods:{moment:l.a,modalshow:function(t){t&&(this.queryParam=t),this.form.checkedList=d,this.onChange(d),this.visible=!0},optionsCode:function(){var t=[];c&&c.length>0&&(c.forEach((function(e){t.push(e.index)})),this.plainOptions=t)},onChange:function(t){this.optionsCode(),this.indeterminate=!!t.length&&t.length<this.plainOptions.length,this.checkAll=t.length===this.plainOptions.length},onCheckAllChange:function(t){this.optionsCode(),this.form.checkedList=t.target.checked?this.plainOptions:[],t.target.checked&&this.$refs.ruleForm.clearValidate("checkedList"),Object.assign(this,{indeterminate:!1,checkAll:t.target.checked})},handleOk:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return!1;var a=[];if(t.form&&t.form.checkedList){var n=t.defaultPlainOptions.filter((function(e){if(-1!=t.form.checkedList.indexOf(e.index))return e}));a=n}else t.$message.warning("请选择学院");var i={};i="{}"==JSON.stringify(t.queryParam)?{ExportItems:a}:Object.assign(t.queryParam,{ExportItems:a}),t.downloadFun(i)}))},downloadFun:function(t){var e=this;this.btnloading=!0,Object(r["y"])(t).then((function(t){e.btnloading=!1,e.visible=!1,e.$refs.ruleForm.resetFields();var a=t,n=new Blob([a]),i="实验室信息.xlsx";if("download"in document.createElement("a")){var o=document.createElement("a");o.download=i,o.style.display="none",o.href=URL.createObjectURL(n),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(n,i)}))},handleCancel:function(){this.visible=!1,this.form={checkedList:d}}}},h=u,m=(a("b164"),a("2877")),f=Object(m["a"])(h,n,i,!1,null,"56326268",null);e["a"]=f.exports},"5d0f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"checkbook"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"headtitle"},[t._v("安全检查表")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{attrs:{size:"default",type:"primary",icon:"plus"},on:{click:function(e){return t.handleCreate()}}},[t._v("新增")])],1),a("s-table",{ref:"table",attrs:{columns:t.columns,data:t.loadData,rowKey:"id",pagination:{showTotal:function(t){return"共"+t+"条"}}},scopedSlots:t._u([{key:"statusId",fn:function(e){return[0==e?a("a-tag",{attrs:{color:"red"}},[t._v(" 未启用 ")]):t._e(),1==e?a("a-tag",{attrs:{color:"green"}},[t._v(" 启用 ")]):t._e()]}},{key:"operation",fn:function(e,n){return[a("a",{staticStyle:{"margin-right":"20px"},on:{click:function(e){return t.handleChangeName(n)}}},[t._v("修改")]),a("a",{staticStyle:{"margin-right":"20px"},on:{click:function(e){return t.handleDetail(n.id)}}},[t._v("详情")]),a("a",{staticStyle:{"margin-right":"20px"},on:{click:function(e){return t.handleSetDefault(n.id)}}},[t._v("启用")]),a("a-popconfirm",{attrs:{title:"确认删除检查表","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.handleDelete(n.id)},cancel:t.handleCancel}},[a("a",[t._v("删除")])])]}}])}),a("create-type",{ref:"createModal",on:{ok:t.handleOk}})],1)},i=[],o=a("6a7e"),l=a("2af9"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("drag-modal",{attrs:{width:900,visible:t.visible,destroyOnClose:!0},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v(t._s(t.title))])]),a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"名称","label-col":{span:3},"wrapper-col":{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:t.info.name,rules:[{required:!0,message:"请输安全检查表名称"}]}],expression:"[\n              'name',\n              { initialValue: info.name, rules: [{ required: true, message: '请输安全检查表名称' }] },\n            ]"}],attrs:{"auto-size":{minRows:3,maxRows:5}}})],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.loading},on:{click:t.handleSubmit}},[t._v("保存")])],1)],2)],1)},s=[],c=(a("b0c0"),a("411c"),{data:function(){return{visible:!1,confirmLoading:!1,form:this.$form.createForm(this),loading:!1,info:{name:"",code:"",statusId:0},title:"创建安全检查表"}},components:{DragModal:l["c"]},methods:{showModal:function(t){t?(this.info={code:t.id,name:t.name,statusId:t.statusId},this.title="修改安全检查表"):(this.info={name:"",code:""},this.title="创建安全检查表"),this.visible=!0},handleSubmit:function(){var t=this;this.form.validateFieldsAndScroll((function(e,a){if(!e){t.loading=!0,t.confirmLoading=!0;var n=a;""!=t.info.code?(n.id=t.info.code,n.statusId=t.info.statusId,Object(o["q"])(n).then((function(e){t.$message.success("编辑成功"),t.confirmLoading=!1,t.loading=!1,t.$emit("ok",n),t.info={name:"",code:""},t.visible=!1})).catch((function(e){t.confirmLoading=!1,t.loading=!1}))):(a.statusId=0,Object(o["h"])(a).then((function(e){t.$message.success("添加成功"),t.confirmLoading=!1,t.loading=!1,t.$emit("ok",a),t.info={name:"",code:""},t.visible=!1})).catch((function(e){t.confirmLoading=!1,t.loading=!1})))}}))},handleCancel:function(){this.info={name:"",code:""},this.visible=!1}}}),d=c,u=a("2877"),h=Object(u["a"])(d,r,s,!1,null,null,null),m=h.exports,f={components:{STable:l["h"],createType:m},data:function(){var t=this;return{queryParam:{SkipCount:0,MaxResultCount:10},columns:[{title:"安全检查表名称",dataIndex:"name",width:500},{title:"是否启用",dataIndex:"statusId",scopedSlots:{customRender:"statusId"},width:150},{title:"操作",dataIndex:"operation",width:200,scopedSlots:{customRender:"operation"}}],loadData:function(e){return t.queryParam.SkipCount=(e.pageNo-1)*e.pageSize,t.queryParam.MaxResultCount=e.pageSize,Object(o["P"])(t.queryParam).then((function(t){var a={data:t.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:t.totalCount};return a}))}}},methods:{handleChangeName:function(t){this.$refs.createModal.showModal(t)},handleDelete:function(t){var e=this;Object(o["o"])(t).then((function(t){e.$refs.table.refresh()}))},handleCancel:function(){},cancel:function(){},handleOk:function(){this.$refs.table.refresh(!0)},handleCreate:function(t){this.$refs.createModal.showModal(t)},handleDetail:function(t){this.$router.push({name:"checkBookDetails",params:{id:t}})},handleSetDefault:function(t){var e=this;Object(o["ib"])({id:t}).then((function(t){e.$message.success("设定成功"),e.$refs.table.refresh()})).catch((function(t){e.$message.error(t.response.data.error)}))}}},p=f,b=(a("2466"),Object(u["a"])(p,n,i,!1,null,null,null));e["default"]=b.exports},"5d22":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"college_plan_detail"},[a("a-page-header",{staticClass:"pageheader",on:{back:function(){return t.$router.go(-1)}}},[a("template",{slot:"title"},[t._v(t._s(t.planDetail.collegeName)+" "),a("span",[t._v("("+t._s(t.statusshow)+")")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-popconfirm",{attrs:{title:"确定提交？",visible:t.popconfirmVisible,"ok-text":"确认",disabled:!t.isEdit,"cancel-text":"取消"},on:{visibleChange:t.handleVisibleChange,confirm:t.submitPlan}},[-1!=t.planDetail.levels.indexOf(9)||-1!=t.planDetail.levels.indexOf(10)||-1!=t.planDetail.levels.indexOf(7)?a("a-button",{attrs:{type:"primary",disabled:!t.isEdit}},[t._v("提交审核")]):t._e()],1),t._v(" "),-1!=t.planDetail.levels.indexOf(9)||-1!=t.planDetail.levels.indexOf(10)||-1!=t.planDetail.levels.indexOf(7)?a("a-button",{attrs:{disabled:1!=t.planDetail.statusId},on:{click:t.onrevoke}},[t._v("撤销提交")]):t._e(),t._v(" "),-1!=t.planDetail.levels.indexOf(9)||-1!=t.planDetail.levels.indexOf(10)||-1!=t.planDetail.levels.indexOf(7)?a("a-button",{attrs:{disabled:0==t.planDetail.statusId},on:{click:t.onImportantList}},[t._v("导出汇总表")]):t._e()],1)],2),a("a-card",[a("div",{attrs:{slot:"title"},slot:"title"},[-1!=t.planDetail.levels.indexOf(9)||-1!=t.planDetail.levels.indexOf(10)||-1!=t.planDetail.levels.indexOf(7)?a("a-button",{attrs:{disabled:!t.isEdit,type:"primary"},on:{click:t.onSelect}},[t._v("选择实验分室")]):t._e()],1),a("div",{attrs:{slot:"extra"},slot:"extra"},[-1!=t.planDetail.levels.indexOf(9)||-1!=t.planDetail.levels.indexOf(10)||-1!=t.planDetail.levels.indexOf(7)?a("a-button",{attrs:{hidden:!t.isEdit,type:"danger"},on:{click:t.submitAll}},[t._v("保存")]):t._e()],1),t.isEdit?[a("a-table",{ref:"table",attrs:{columns:t.columns,"data-source":t.data,pagination:!1,rowKey:"id"},scopedSlots:t._u([t._l(t.editRowKeys,(function(e){return{key:e,fn:function(n,i,o){return[a("div",{key:e},[a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:n,title:n,disabled:!t.isFF[e]},on:{change:function(a){return t.handleChange(a.target.value,i.id,e)},blur:function(e){return t.submit(e.target.value)}}})],1)]}}})),{key:"action",fn:function(e,n,i){return[a("div",{staticClass:"editable-row-operations"},[a("a-popconfirm",{attrs:{title:"确定删除实验分室？","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(){return t.deleteBrench(n.id)}}},[-1!=t.planDetail.levels.indexOf(9)||-1!=t.planDetail.levels.indexOf(10)||-1!=t.planDetail.levels.indexOf(7)?a("a",{attrs:{disabled:""!=t.editingKey||!t.isEdit}},[t._v("删除")]):t._e()])],1)]}}],null,!0)})]:[a("a-table",{ref:"table",attrs:{columns:t.columns,"data-source":t.data,pagination:!1,rowKey:"id"},scopedSlots:t._u([t._l(t.editRowKeys,(function(e){return{key:e,fn:function(n,i,o){return[a("div",{key:e},[[t._v(" "+t._s(n)+" ")]],2)]}}}))],null,!0)})]],2),a("select-branch",{ref:"selectModal",on:{ok:t.handleOk}})],1)},i=[],o=(a("4de4"),a("4160"),a("c975"),a("d81d"),a("a434"),a("b64b"),a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("159b"),a("ddb0"),a("2b3d"),a("2909")),l=(a("96cf"),a("1da1")),r=a("5530"),s=a("6a7e"),c=a("5a78"),d={mounted:function(){},components:{SelectBranch:c["a"]},created:function(){this.init()},data:function(){return{columns:[],info:this.$route.query,editRowKeys:[],planDetail:{levels:[]},data:[],editingKey:"",cacheData:[],isEdit:!0,statusshow:"",isFF:{},checkIds:[],isSave:!0,ff:"",popconfirmVisible:!1,condition:!0}},methods:{getCollegeLabOpenPlan:function(){var t=this;return Object(s["D"])({PlanId:this.info.planId}).then((function(e){t.planDetail=e,0==t.planDetail.statusId?(t.isEdit=!0,t.statusshow="未提交"):1==t.planDetail.statusId?(t.isEdit=!1,t.statusshow="审核中"):2==t.planDetail.statusId?(t.isEdit=!1,t.statusshow="审核完成"):3==t.planDetail.statusId&&(t.isEdit=!0,t.statusshow="审核失败");var a=[],n=[];null!=t.planDetail.details&&(t.planDetail.details.forEach((function(e,i){n.push(e.laboratoryId);var o={};o=e,0==i&&(t.isFF={},e.customerFieldValues.forEach((function(e,a){var n="label"+a,i=e.status;t.isFF[n]=i}))),e.customerFieldValues.forEach((function(t,e){var a="label"+e,n=t.value;o[a]=n})),a.push(o)})),t.data=a,t.checkIds=n,t.cacheData=t.data.map((function(t){return Object(r["a"])({},t)})))}))},getOpenPlanField:function(){var t=this;return Object(s["N"])({PlanId:this.info.planId}).then((function(e){var a=e.items;t.editRowKeys=[],t.columns=[],a.forEach((function(e,a){var n={title:e.label,dataIndex:"label"+a,align:"center",scopedSlots:{customRender:"label"+a}};t.editRowKeys.push("label"+a),"学院名称"!=n.title&&t.columns.push(n)})),t.isEdit&&t.columns.push({title:"操作",dataIndex:"action",width:"80px",align:"center",scopedSlots:{customRender:"action"}})}))},init:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getCollegeLabOpenPlan();case 2:return e.next=4,t.getOpenPlanField();case 4:case"end":return e.stop()}}),e)})))()},handleOk:function(){this.init()},onSelect:function(){this.$refs.selectModal.modalshow(this.planDetail.collegeId,this.info.planId,this.checkIds)},handleChange:function(t,e,a){var n=Object(o["a"])(this.data),i=n.filter((function(t){return e===t.id}))[0];i&&(i[a]=t,this.data=n)},cancellabel:function(t){var e=Object(o["a"])(this.data),a=e.filter((function(e){return t===e.id}))[0];this.editingKey="",a&&(Object.assign(a,this.cacheData.filter((function(e){return t===e.id}))[0]),delete a.editable,this.data=e)},deleteBrench:function(t){var e=this;this.data.forEach((function(a,n){a.id==t&&e.data.splice(n,1)})),this.planDetail.details.forEach((function(a,n){a.id==t&&e.planDetail.details.splice(n,1)}))},submit:function(t){var e=this;clearTimeout(this.ff),this.ff=setTimeout((function(){return e.submitSave(t)}),5e3)},submitSave:function(t){var e=this;t&&(this.data.forEach((function(t,e){for(var a in t)if(-1!=a.indexOf("label")){var n=a.replace("label","");t.customerFieldValues[n].value=t[a]}})),Object(s["ab"])(this.planDetail).then((function(t){e.init()})))},submitAll:function(){var t=this;this.data.forEach((function(t,e){for(var a in t)if(-1!=a.indexOf("label")){var n=a.replace("label","");t.customerFieldValues[n].value=t[a]}})),Object(s["ab"])(this.planDetail).then((function(e){t.init(),t.$message.info("保存成功！")}))},handleVisibleChange:function(t){var e=this;t?(this.condition=!0,this.data.map((function(t){Object.keys(t).forEach((function(a){-1!=a.indexOf("label")&&(null!=t[a]&&void 0!=t[a]&&" "!=t[a]&&""!=t[a]||(e.condition=!1))}))})),this.condition?this.popconfirmVisible=!0:(this.popconfirmVisible=!1,this.$message.warning("请全部输入数据"))):this.popconfirmVisible=!1},submitPlan:function(){var t=this;Object(s["mb"])(this.planDetail.id).then((function(e){t.init(),t.$message.info("提交成功 待审核")}))},onrevoke:function(){var t=this;Object(s["fb"])(this.planDetail.id).then((function(e){t.init(),t.$message.info("撤销成功 请修改")}))},onImportantList:function(){Object(s["u"])({id:this.info.planId,collegeGuid:this.planDetail.collegeId}).then((function(t){var e=t,a=new Blob([e]),n="开放计划统计表.xlsx";if("download"in document.createElement("a")){var i=document.createElement("a");i.download=n,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}else navigator.msSaveBlob(a,n)}))}}},u=d,h=(a("d2df"),a("2877")),m=Object(h["a"])(u,n,i,!1,null,"5f6b304a",null);e["default"]=m.exports},6056:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"custom"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"headtitle"},[t._v("自定义统计")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[t.isSchoolAdmin?a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.onAddClick}},[t._v("发起统计")]):t._e()],1),a("s-table",{ref:"table",staticClass:"actioncol",attrs:{columns:t.columns,data:t.loadData,rowKey:"id"},scopedSlots:t._u([{key:"beginTime",fn:function(e,n){return[a("span",[t._v(t._s(n.beginTime?n.beginTime.substring(0,10):"")+" — "+t._s(n.endTime?n.endTime.substring(0,10):""))])]}},{key:"action",fn:function(e,n){return[t.isSchoolAdmin?a("a",{on:{click:function(e){return t.setField(n.id)}}},[t._v("自定义字段")]):t._e(),t.isSchoolAdmin?a("a",{on:{click:function(e){return t.onDetail(n.id)}}},[t._v("详情")]):t._e(),t.isSchoolAdmin?t._e():a("a",{on:{click:function(e){return t.onDetail2(n.id)}}},[t._v("编辑")]),t.isSchoolAdmin?a("a",{on:{click:function(e){return t.onEditClick(n)}}},[t._v("编辑")]):t._e(),t.isSchoolAdmin?a("a-popconfirm",{attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.handledelete(n)}}},[a("a",[t._v("删除")])]):t._e()]}}])}),a("create-custom",{ref:"createModal",on:{ok:t.handleOk}}),a("set-custom",{ref:"setModel",on:{ok:t.handleOk}}),a("detail-custom",{ref:"detailModel",on:{ok:t.handleOk}})],1)},i=[],o=(a("c975"),a("2af9")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:700,title:this.detailData&&this.detailData.id?"修改自定义统计":"新建自定义统计",visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"计划名称",prop:"title"}},[a("a-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("a-form-model-item",{attrs:{label:"计划时限",prop:"range_time"}},[a("a-range-picker",{attrs:{format:t.dateFormat},model:{value:t.form.range_time,callback:function(e){t.$set(t.form,"range_time",e)},expression:"form.range_time"}})],1),a("a-form-model-item",{staticClass:"a-form-model-bottom",attrs:{"wrapper-col":{span:24}}},[a("a-row",[a("a-col",{attrs:{span:6}}),a("a-col",{attrs:{span:14}},[a("a-checkbox",{attrs:{indeterminate:t.indeterminate,checked:t.checkAll},on:{change:t.onCheckAllChange}},[t._v(" 全选 ")])],1)],1)],1),a("a-form-model-item",{attrs:{label:"选择学院",prop:"checkedList"}},[a("a-checkbox-group",{on:{change:t.onChange},model:{value:t.form.checkedList,callback:function(e){t.$set(t.form,"checkedList",e)},expression:"form.checkedList"}},[a("a-row",{attrs:{type:"flex",justify:"start"}},t._l(t.collegeList,(function(e,n){return a("a-col",{key:n,attrs:{span:12}},[a("a-checkbox",{key:e.code,attrs:{value:e.guid}},[t._v(" "+t._s(e.name)+" ")])],1)})),1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},r=[],s=(a("4160"),a("159b"),a("96cf"),a("1da1")),c=a("c1df"),d=a.n(c),u=a("788a"),h=a("6a7e"),m={id:"",title:"",startTime:"",endTime:"",range_time:[],checkedList:[]},f={components:{DragModal:o["c"]},data:function(){return{visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},form:this.clone(m),dateFormat:"YYYY-MM-DD",indeterminate:!1,checkAll:!1,collegeList:[],plainOptions:[],queryParam:{SkipCount:0,MaxResultCount:100,Key:""},detailData:{},rules:{title:[{required:!0,message:"请填写名称！",trigger:"blur"}],range_time:[{type:"array",required:!0,message:"请选择活动时限!",trigger:"change"}],checkedList:[{type:"array",required:!0,message:"请选择学院!",trigger:"change"}]}}},methods:{moment:d.a,clone:function(t){var e=JSON.parse(JSON.stringify(t));return e},modalShow:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getCollegeList();case 2:e.detailData=t,t&&t.id?(e.onChange(t.collegeGuidList),e.form={title:t.title,startTime:t.beginTime,endTime:t.endTime,range_time:[t.beginTime?d()(t.beginTime.substr(0,10),"YYYY-MM-DD"):null,t.endTime?d()(t.endTime.substr(0,10),"YYYY-MM-DD"):null],checkedList:t.collegeGuidList}):(e.form=e.clone(m),e.checkAll=!1,e.indeterminate=!1),e.visible=!0;case 5:case"end":return a.stop()}}),a)})))()},getCollegeList:function(){var t=this;return Object(u["z"])(this.queryParam).then((function(e){t.collegeList=e.items}))},optionsCode:function(){var t=[];this.collegeList&&this.collegeList.length>0&&(this.collegeList.forEach((function(e){t.push(e.guid)})),this.plainOptions=t)},onChange:function(t){this.optionsCode(),this.indeterminate=!!t.length&&t.length<this.plainOptions.length,this.checkAll=t.length===this.plainOptions.length},onCheckAllChange:function(t){this.optionsCode(),this.form.checkedList=t.target.checked?this.plainOptions:[],t.target.checked&&this.$refs.ruleForm.clearValidate("checkedList"),Object.assign(this,{indeterminate:!1,checkAll:t.target.checked})},handleOk:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return!1;var a={};a.title=t.form.title,a.beginTime=d()(t.form.range_time[0]).format("YYYY-MM-DD")+" 00:00:00",a.endTime=d()(t.form.range_time[1]).format("YYYY-MM-DD")+" 00:00:00";var n=[];t.form&&t.form.checkedList?(t.form.checkedList.forEach((function(t){n.push({guid:t,checked:!0})})),a.selectCollegeInfos=n):t.$message.warning("请选择学院"),t.detailData&&t.detailData.id?(a["id"]=t.detailData.id,Object(h["bb"])(a).then((function(e){t.clearModal()})).catch((function(e){t.btnloading=!1}))):Object(h["f"])(a).then((function(e){t.clearModal()})).catch((function(e){t.btnloading=!1}))}))},clearModal:function(){this.btnloading=!1,this.detailData&&this.detailData.id?this.$message.success("编辑成功"):this.$message.success("添加成功"),this.$emit("ok"),this.form=this.clone(m),this.visible=!1},handleCancel:function(){this.form=this.clone(m),this.visible=!1}}},p=f,b=(a("7cd9"),a("2877")),g=Object(b["a"])(p,l,r,!1,null,null,null),v=g.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:800,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("p",{staticStyle:{"margin-top":"5px","font-weight":"600","font-size":"16px"}},[t._v("表格预览（点击表头可编辑）:")]),a("a-table",{attrs:{"data-source":t.defaultslist,pagination:!1,bordered:""}},t._l(t.fields,(function(e,n){return a("a-table-column",{key:n},[a("a-popconfirm",{attrs:{slot:"title",title:"选择操作","ok-text":"删除","cancel-text":"编辑"},on:{confirm:function(a){return t.deleteField(e.id)},cancel:function(a){return t.handleModify(e)}},slot:"title"},[a("a",[t._v(t._s(e.label))])])],1)})),1),a("a-card",[a("a-form-model",{ref:"modelform",attrs:{layout:"inline",model:t.form,rules:t.rules}},[a("a-form-model-item",{attrs:{label:"字段名",prop:"label"}},[a("a-input",{model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}})],1),a("a-form-model-item",{attrs:{label:"显示索引",prop:"displayIndex"}},[a("a-input-number",{attrs:{min:0},model:{value:t.form.displayIndex,callback:function(e){t.$set(t.form,"displayIndex",e)},expression:"form.displayIndex"}})],1),a("a-form-model-item",[a("a-button",{attrs:{type:"primary",loading:t.btnloading},on:{click:t.addField}},[t._v("新增")])],1)],1)],1),a("edit-custom",{ref:"edit",on:{ok:t.handlefrash}}),a("template",{slot:"footer"},[a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOks}},[t._v("确认")])],1)],2)},k=[],x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{width:"600px",title:"修改自定义字段",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{staticStyle:{display:"none"},attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"customStatisticsId"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["customStatisticsId",{initialValue:t.detailinfo.customStatisticsId}],expression:"['customStatisticsId', { initialValue: detailinfo.customStatisticsId }]"}]})],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:14},label:"字段"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["label",{initialValue:t.detailinfo.label}],expression:"['label', { initialValue: detailinfo.label }]"}]})],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:7},label:"索引"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["displayIndex",{initialValue:t.detailinfo.displayIndex}],expression:"['displayIndex', { initialValue: detailinfo.displayIndex }]"}],attrs:{min:0,max:9999,"default-value":0}})],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:function(e){return t.handleOk()}}},[t._v("保存")])],1)],2)},C=[],_={data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,detailinfo:{customStatisticsId:"",label:"",displayIndex:0},form:this.$form.createForm(this,{name:"changelabtype"})}},methods:{modalshow:function(t){this.visible=!0,this.detailinfo=t},handleCancel:function(){this.visible=!1},handleOk:function(){var t=this;this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){e?t.btnloading=!1:(Object(h["c"])(a,t.detailinfo.id).then((function(e){t.$emit("ok")})).catch((function(t){})),setTimeout((function(){t.btnloading=!1,t.visible=!1})))})),this.form.resetFields()}}},w=_,S=(a("64e1"),Object(b["a"])(w,x,C,!1,null,"33834b9b",null)),O=S.exports,L=[{title:"字段",dataIndex:"label",scopedSlots:{customRender:"label"}},{title:"显示索引",dataIndex:"displayIndex",scopedSlots:{customRender:"displayIndex"}},{title:"操作",width:"100px",dataIndex:"action",scopedSlots:{customRender:"action"}}],I={components:{STable:o["h"],EditCustom:O,DragModal:o["c"]},data:function(){return{columns:L,title:"设置自定义字段",visible:!1,btnloading:!1,fields:[],defaultslist:[],form:{label:"",displayIndex:0},rules:{label:[{required:!0,message:"请填写字段名称"}]},queryParam:{CustomStatisticsId:"",SkipCount:0,MaxResultCount:99},confirmLoading:!1}},methods:{init:function(t){var e=this;this.queryParam.CustomStatisticsId=t,Object(h["I"])(this.queryParam).then((function(t){e.fields=t.items}))},modalshow:function(t){this.visible=!0,this.form.CustomStatisticsId=t,this.init(t)},addField:function(){var t=this;this.btnloading=!0,this.$refs.modelform.validate((function(e){if(!e)return t.btnloading=!1,!1;Object(h["hb"])(t.form).then((function(e){t.btnloading=!1,t.init(t.form.CustomStatisticsId),t.form.label="",t.form.displayIndex=0})).catch((function(e){t.btnloading=!1}))}))},handleModify:function(t){this.$refs.edit.modalshow(t)},deleteField:function(t){var e=this;Object(h["k"])(t).then((function(t){e.init(e.form.CustomStatisticsId)}))},handlefrash:function(){this.init(this.form.CustomStatisticsId)},handleOk:function(){var t=this;this.form={label:"",displayIndex:0},Object(h["I"])(this.queryParam).then((function(e){t.fields=e.items})),this.$refs.modelform.resetFields(),this.fields=[]},handleOks:function(){this.visible=!1},handleCancel:function(){this.form={label:"",displayIndex:0},this.fields=[],this.$refs.modelform.resetFields(),this.visible=!1}}},D=I,$=Object(b["a"])(D,y,k,!1,null,null,null),j=$.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:1200,title:this.data.title?"自定义统计-"+this.data.title:"自定义统计详情",visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("div",[a("a-button",{staticStyle:{"margin-bottom":"5px"},attrs:{icon:"download"},on:{click:t.handleExport}},[t._v("导出")]),a("a-table",{attrs:{columns:t.columns,"data-source":t.collegelist,rowKey:"collegeId",pagination:!1,scroll:{y:600}}})],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("关闭")])],1)],2)},q=[],R=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),[{title:"院系名称",dataIndex:"collegeName"}]),T={components:{DragModal:o["c"]},data:function(){return{columns:R,visible:!1,data:{},collegelist:[],dataValues:[],id:""}},methods:{moment:d.a,clone:function(t){var e=JSON.parse(JSON.stringify(t));return e},modalShow:function(t){var e=this;this.id=t,Object(h["G"])({id:t}).then((function(t){if(e.data=t,t.departmentCustomStatistics&&t.departmentCustomStatistics.length>0){if(e.dataValues=t.departmentCustomStatistics[0].values,e.dataValues&&e.dataValues.length>0){var a={};e.dataValues.forEach((function(t,n){a={title:t.label,dataIndex:"label"+n,scopedSlots:{customRender:"label"+n}},e.columns.push(a)}))}t.departmentCustomStatistics.forEach((function(t,a){var n={collegeName:t.collegeName};t.values&&t.values.length>0&&t.values.forEach((function(t,e){var a="label"+e,i=t.value;n[a]=i})),e.collegelist.push(n)}))}else e.columns=[{title:"院系名称",dataIndex:"collegeName"}]})),this.visible=!0},handleOk:function(){},handleCancel:function(){this.columns=[{title:"院系名称",dataIndex:"collegeName"}],this.collegelist=[],this.visible=!1},handleExport:function(){Object(h["v"])({id:this.id}).then((function(t){var e=t,a=new Blob([e]),n="自定义统计表.xlsx";if("download"in document.createElement("a")){var i=document.createElement("a");i.download=n,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}else navigator.msSaveBlob(a,n)}))}}},E=T,M=Object(b["a"])(E,P,q,!1,null,null,null),G=M.exports,A=[{title:"计划名称",dataIndex:"title"},{title:"计划时限",dataIndex:"beginTime",scopedSlots:{customRender:"beginTime"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],N={components:{STable:o["h"],CreateCustom:v,SetCustom:j,DetailCustom:G},data:function(){var t=this;return{columns:A,isCollegeAdmin:!1,isSchoolAdmin:!1,queryParam:{Key:"",SkipCount:0,MaxResultCount:10},loadData:function(e){return t.queryParam.SkipCount=(e.pageNo-1)*e.pageSize,t.queryParam.MaxResultCount=e.pageSize,Object(h["F"])(t.queryParam).then((function(t){var a={};return a={data:t.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:t.totalCount},a}))}}},mounted:function(){var t=this.$store.getters.userInfo.role;-1!=t.indexOf("SchoolAdministratory")?(this.isSchoolAdmin=!0,this.columns=[{title:"计划名称",dataIndex:"title"},{title:"计划时限",dataIndex:"beginTime",scopedSlots:{customRender:"beginTime"}},{title:"操作",dataIndex:"action",width:"210px",scopedSlots:{customRender:"action"}}]):(this.isSchoolAdmin=!1,this.columns=[{title:"计划名称",dataIndex:"title"},{title:"计划时限",dataIndex:"beginTime",scopedSlots:{customRender:"beginTime"}},{title:"操作",dataIndex:"action",width:"100px",scopedSlots:{customRender:"action"}}])},methods:{onAddClick:function(){this.$refs.createModal.modalShow()},onEditClick:function(t){this.$refs.createModal.modalShow(t)},handleOk:function(){this.$refs.table.refresh(!0)},setField:function(t){this.$refs.setModel.modalshow(t)},onDetail:function(t){this.$refs.detailModel.modalShow(t)},onDetail2:function(t){this.$router.push({name:"customdetail",query:{customStatisticsId:t}})},handledelete:function(t){var e=this;Object(h["j"])(t).then((function(t){e.$refs.table.refresh()}))}}},B=N,F=(a("491b"),Object(b["a"])(B,n,i,!1,null,null,null));e["default"]=F.exports},"627d":function(t,e,a){"use strict";var n=a("5b51"),i=a.n(n);i.a},"63ca":function(t,e,a){},6423:function(t,e,a){},"64e1":function(t,e,a){"use strict";var n=a("31f9"),i=a.n(n);i.a},"660d":function(t,e,a){"use strict";var n=a("d07a"),i=a.n(n);i.a},6692:function(t,e,a){"use strict";var n=a("63ca"),i=a.n(n);i.a},"679b":function(t,e,a){"use strict";a.r(e);var n,i,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header-index-wide"},[a("a-card",{style:{height:"100%"},attrs:{bordered:!1,bodyStyle:{padding:"16px 0",height:"100%"}}},[a("div",{staticClass:"account-settings-info-main"},[a("div",{staticClass:"account-settings-info-left"},[a("a-menu",{style:{border:"0",width:"auto"},attrs:{mode:t.mode,selectedKeys:t.selectedKeys,type:"inner"},on:{openChange:t.onOpenChange}},[a("a-menu-item",{key:"/management/setting/role/base"},[a("router-link",{attrs:{to:{name:"base"}}},[t._v(" 基本设置 ")])],1)],1)],1),a("div",{staticClass:"account-settings-info-right"},[a("div",{staticClass:"account-settings-info-title"},[a("span",[t._v(t._s(t.$route.meta.title))])]),a("route-view")],1)])])],1)},l=[],r=(a("99af"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["user-layout-wrapper",t.isMobile&&"mobile"],attrs:{id:"userLayout"}},[a("div",{staticClass:"container"},[t._m(0),a("router-view")],1)])}),s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"top"},[a("div",{staticClass:"header"})])}],c=a("7099"),d=a("e819"),u={name:"UserLayout",mixins:[c["a"]],data:function(){return{systemName:d["a"].title}},mounted:function(){document.body.classList.add("userLayout")},beforeDestroy:function(){document.body.classList.remove("userLayout")}},h=u,m=(a("a2e7"),a("2877")),f=Object(m["a"])(h,r,s,!1,null,"240eb3a1",null),p=(f.exports,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.$route.meta.keepAlive?a("keep-alive",[a("router-view")],1):t._e(),t.$route.meta.keepAlive?t._e():a("router-view")],1)}),b=[],g={name:"BlankLayout"},v=g,y=Object(m["a"])(v,p,b,!1,null,"d0d6581c",null),k=(y.exports,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("pro-layout",t._b({attrs:{title:t.title,menus:t.menus,collapsed:t.collapsed,mediaQuery:t.query,isMobile:t.isMobile,handleMediaQuery:t.handleMediaQuery,handleCollapse:t.handleCollapse,logo:t.logoRender,i18nRender:t.i18nRender},scopedSlots:t._u([{key:"headerContentRender",fn:function(){return[a("div",[a("span",[t._v("上海电力大学")])])]},proxy:!0},{key:"rightContentRender",fn:function(){return[a("right-content",{attrs:{"top-menu":"topmenu"===t.settings.layout,"is-mobile":t.isMobile,theme:t.settings.theme,menutype:t.menutype},on:{"system-change":t.systemchange}})]},proxy:!0}])},"pro-layout",t.settings,!1),[a("router-view")],1)}),x=[],C=(a("7db0"),a("c975"),a("b0c0"),a("5530")),_=a("c0d2"),w=a("8e6a"),S=a("5880"),O=a("339d"),L=a("ac72"),I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.wrpCls},[a("a-menu",{staticStyle:{float:"left","border-bottom":"none","line-height":"62px"},attrs:{mode:"horizontal"},model:{value:t.menukey,callback:function(e){t.menukey=e},expression:"menukey"}},[a("a-menu-item",{key:"safety",on:{click:t.handleJump}},[t._v("实验室安全")])],1),a("avatar-dropdown",{class:t.prefixCls,attrs:{menu:t.showMenu,"current-user":t.currentUser}})],1)},D=[],$=a("ade3"),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.currentUser&&t.currentUser.name?a("a-dropdown",{attrs:{placement:"bottomRight"},scopedSlots:t._u([{key:"overlay",fn:function(){return[a("a-menu",{staticClass:"ant-pro-drop-down menu",attrs:{"selected-keys":[]}},[t.menu?a("a-menu-divider"):t._e(),a("a-menu-item",{key:"setting",on:{click:t.handleSetting}},[a("a-icon",{attrs:{type:"schedule"}}),t._v("用户设置")],1),a("a-menu-item",{key:"logout",on:{click:t.handleLogout}},[a("a-icon",{attrs:{type:"logout"}}),t._v("退出登录 ")],1)],1)]},proxy:!0}],null,!1,482058069)},[a("span",{staticClass:"ant-pro-account-avatar"},[a("a-avatar",{staticClass:"antd-pro-global-header-index-avatar",attrs:{size:"small",src:t.url}}),a("span",[t._v(t._s(t.currentUser.name))])],1)]):a("span",[a("a-spin",{style:{marginLeft:8,marginRight:8},attrs:{size:"small"}})],1)},P=[],q=(a("cd17"),a("ed3b")),R=a("0dbc"),T={components:{ChangePsd:R["a"]},name:"AvatarDropdown",props:{currentUser:{type:Object,default:function(){return null}},menu:{type:Boolean,default:!0}},data:function(){return{url:"timg.jpg",visible:!1,confirmLoading:!1,mdl:null}},methods:{handleToCenter:function(){this.$router.push({path:"/account/center"})},handleToSettings:function(){this.$router.push({path:"/account/settings"})},handleSetting:function(){this.$router.push({path:"/safety/setting"})},handleLogout:function(t){var e=this;q["a"].confirm({title:"提醒",content:"确认退出登录！",okText:"确认",cancelText:"取消",onOk:function(){return e.$store.dispatch("Logout").then((function(t){window.location.href=t}))},onCancel:function(){}})},handleChangePassword:function(){this.$refs.changeModal.modalshow()}}},E=T,M=(a("f06c"),Object(m["a"])(E,j,P,!1,null,"ea4446f0",null)),G=M.exports,A=a("da7d"),N={name:"RightContent",components:{AvatarDropdown:G,SelectLang:A["a"]},props:{prefixCls:{type:String,default:"ant-pro-global-header-index-action"},isMobile:{type:Boolean,default:function(){return!1}},topMenu:{type:Boolean,required:!0},theme:{type:String,required:!0},menutype:{type:String,default:"instrument"}},data:function(){return{showMenu:!0,currentUser:{},menukey:[this.menutype]}},computed:{wrpCls:function(){return Object($["a"])({"ant-pro-global-header-index-right":!0},"ant-pro-global-header-index-".concat(this.isMobile||!this.topMenu?"light":this.theme),!0)}},mounted:function(){var t=this;setTimeout((function(){t.currentUser={name:t.$store.getters.userInfo.name}}),1500)},methods:{handleJump:function(t){t.key&&this.$emit("system-change",t.key)}}},B=N,F=Object(m["a"])(B,I,D,!1,null,null,null),z=F.exports,V=a("ddaf"),K=a("739a"),U=a("bb57"),Y=a.n(U),H=a("12af"),Q=a.n(H),J=a("8c30"),W=a.n(J),Z=a("fbf0"),X=a.n(Z),tt=a("025b"),et=a.n(tt),at={name:"BasicLayout",components:{SettingDrawer:_["c"],RightContent:z,GlobalFooter:V["a"],Ads:K["a"]},data:function(){return{menutype:"",isProPreviewSite:!1,menus:[],schoolName:"",collapsed:!1,title:L["a"].title,titles:{schedule:"实验室管理系统",instrument:"仪器设备共享管理软件",laboratory:"实验室管理软件",electronic:"电子班牌",management:"综合管理平台",safety:"实验室安全"},settings:{layout:L["a"].layout,contentWidth:"sidemenu"===L["a"].layout?O["c"].Fluid:L["a"].contentWidth,theme:L["a"].navTheme,primaryColor:L["a"].primaryColor,fixedHeader:L["a"].fixedHeader,fixSiderbar:L["a"].fixSiderbar,colorWeak:L["a"].colorWeak,hideHintAlert:!1,hideCopyButton:!1},query:{},isMobile:!1}},computed:Object(C["a"])({},Object(S["mapState"])({mainMenu:function(t){return t.permission.addRouters}})),created:function(){var t=this;this.menutype=this.$store.getters.menu;var e="";"safety"==this.menutype?(this.title=" 实验室安全信息系统",e=this.mainMenu.find((function(t){return"/"===t.path}))):(this.title=this.titles[this.menutype],e=this.mainMenu.find((function(e){return e.path==="/".concat(t.menutype)}))),this.menus=e&&e.children||[],this.$watch("collapsed",(function(){t.$store.commit(O["e"],t.collapsed)})),this.$watch("isMobile",(function(){t.$store.commit(O["n"],t.isMobile)}))},mounted:function(){var t=this,e=navigator.userAgent;this.schoolName=this.$store.getters.schoolname.name,e.indexOf("Edge")>-1&&this.$nextTick((function(){t.collapsed=!t.collapsed,setTimeout((function(){t.collapsed=!t.collapsed}),16)}))},methods:{systemchange:function(t){var e=this;if("safety"==t){this.title=" 实验室安全信息系统";var a=this.mainMenu.find((function(t){return"/"===t.path}));this.menus=a&&a.children||[],this.$watch("collapsed",(function(){e.$store.commit(O["e"],e.collapsed)})),this.$watch("isMobile",(function(){e.$store.commit(O["n"],e.isMobile)})),this.$store.commit(O["f"],"safety"),this.menutype="safety",this.$router.push({path:"/"})}else{this.title=this.titles[t];var n=this.mainMenu.find((function(e){return e.path==="/".concat(t)}));this.menus=n&&n.children||[],this.$watch("collapsed",(function(){e.$store.commit(O["e"],e.collapsed)})),this.$watch("isMobile",(function(){e.$store.commit(O["n"],e.isMobile)})),this.$store.commit(O["f"],"".concat(t)),this.menutype="".concat(t),this.$router.push({path:"/".concat(t)})}},i18nRender:w["a"],handleMediaQuery:function(t){this.query=t,!this.isMobile||t["screen-xs"]?!this.isMobile&&t["screen-xs"]&&(this.isMobile=!0,this.collapsed=!1,this.settings.contentWidth=O["c"].Fluid):this.isMobile=!1},handleCollapse:function(t){this.collapsed=t},handleSettingChange:function(t){var e=t.type,a=t.value;switch(e&&(this.settings[e]=a),e){case"contentWidth":this.settings[e]="Fixed"===a;break;case"layout":"sidemenu"===a?this.settings.contentWidth=O["c"].Fluid:(this.settings.fixSiderbar=!1,this.settings.contentWidth=O["c"].Fixed);break}},logoRender:function(){var t=this.$createElement;return"instrument"==this.menutype?t(Y.a):"schedule"==this.menutype?t(X.a):"management"==this.menutype?t(Q.a):"electronic"==this.menutype?t(et.a):t(W.a)}}},nt=at,it=(a("6692"),Object(m["a"])(nt,k,x,!1,null,null,null)),ot=(it.exports,{name:"RouteView",props:{keepAlive:{type:Boolean,default:!0}},data:function(){return{}},render:function(){var t=arguments[0],e=this.$route.meta,a=this.$store.getters,n=t("keep-alive",[t("router-view")]),i=t("router-view");return(a.multiTab||e.keepAlive)&&(this.keepAlive||a.multiTab||e.keepAlive)?n:i}}),lt=ot,rt=Object(m["a"])(lt,n,i,!1,null,null,null),st=rt.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-header-wrapper",[a("router-view")],1)},dt=[],ut={name:"PageView"},ht=ut,mt=Object(m["a"])(ht,ct,dt,!1,null,null,null),ft=(mt.exports,{components:{RouteView:st},data:function(){return{mode:"inline",openKeys:[],selectedKeys:[],preview:{},pageTitle:""}},mounted:function(){this.updateMenu()},methods:{onOpenChange:function(t){this.openKeys=t},updateMenu:function(){var t=this.$route.matched.concat();this.selectedKeys=[t.pop().path]}},watch:{$route:function(t){this.updateMenu()}}}),pt=ft,bt=(a("0527"),Object(m["a"])(pt,o,l,!1,null,"0690a98a",null));e["default"]=bt.exports},"69f5":function(t,e,a){},"6a0b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:800,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"Form",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"实验分室名称",prop:"name"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("a-form-model-item",{attrs:{label:"编号",prop:"code"}},[a("a-input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),a("a-form-model-item",{attrs:{label:"建立时间",prop:"createTime"}},[a("a-date-picker",{on:{change:t.onChange},model:{value:t.form.buildTime,callback:function(e){t.$set(t.form,"buildTime",e)},expression:"form.buildTime"}})],1),a("a-form-model-item",{attrs:{label:"所在校区",prop:"schoolRegionCode"}},[a("a-select",{model:{value:t.form.schoolRegionCode,callback:function(e){t.$set(t.form,"schoolRegionCode",e)},expression:"form.schoolRegionCode"}},t._l(t.regions,(function(e){return a("a-select-option",{key:e.code},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"实验室建设备注",prop:""}},[a("a-select",{model:{value:t.form.buildingRemarkCode,callback:function(e){t.$set(t.form,"buildingRemarkCode",e)},expression:"form.buildingRemarkCode"}},t._l(t.labCategory,(function(e){return a("a-select-option",{key:e.key},[t._v(" "+t._s(e.value)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"实验室类型",prop:"typeCode"}},[a("a-select",{model:{value:t.form.typeCode,callback:function(e){t.$set(t.form,"typeCode",e)},expression:"form.typeCode"}},t._l(t.labTypes,(function(e){return a("a-select-option",{key:e.key},[t._v(" "+t._s(e.value)+" "),"其他"===e.value?a("span",[t._v("（实验准备，仓库，仪器室等）")]):t._e()])})),1)],1),a("a-form-model-item",{attrs:{label:"地点",prop:"address"}},[a("a-input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),a("a-form-model-item",{attrs:{label:"使用面积",prop:""}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:t.form.usageArea,callback:function(e){t.$set(t.form,"usageArea",e)},expression:"form.usageArea"}})],1),a("a-form-model-item",{attrs:{label:"属性",prop:""}},[a("a-select",{model:{value:t.form.property,callback:function(e){t.$set(t.form,"property",e)},expression:"form.property"}},t._l(t.labBranchProperty,(function(e){return a("a-select-option",{key:e.key},[t._v(" "+t._s(e.value)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[a("a-textarea",{attrs:{rows:"4"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},i=[],o=a("c1df"),l=a.n(o),r=a("9d2c"),s=a("788a"),c={components:{dragModal:r["a"]},data:function(){return{title:"新建实验分室",visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},form:{name:"",buildTime:l()(),laboratoryCode:"",laboratoryGuid:"",schoolRegionCode:"",address:"",usageArea:0,property:"",code:"",typeCode:"",buildingRemarkCode:""},type:1,rules:{name:[{required:!0,message:"实验分室名称不能为空",trigger:"blur"}],code:[{required:!0,message:"编号不能为空",trigger:"blur"}],typeCode:[{required:!0,message:"类型不能为空",trigger:"change"}],schoolRegionCode:[{required:!0,message:"校区不能为空",trigger:"change"}],address:[{required:!0,message:"地址不能为空",trigger:"blur"}]},labBranchProperty:[],regions:[],labTypes:[],labCategory:[]}},created:function(){this.handleInit()},methods:{moment:l.a,handleInit:function(){var t=this;Object(s["D"])({PropertyKey:"BuildingRemark"}).then((function(e){t.labCategory=e.items})),Object(s["D"])({PropertyKey:"labBranchProperty"}).then((function(e){t.labBranchProperty=e.items})),Object(s["S"])().then((function(e){t.regions=e.items})),Object(s["D"])({PropertyKey:"laboratoryType"}).then((function(e){t.labTypes=e.items;var a=t.labTypes.shift();t.labTypes.push(a)}))},modalshow:function(t,e,a){var n=this;if(this.type=t,1==this.type){this.form.laboratoryCode=e.code,this.form.laboratoryGuid=e.guid,this.form.collegeGuid=e.collegeGuid,this.form.labCenterGuid=e.labCenterGuid,this.title="新建实验分室";var i={parentCode:this.form.laboratoryCode,parentGuid:this.form.laboratoryGuid,type:3};Object(s["E"])(i).then((function(t){n.form.code=t}))}else 2==this.type&&(this.title="编辑实验分室",this.form=a);this.visible=!0},handleOk:function(){var t=this;this.btnloading=!0,this.$refs.Form.validate((function(e){if(!e)return t.btnloading=!1,!1;1==t.type?Object(s["c"])(t.form).then((function(e){t.btnloading=!1,t.visible=!1,t.$emit("ok"),t.form={name:"",buildTime:l()(),laboratoryCode:"",laboratoryGuid:"",schoolRegionCode:"",address:"",usageArea:0,property:"",code:"",typeCode:"",buildingRemarkCode:""},t.$refs.Form.resetFields()})).catch((function(e){setTimeout((function(){t.btnloading=!1}),1e3)})):2==t.type&&Object(s["t"])(t.form).then((function(e){t.btnloading=!1,t.visible=!1,t.$emit("ok"),t.form={name:"",buildTime:l()(),laboratoryCode:"",laboratoryGuid:"",schoolRegionCode:"",address:"",usageArea:0,property:"",code:""},t.$refs.Form.resetFields()})).catch((function(e){setTimeout((function(){t.btnloading=!1}),1e3)}))}))},handleCancel:function(){this.visible=!1,this.btnloading=!1,this.form={name:"",buildTime:l()(),laboratoryCode:"",laboratoryGuid:"",schoolRegionCode:"",address:"",usageArea:0,property:"",code:"",typeCode:"",buildingRemarkCode:""},this.$refs.Form.resetFields()},onChange:function(t,e){}}},d=c,u=a("2877"),h=Object(u["a"])(d,n,i,!1,null,null,null);e["a"]=h.exports},"6a7e":function(t,e,a){"use strict";a.d(e,"pb",(function(){return i})),a.d(e,"ob",(function(){return o})),a.d(e,"ub",(function(){return l})),a.d(e,"z",(function(){return r})),a.d(e,"A",(function(){return s})),a.d(e,"W",(function(){return c})),a.d(e,"Z",(function(){return d})),a.d(e,"i",(function(){return u})),a.d(e,"lb",(function(){return h})),a.d(e,"tb",(function(){return m})),a.d(e,"t",(function(){return f})),a.d(e,"w",(function(){return p})),a.d(e,"L",(function(){return b})),a.d(e,"jb",(function(){return g})),a.d(e,"K",(function(){return v})),a.d(e,"P",(function(){return y})),a.d(e,"O",(function(){return k})),a.d(e,"d",(function(){return x})),a.d(e,"ib",(function(){return C})),a.d(e,"V",(function(){return _})),a.d(e,"h",(function(){return w})),a.d(e,"o",(function(){return S})),a.d(e,"q",(function(){return O})),a.d(e,"s",(function(){return L})),a.d(e,"B",(function(){return I})),a.d(e,"S",(function(){return D})),a.d(e,"T",(function(){return $})),a.d(e,"X",(function(){return j})),a.d(e,"Y",(function(){return P})),a.d(e,"eb",(function(){return q})),a.d(e,"p",(function(){return R})),a.d(e,"b",(function(){return T})),a.d(e,"nb",(function(){return E})),a.d(e,"sb",(function(){return M})),a.d(e,"qb",(function(){return G})),a.d(e,"a",(function(){return A})),a.d(e,"l",(function(){return N})),a.d(e,"x",(function(){return B})),a.d(e,"Q",(function(){return F})),a.d(e,"g",(function(){return z})),a.d(e,"db",(function(){return V})),a.d(e,"m",(function(){return K})),a.d(e,"M",(function(){return U})),a.d(e,"N",(function(){return Y})),a.d(e,"kb",(function(){return H})),a.d(e,"n",(function(){return Q})),a.d(e,"e",(function(){return J})),a.d(e,"D",(function(){return W})),a.d(e,"ab",(function(){return Z})),a.d(e,"mb",(function(){return X})),a.d(e,"fb",(function(){return tt})),a.d(e,"rb",(function(){return et})),a.d(e,"u",(function(){return at})),a.d(e,"gb",(function(){return nt})),a.d(e,"J",(function(){return it})),a.d(e,"y",(function(){return ot})),a.d(e,"v",(function(){return lt})),a.d(e,"F",(function(){return rt})),a.d(e,"f",(function(){return st})),a.d(e,"bb",(function(){return ct})),a.d(e,"j",(function(){return dt})),a.d(e,"I",(function(){return ut})),a.d(e,"hb",(function(){return ht})),a.d(e,"c",(function(){return mt})),a.d(e,"k",(function(){return ft})),a.d(e,"G",(function(){return pt})),a.d(e,"H",(function(){return bt})),a.d(e,"cb",(function(){return gt})),a.d(e,"C",(function(){return vt})),a.d(e,"U",(function(){return yt})),a.d(e,"E",(function(){return kt})),a.d(e,"R",(function(){return xt})),a.d(e,"r",(function(){return Ct}));var n=a("81a0");function i(t){return Object(n["a"])({url:"/app/materials/uploadFile",method:"post",data:t})}function o(){return Object(n["a"])({url:"/app/workbench/todoList",method:"get"})}function l(){return Object(n["a"])({url:"/app/workbench/workbenchStatisticalData",method:"get"})}function r(t){return Object(n["a"])({url:"/app/securityCheckEvent",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/app/securityCheckEvent/"+t,method:"get"})}function c(t){return Object(n["a"])({url:"/app/securityCheckEvent",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/app/securityCheckEvent/"+t.id,method:"put",data:t})}function u(t){return Object(n["a"])({url:"/app/securityCheckEvent/"+t,method:"delete"})}function h(t){return Object(n["a"])({url:"/app/securityCheckEvent/"+t+"/submitCollegeSelfCheckInfo",method:"post"})}function m(t){return Object(n["a"])({url:"/app/securityCheckEvent/verityCollegeCheckEvent",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/app/securityCheckEventParentItem/exportCollegeCheckEvent/info",method:"post",params:t,responseType:"blob"})}function p(t){return Object(n["a"])({url:"/app/securityCheckEventParentItem/exportCollegeCheckEventDanger/info",method:"post",params:t,responseType:"blob"})}function b(t){return Object(n["a"])({url:"/app/securityCheckEventParentItem/eventItem/"+t.parentId,method:"get"})}function g(t){return Object(n["a"])({url:"/app/securityCheckEventParentItem/setEventItem",method:"post",data:t})}function v(t){return Object(n["a"])({url:"/app/securityCheckEventParentItem/eventDetail/"+t,method:"get"})}function y(){return Object(n["a"])({url:"/app/securityCheckBook/",method:"get"})}function k(t){return Object(n["a"])({url:"/app/securityCheckBook/"+t,method:"get"})}function x(t){return Object(n["a"])({url:"/app/securityCheckBook/changeStatus",method:"post",data:t})}function C(t){return Object(n["a"])({url:"/app/securityCheckBook/setDefaultSecurityBook",method:"post",data:t})}function _(t,e){return Object(n["a"])({url:"/app/securityCheckBook/import/"+t,method:"post",data:e})}function w(t){return Object(n["a"])({url:"/app/securityCheckBook/",method:"post",data:t})}function S(t){return Object(n["a"])({url:"/app/securityCheckBook/"+t,method:"delete"})}function O(t){return Object(n["a"])({url:"/app/securityCheckBook/"+t.id,method:"put",data:t})}function L(t){return Object(n["a"])({url:"/app/SecurityCheckBook/exportCheckBook",method:"get",params:t,responseType:"blob"})}function I(t){return Object(n["a"])({url:"/app/securityCheckEventParentItem/collegeCheckInfo/",method:"get",params:t})}function D(t){return Object(n["a"])({url:"/app/eventHiddenDanger",method:"get",params:t})}function $(t){return Object(n["a"])({url:"/app/eventHiddenDanger/"+t,method:"get"})}function j(t){return Object(n["a"])({url:"/app/eventHiddenDanger",method:"post",data:t})}function P(t){return Object(n["a"])({url:"/app/eventHiddenDanger/batchCreate",method:"post",data:t})}function q(t,e){return Object(n["a"])({url:"/app/eventHiddenDanger/"+e,method:"put",data:t})}function R(t){return Object(n["a"])({url:"/app/eventHiddenDanger/"+t,method:"delete"})}function T(t){return Object(n["a"])({url:"/app/securityCheckEventParentItem/setAllCheckItem/"+t.parentItemId,method:"post",data:t})}function E(t){return Object(n["a"])({url:"/app/eventHiddenDanger/submitEventHiddenDanger",method:"post",data:t})}function M(t){return Object(n["a"])({url:"/app/eventHiddenDanger/verityEventHiddenDanger",method:"post",data:t})}function G(t){return Object(n["a"])({url:"/app/eventHiddenDanger/uploadImage",method:"post",data:t})}function A(t){return Object(n["a"])({url:"/app/hiddenDangerPhoto",method:"post",data:t})}function N(t){return Object(n["a"])({url:"/app/hiddenDangerPhoto/"+t,method:"delete"})}function B(t){return Object(n["a"])({url:"/app/securityCheckEventParentItem/exportCollegeCheckEventDanger/info",method:"post",params:t,responseType:"blob"})}function F(t){return Object(n["a"])({url:"/app/laboratoryOpenPlan/openPlan",method:"get",params:t})}function z(t){return Object(n["a"])({url:"/app/laboratoryOpenPlan",method:"post",data:t})}function V(t){return Object(n["a"])({url:"/app/laboratoryOpenPlan/"+t.id,method:"put",data:t})}function K(t){return Object(n["a"])({url:"/app/laboratoryOpenPlan/"+t.id,method:"delete"})}function U(t){return Object(n["a"])({url:"/app/laboratoryOpenPlan/"+t,method:"get"})}function Y(t){return Object(n["a"])({url:"/app/openPlanCustomerField",method:"get",params:t})}function H(t){return Object(n["a"])({url:"/app/openPlanCustomerField",method:"post",data:t})}function Q(t){return Object(n["a"])({url:"/app/openPlanCustomerField/"+t,method:"delete"})}function J(t,e){return Object(n["a"])({url:"/app/openPlanCustomerField/"+e,method:"put",data:t})}function W(t){return Object(n["a"])({url:"/app/laboratoryOpenPlan/departmentOpenPlan",method:"get",params:t})}function Z(t){return Object(n["a"])({url:"/app/laboratoryOpenPlan/departmentOpenPlan",method:"put",data:t})}function X(t){return Object(n["a"])({url:"/app/laboratoryOpenPlan/"+t+"/submitDepartmentPlan",method:"post"})}function tt(t){return Object(n["a"])({url:"/app/laboratoryOpenPlan/"+t+"/revokeDepartmentPlan",method:"post"})}function et(t){return Object(n["a"])({url:"/app/laboratoryOpenPlan/verifyDepartmentPlan",method:"post",data:t})}function at(t){return Object(n["a"])({url:"/LaboratoryOpenPlan/Export/OpenPlanInfo",method:"post",params:t,responseType:"blob"})}function nt(t){return Object(n["a"])({url:"/app/laboratoryOpenPlan/laboratoryToPlan",method:"post",data:t})}function it(t){return Object(n["a"])({url:"/app/eventHiddenDanger/hiddenDangerSummaryGraph",method:"get",params:t})}function ot(t){return Object(n["a"])({url:"/app/eventHiddenDanger/branchHiddenDangerNumRank",method:"get",params:t})}function lt(t){return Object(n["a"])({url:"/app/customStatistics/Export",method:"get",params:t,responseType:"blob"})}function rt(t){return Object(n["a"])({url:"/app/customStatistics/getAll",method:"get",params:t})}function st(t){return Object(n["a"])({url:"/app/customStatistics",method:"post",data:t})}function ct(t){return Object(n["a"])({url:"/app/customStatistics/"+t.id,method:"put",data:t})}function dt(t){return Object(n["a"])({url:"/app/customStatistics/"+t.id,method:"delete"})}function ut(t){return Object(n["a"])({url:"/app/customStatisticsCustomerField",method:"get",params:t})}function ht(t){return Object(n["a"])({url:"/app/customStatisticsCustomerField",method:"post",data:t})}function mt(t,e){return Object(n["a"])({url:"/app/customStatisticsCustomerField/"+e,method:"put",data:t})}function ft(t){return Object(n["a"])({url:"/app/customStatisticsCustomerField/"+t,method:"delete"})}function pt(t){return Object(n["a"])({url:"/app/customStatistics/"+t.id,method:"get"})}function bt(t){return Object(n["a"])({url:"/app/customStatistics/departmentCustomStatistics/"+t.customStatisticsId,method:"get"})}function gt(t){return Object(n["a"])({url:"/app/customStatistics/customStatisticsValue",method:"put",data:t})}function vt(t){return Object(n["a"])({url:"/app/eventHiddenDanger/HiddenDangerStatistics",method:"get",params:t})}function yt(t){return Object(n["a"])({url:"/app/laboratoryBranch/schoolLabDataStatistics",method:"get",params:t})}function kt(t){return Object(n["a"])({url:"/app/laboratoryBranch/CollegeLaboratoryDataStatistics",method:"get",params:t})}function xt(){return Object(n["a"])({url:"/app/laboratoryBranch/collegeRiskSourceStatistics",method:"get"})}function Ct(t){return Object(n["a"])({url:"app/laboratoryInfo/exportLabBranch/data",method:"get",data:t,responseType:"blob"})}},"6eb3":function(t,e,a){},"6f56":function(t,e,a){},"70ba":function(t,e,a){"use strict";var n=a("d71a"),i=a.n(n);i.a},"71bf":function(t,e,a){"use strict";var n=a("05a0"),i=a.n(n);i.a},"71ca":function(t,e,a){},7425:function(t,e,a){"use strict";var n=a("10f8"),i=a.n(n);i.a},"75d9":function(t,e,a){},"7cb8":function(t,e,a){"use strict";var n=a("3fa2"),i=a.n(n);i.a},"7cd9":function(t,e,a){"use strict";var n=a("82cd"),i=a.n(n);i.a},"82bc":function(t,e,a){"use strict";var n=a("b6cf"),i=a.n(n);i.a},"82cd":function(t,e,a){},"8459c":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"laboratory-base"},[a("a-layout-header",{staticClass:"l_header",attrs:{id:"l_header"}},[a("div",{staticClass:"l_header_top"},[a("div",{staticClass:"head-title"},[a("div",{staticStyle:{height:"20px","line-height":"20px"}},[a("a-breadcrumb-item",[t._v(" "+t._s(t.labbranchinfo.collegeName))]),a("a-breadcrumb-item",[t._v(" "+t._s(t.labbranchinfo.labCenterName))]),a("a-breadcrumb-item",[t._v(" "+t._s(t.labbranchinfo.laboratoryName))])],1),a("span",{staticClass:"title"},[t._v(t._s(t.labbranchinfo.name))]),t._v(" "),t.labbranchinfo.status||t.tableLoading?t.labbranchinfo.status&&!t.tableLoading?a("a-tag",{staticStyle:{"margin-left":"20px"},attrs:{color:"#108ee9",type:"primary"}},[t._v("已启用")]):t._e():a("a-tag",{staticStyle:{"margin-left":"20px"},attrs:{color:"#f50"}},[t._v("已停用")]),"heightDetail"==t.formType?a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",icon:"rollback"},on:{click:function(){return t.$router.back(-1)}}},[t._v("返回")]):t._e()],1),a("div",{staticClass:"l_header_extra"},[t._l(t.responsible,(function(e,n){return a("span",{key:n,staticClass:"code"},[t._v(t._s(e.teacherName))])})),a("a-button",{attrs:{size:"small"},on:{click:t.handleEdit}},[t._v(" 编辑 ")]),t._v(" "),a("a-button",{attrs:{size:"small"},on:{click:t.handleQRCode}},[t._v(" 二维码 ")]),t._v(" "),a("a-button",{attrs:{size:"small"},on:{click:t.handleCard}},[t._v(" 安全责任牌 ")]),t._v(" "),t.labbranchinfo.status?a("a-button",{directives:[{name:"action",rawName:"v-action:SchoolAdministratory",arg:"SchoolAdministratory"}],attrs:{type:"danger",size:"small"},on:{click:function(e){return t.causeEnable(2,t.labbranchinfo.id)}}},[t._v("停用")]):a("a-button",{directives:[{name:"action",rawName:"v-action:SchoolAdministratory",arg:"SchoolAdministratory"}],attrs:{size:"small",type:"primary"},on:{click:function(e){return t.causeEnable(1,t.labbranchinfo.id)}}},[t._v("启用")]),t._v(" "),a("a-button",{attrs:{size:"small"},on:{click:function(e){return t.causeList()}}},[t._v("日志")])],2)]),a("div",{staticClass:"l_header_remark"},[a("p",[t._v(t._s(t.labbranchinfo.remark))])]),a("div",{staticClass:"descipt"},[a("a-descriptions",{attrs:{bordered:"",column:2}},[a("a-descriptions-item",{attrs:{label:"所属实验室"}},[t._v(" "+t._s(t.labbranchinfo.laboratoryName)+" ")]),a("a-descriptions-item",{attrs:{label:"类型"}},[t._v(" "+t._s(t.labbranchinfo.typeName))]),a("a-descriptions-item",{attrs:{label:"所在校区"}},[t._v(" "+t._s(t.labbranchinfo.schoolRegionName)+" ")]),a("a-descriptions-item",{attrs:{label:"属性"}},[t._v(" "+t._s(t.labbranchinfo.propertyName)+" ")]),a("a-descriptions-item",{attrs:{label:"地址"}},[t._v(" "+t._s(t.labbranchinfo.address))]),a("a-descriptions-item",{attrs:{label:"实验室建设备注"}},[t._v(" "+t._s(t.labbranchinfo.buildingRemarkName))]),a("a-descriptions-item",{attrs:{label:"使用面积"}},[t._v(" "+t._s(t.labbranchinfo.usageArea)+" ")]),a("a-descriptions-item",{attrs:{label:"建立时间"}},[t._v(t._s(t.moment(t.labbranchinfo.buildTime).format("YYYY-MM-DD")))])],1),a("div",{staticClass:"response"},[a("a-button",{staticClass:"add",attrs:{size:"small",type:"primary",title:"新增"},on:{click:function(e){return t.handleAddAdmin()}}},[t._v("新增")]),a("a-table",{staticClass:"l_table2",attrs:{columns:t.responsecolumns,"data-source":t.responsible,pagination:!1,rowKey:"id"},scopedSlots:t._u([{key:"education",fn:function(e,n){return[a("span",[t._v(t._s(e.education))]),t._v("/"),a("span",[t._v(t._s(e.jobTitle))])]}},{key:"action",fn:function(e,n){return[a("a-button",{staticStyle:{"margin-right":"5px"},attrs:{shape:"circle",icon:"edit",size:"small",title:"编辑"},on:{click:function(e){return t.handleEditAdmin(n)}}}),a("a-popconfirm",{attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.handleDeleteAdmin(n.id)}}},[a("a-button",{staticStyle:{"margin-right":"5px",color:"red"},attrs:{shape:"circle",icon:"delete",size:"small",title:"删除"}})],1)]}}])})],1),a("div",{staticClass:"response"},[a("a-button",{staticClass:"add",attrs:{type:"primary",size:"small",title:"新增"},on:{click:function(e){return t.handleAddSafeAdmin()}}},[t._v("新增")]),a("a-table",{staticClass:"l_table2",attrs:{columns:t.safecolumns,"data-source":t.safetyResponsible,pagination:!1,rowKey:"id"},scopedSlots:t._u([{key:"education",fn:function(e,n){return[a("span",[t._v(t._s(e.education)+"/"+t._s(e.jobTitle))])]}},{key:"action",fn:function(e,n){return[a("a-button",{staticStyle:{"margin-right":"5px"},attrs:{shape:"circle",icon:"edit",size:"small",title:"编辑"},on:{click:function(e){return t.handleEditAdmin(n)}}}),a("a-popconfirm",{attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.handleDeleteAdmin(n.id)}}},[a("a-button",{staticStyle:{"margin-right":"5px",color:"red"},attrs:{shape:"circle",icon:"delete",size:"small",title:"删除"}})],1)]}}])})],1)],1)]),a("a-layout-content",[a("a-card",{staticClass:"l_content"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("危险源（级别："+t._s(this.labbranchinfo.riskLevel)+"）")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{directives:[{name:"action",rawName:"v-action:SchoolAdministratory",arg:"SchoolAdministratory"}],attrs:{icon:"edit"},on:{click:t.handleEditRiskSourse}},[t._v("编辑")])],1),a("a-row",t._l(this.riskSourseList,(function(e){return a("div",{key:e.id,staticClass:"labQualityInfo",staticStyle:{display:"inline"}},[a("a-tag",{staticStyle:{"margin-right":"20px","margin-bottom":"10px"},attrs:{color:"#e6f7ff"}},[t._v(t._s(e))])],1)})),0)],1),a("a-card",{staticClass:"l_content"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("防护措施")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{attrs:{icon:"edit"},on:{click:t.handleEditProtectMeasures}},[t._v("编辑")])],1),a("a-row",t._l(this.protectiveMeasuresList,(function(e){return a("div",{key:e.id,staticClass:"labQualityInfo",staticStyle:{display:"inline"}},[a("a-tag",{staticStyle:{"margin-right":"20px","margin-bottom":"10px"},attrs:{color:"#e6f7ff"}},[t._v(t._s(e))])],1)})),0)],1),a("a-card",{staticClass:"l_content"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("灭火要点")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{attrs:{icon:"edit"},on:{click:t.handleEditExtinguishingPoints}},[t._v("编辑")])],1),a("a-row",t._l(this.extinguishingPointsList,(function(e){return a("div",{key:e.id,staticClass:"labQualityInfo",staticStyle:{display:"inline"}},[a("a-tag",{staticStyle:{"margin-right":"20px","margin-bottom":"10px"},attrs:{color:"#e6f7ff"}},[t._v(t._s(e))])],1)})),0)],1),a("a-card",{staticClass:"l_content"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("特种设备")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{attrs:{icon:"plus"},on:{click:function(e){return t.handleCreateOrUpdateLabSpEquipment(null)}}},[t._v("新增")])],1),a("a-table",{attrs:{rowKey:function(t){return t.id},loading:t.tableLoading,columns:t.specialcolumns,pagination:{defaultPageSize:5},"data-source":t.labSpEquipments},scopedSlots:t._u([{key:"inspectionDate",fn:function(e){return[t._v(" "+t._s(t.moment(e).format("YYYY/MM/DD"))+" ")]}},{key:"status",fn:function(e){return[a("a-tag",{attrs:{color:0==e?"green":1==e||2==e?"orange":"red"}},[t._v(" "+t._s(t.statusToString[e])+" ")])]}},{key:"action",fn:function(e,n){return[a("a-button",{staticStyle:{"margin-right":"5px"},attrs:{shape:"circle",icon:"edit",size:"small",title:"编辑"},on:{click:function(e){return t.handleCreateOrUpdateLabSpEquipment(n.id)}}}),a("a-popconfirm",{attrs:{title:"确定要删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.handleDeleteLabSpEquipment(n.id)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{shape:"circle",icon:"delete",size:"small",title:"删除"}})],1)]}}])})],1),a("a-card",{staticClass:"l_content"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("危险品")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{attrs:{icon:"plus"},on:{click:function(e){return t.handleCreateLabDangerousGoods(t.labBranchGuid)}}},[t._v("新增")])],1),a("a-table",{attrs:{rowKey:function(t){return t.id},loading:t.tableLoading,columns:t.riskscolumns,pagination:{defaultPageSize:5},"data-source":t.dangerousgoodsList},scopedSlots:t._u([{key:"type",fn:function(e,n){return a("span",{},[[0==n.type?a("span",[t._v("液体 ")]):1==n.type?a("span",[t._v("固体 ")]):2==n.type?a("span",[t._v("气体 ")]):t._e()]],2)}},{key:"action",fn:function(e,n){return[a("a-button",{staticStyle:{"margin-right":"5px"},attrs:{shape:"circle",icon:"edit",size:"small"},on:{click:function(e){return t.handleEditDangerousGoods(n)}}}),a("a-popconfirm",{attrs:{title:"确定要删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.handleDeleteDangerousgoods(n.id)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{shape:"circle",icon:"delete",size:"small"}})],1)]}}])})],1),a("a-card",{staticClass:"l_content"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("实验内容")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit(t.description)}}},[t._v("保存")])],1),a("div",[a("a-textarea",{attrs:{placeholder:"添加实验内容",rows:6},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)])],1),a("edit-branch",{ref:"editbranch",on:{ok:t.handleOk}}),a("create-teacher",{ref:"editteacher",on:{ok:t.handleOk}}),a("edit-school-admin",{ref:"editadminmodules",on:{ok:t.handlePersonOk}}),a("edit-lab-quality",{ref:"editquality",on:{ok:t.handleOk}}),a("edit-risksourse",{ref:"editrisksourse",on:{ok:t.handleOk}}),a("edit-protect-measures",{ref:"editprotectmeasures",on:{ok:t.handleOk}}),a("edit-extinguishing-points",{ref:"editextinguishingpoints",on:{ok:t.handleOk}}),a("createOrUpdate-labSpEquipment",{ref:"createOrUpdateLabSpEquipment",on:{ok:t.handleOk}}),a("create-dangerousgoods",{ref:"createdangerousgoods",on:{ok:t.handleOk}}),a("edit-dangerousgoods",{ref:"editdangerousgoods",on:{ok:t.handleOk}}),a("cause-branch",{ref:"causebranch",on:{ok:t.handleOk}}),a("cause-list-branch",{ref:"causelistbranch",on:{ok:t.handleOk}})],1)},i=[],o=(a("a4d3"),a("e01a"),a("2af9")),l=a("c1df"),r=a.n(l),s=a("788a"),c=a("6a0b"),d=a("2c77"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{staticClass:"editlabquality",attrs:{width:1e3,title:"实验室资质",visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-checkbox-group",{attrs:{name:"checkboxgroup",options:t.Moptions},on:{change:t.onChange},model:{value:t.qualityList,callback:function(e){t.qualityList=e},expression:"qualityList"}})],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},h=[],m=(a("4160"),a("159b"),a("9d2c")),f=a("cf1d"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{width:"900px",title:"监控",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:16}}},[a("a-row",[a("a-col",{attrs:{span:9,offset:2}},[a("a-form-item",{attrs:{label:"名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:t.detailinfo.name}],expression:"['name',{initialValue:detailinfo.name}]"}]})],1)],1),a("a-col",{attrs:{span:9}},[a("a-form-item",{attrs:{label:"IP地址"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ipAddress",{initialValue:t.detailinfo.ipAddress}],expression:"['ipAddress',{initialValue:detailinfo.ipAddress}]"}]})],1)],1),a("a-col",{attrs:{span:9,offset:2}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loginName",{initialValue:t.detailinfo.loginName}],expression:"['loginName',{initialValue:detailinfo.loginName}]"}]})],1)],1),a("a-col",{attrs:{span:9}},[a("a-form-item",{attrs:{label:"密码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loginPassword",{initialValue:t.detailinfo.loginPassword}],expression:"['loginPassword',{initialValue:detailinfo.loginPassword}]"}]})],1)],1),a("a-col",{attrs:{span:9,offset:2}},[a("a-form-item",{attrs:{label:"监控点编号"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["port",{initialValue:t.detailinfo.port}],expression:"['port',{initialValue:detailinfo.port}]"}]})],1)],1),a("a-col",{attrs:{span:9}},[a("a-form-item",{attrs:{label:"分组"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["groupCode",{initialValue:t.detailinfo.groupName}],expression:"['groupCode',{initialValue:detailinfo.groupName}]"}]},t._l(t.grouping,(function(e){return a("a-select-option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.name)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:21}},[a("a-form-item",{attrs:{label:"选择教室"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["laboratoryCode",{initialValue:t.detailinfo.laboratoryCode}],expression:"['laboratoryCode',{initialValue:detailinfo.laboratoryCode}]"}],staticStyle:{width:"100%"}},t._l(t.labname,(function(e){return a("a-select-option",{key:e.code},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},b=[],g=a("81a0");function v(t){var e="/app/subGrouping";return Object(g["a"])({url:e,method:"get",params:t})}function y(t,e){var a="/app/camera/"+e;return Object(g["a"])({url:a,method:"put",data:t})}var k=a("14f6"),x={data:function(){return{visible:!1,btnloading:!1,confirmLoading:!1,form:this.$form.createForm(this,{name:"monitor"}),labname:[],grouping:[],detailinfo:{}}},mounted:function(){this.getLaboratory(),this.getgroupname()},methods:{modalshow:function(t){this.visible=!0,this.detailinfo=t},handleCancel:function(){this.visible=!1},handleOk:function(){var t=this;this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){e?t.btnloading=!1:(y(a,t.detailinfo.id).then((function(e){t.$emit("ok")})).catch((function(t){})),setTimeout((function(){t.btnloading=!1,t.visible=!1})))})),this.form.resetFields()},onChange:function(t,e){},getLaboratory:function(){var t=this;Object(k["b"])(this.queryParam).then((function(e){t.labname=e.items}))},getgroupname:function(){var t=this;v(this.queryParam).then((function(e){t.grouping=e.items}))}}},C=x,_=a("2877"),w=Object(_["a"])(C,p,b,!1,null,null,null),S=w.exports,O={components:{ChangeMonitor:S,dragModal:m["a"]},data:function(){return{visible:!1,btnloading:!1,confirmLoading:!1,queryParam:{SkipCount:0,MaxResultCount:99},navList:[],form:this.$form.createForm(this,{name:"editquality"}),checkedList:[],Moptions:[],value:[],checkedvalue:{},qualityList:[]}},methods:{modalshow:function(t,e){this.visible=!0,this.qualityList=e,this.checkedvalue.labBranchGuid=t,this.checkedvalue.type=1,this.getAllQualification()},handleOk:function(){var t=this;this.btnloading=!0,this.checkedvalue.parameter=this.checkedList,Object(s["f"])(this.checkedvalue).then((function(e){t.$emit("ok")})),setTimeout((function(){t.btnloading=!1,t.visible=!1})),this.Moptions=[]},handleCancel:function(){this.visible=!1,this.Moptions=[],this.checkedList=[]},onChange:function(t){this.checkedList=[];for(var e=0;e<t.length;e++)for(var a=0;a<this.Moptions.length;a++)t[e]==this.Moptions[a].value&&this.checkedList.push({guid:this.Moptions[a].guid,selected:!0,content:this.Moptions[a].label})},handleChange:function(){this.$emit("change",this.checked)},getAllQualification:function(){var t=this;Object(f["q"])(this.queryParam).then((function(e){t.navList=e.items,t.navList.forEach((function(e){t.Moptions.push({guid:e.guid,label:e.content,value:e.content})}))}))}}},L=O,I=(a("82bc"),Object(_["a"])(L,u,h,!1,null,null,null)),D=I.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{staticClass:"editrisksourse",attrs:{width:1e3,title:"危险源",visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("span",[t._v("危险等级：")]),a("a-radio-group",{attrs:{name:"radioGroup"},on:{change:t.changeLevel},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}},[a("a-radio",{attrs:{value:1,disabled:""}},[t._v(" 1级 ")]),a("a-radio",{attrs:{value:2,disabled:""}},[t._v(" 2级 ")]),a("a-radio",{attrs:{value:3,disabled:""}},[t._v(" 3级 ")])],1),a("a-checkbox-group",{attrs:{name:"checkboxgroup",options:t.Moptions},on:{change:t.onChange},model:{value:t.riskList,callback:function(e){t.riskList=e},expression:"riskList"}})],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},j=[],P=(a("4de4"),a("d81d"),{components:{dragModal:m["a"]},data:function(){return{visible:!1,btnloading:!1,confirmLoading:!1,queryParam:{SkipCount:0,MaxResultCount:99},navList:[],form:this.$form.createForm(this,{name:"editrisksourse"}),checkedList:[],Moptions:[],value:[],checkedvalue:{},riskList:[],level:null}},methods:{modalshow:function(t,e,a){this.visible=!0,this.riskList=e,this.checkedvalue.labBranchGuid=t,this.checkedvalue.type=2,this.checkedvalue.riskLevel=a,this.level=parseInt(a),this.getAllRiskSource()},handleOk:function(){var t=this;this.btnloading=!0,this.onChange(this.riskList),this.checkedvalue.parameter=this.checkedList,Object(s["f"])(this.checkedvalue).then((function(e){t.$emit("ok")})),setTimeout((function(){t.btnloading=!1,t.visible=!1})),this.Moptions=[]},handleCancel:function(){this.visible=!1,this.Moptions=[],this.checkedList=[]},onChange:function(t){this.checkedList=[];for(var e=0;e<t.length;e++)for(var a=0;a<this.Moptions.length;a++)t[e]==this.Moptions[a].value&&this.checkedList.push({guid:this.Moptions[a].guid,selected:!0,content:this.Moptions[a].label,level:this.Moptions[a].level});this.levelSort(t)},levelSort:function(t){var e=this,a=[],n=[];t.map((function(t,n){e.navList.map((function(e,n){t==e.content&&a.push(e.level)}))})),n=a.filter((function(t){if(0!=t)return!0}));var i=n.sort((function(t,e){return t-e}));this.level=i&&i.length?i[0]:null},handleChange:function(){this.$emit("change",this.checked)},getAllRiskSource:function(){var t=this;Object(f["s"])(this.queryParam).then((function(e){t.navList=e.items,t.navList.forEach((function(e){t.Moptions.push({guid:e.guid,label:e.content,value:e.content,level:e.level})}))}))},changeLevel:function(t){this.checkedvalue.riskLevel=t.target.value}}}),q=P,R=(a("70ba"),Object(_["a"])(q,$,j,!1,null,null,null)),T=R.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{staticClass:"editprotectmeasures",attrs:{width:1e3,title:"防护措施",visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-checkbox-group",{attrs:{name:"checkboxgroup",options:t.Moptions},on:{change:t.onChange},model:{value:t.protectList,callback:function(e){t.protectList=e},expression:"protectList"}})],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},M=[],G={components:{dragModal:m["a"]},data:function(){return{visible:!1,btnloading:!1,confirmLoading:!1,queryParam:{SkipCount:0,MaxResultCount:99},navList:[],form:this.$form.createForm(this,{name:"editprotectmeasures"}),checkedList:[],Moptions:[],value:[],checkedvalue:{},protectList:[]}},methods:{modalshow:function(t,e){this.visible=!0,this.protectList=e,this.checkedvalue.labBranchGuid=t,this.checkedvalue.type=3,this.getAllProtectiveMeasures()},handleOk:function(){var t=this;this.btnloading=!0,this.checkedvalue.parameter=this.checkedList,Object(s["f"])(this.checkedvalue).then((function(e){t.$emit("ok")})),setTimeout((function(){t.btnloading=!1,t.visible=!1})),this.Moptions=[]},handleCancel:function(){this.visible=!1,this.Moptions=[],this.checkedList=[]},onChange:function(t){this.checkedList=[];for(var e=0;e<t.length;e++)for(var a=0;a<this.Moptions.length;a++)t[e]==this.Moptions[a].value&&this.checkedList.push({guid:this.Moptions[a].guid,selected:!0,content:this.Moptions[a].label})},handleChange:function(){this.$emit("change",this.checked)},getAllProtectiveMeasures:function(){var t=this;Object(f["r"])(this.queryParam).then((function(e){t.navList=e.items,t.navList.forEach((function(e){t.Moptions.push({guid:e.guid,label:e.content,value:e.content})}))}))}}},A=G,N=(a("873b"),Object(_["a"])(A,E,M,!1,null,null,null)),B=N.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{staticClass:"editextinguishingpoints",attrs:{width:1e3,title:"灭火要点",visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-checkbox-group",{attrs:{name:"checkboxgroup",options:t.Moptions},on:{change:t.onChange},model:{value:t.pointList,callback:function(e){t.pointList=e},expression:"pointList"}})],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},z=[],V={components:{dragModal:m["a"]},data:function(){return{visible:!1,btnloading:!1,confirmLoading:!1,queryParam:{SkipCount:0,MaxResultCount:99},navList:[],form:this.$form.createForm(this,{name:"editextinguishingpoints"}),checkedList:[],Moptions:[],value:[],checkedvalue:{},pointList:[]}},methods:{modalshow:function(t,e){this.visible=!0,this.pointList=e,this.checkedvalue.labBranchGuid=t,this.checkedvalue.type=4,this.getAllExtinguishingPoints()},handleOk:function(){var t=this;this.btnloading=!0,this.checkedvalue.parameter=this.checkedList,Object(s["f"])(this.checkedvalue).then((function(e){t.$emit("ok")})),setTimeout((function(){t.btnloading=!1,t.visible=!1})),this.Moptions=[]},handleCancel:function(){this.visible=!1,this.Moptions=[],this.checkedList=[]},onChange:function(t){this.checkedList=[];for(var e=0;e<t.length;e++)for(var a=0;a<this.Moptions.length;a++)t[e]==this.Moptions[a].value&&this.checkedList.push({guid:this.Moptions[a].guid,selected:!0,content:this.Moptions[a].label})},handleChange:function(){this.$emit("change",this.checked)},getAllExtinguishingPoints:function(){var t=this;Object(f["p"])(this.queryParam).then((function(e){t.navList=e.items,t.navList.forEach((function(e){t.Moptions.push({guid:e.guid,label:e.content,value:e.content})}))}))}}},K=V,U=(a("c5db"),Object(_["a"])(K,F,z,!1,null,null,null)),Y=U.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:900,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[this.reFresh?a("a-form-model",{ref:"form",attrs:{model:t.dataInfo,rules:t.rules}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:24}},[this.id?t._e():a("a-col",{attrs:{span:12}},[this.id?t._e():a("a-form-model-item",{attrs:{"label-col":{span:8},"wrapper-col":{span:16},label:"设备类型",prop:"equipmentGuid"}},[a("a-select",{on:{change:t.handleTypeChange},model:{value:t.dataInfo.equipmentGuid,callback:function(e){t.$set(t.dataInfo,"equipmentGuid",e)},expression:"dataInfo.equipmentGuid"}},t._l(t.specialEquipment,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{"label-col":{span:8},"wrapper-col":{span:16},label:"设备名称",prop:"name"}},[a("a-input",{model:{value:t.dataInfo.name,callback:function(e){t.$set(t.dataInfo,"name",e)},expression:"dataInfo.name"}})],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{"label-col":{span:8},"wrapper-col":{span:16},label:"资产编号",prop:"assetNumber"}},[a("a-input",{model:{value:t.dataInfo.assetNumber,callback:function(e){t.$set(t.dataInfo,"assetNumber",e)},expression:"dataInfo.assetNumber"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{"label-col":{span:8},"wrapper-col":{span:16},label:"责任人"}},[a("a-input",{model:{value:t.dataInfo.responsible,callback:function(e){t.$set(t.dataInfo,"responsible",e)},expression:"dataInfo.responsible"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{"label-col":{span:8},"wrapper-col":{span:16},label:"联系电话"}},[a("a-input",{model:{value:t.dataInfo.phone,callback:function(e){t.$set(t.dataInfo,"phone",e)},expression:"dataInfo.phone"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{"label-col":{span:8},"wrapper-col":{span:16},label:"设备注册代码"}},[a("a-input",{model:{value:t.dataInfo.registrationCode,callback:function(e){t.$set(t.dataInfo,"registrationCode",e)},expression:"dataInfo.registrationCode"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{"label-col":{span:8},"wrapper-col":{span:16},label:"检验日期"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{format:t.dateFormat},model:{value:t.dataInfo.inspectionDate,callback:function(e){t.$set(t.dataInfo,"inspectionDate",e)},expression:"dataInfo.inspectionDate"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{"label-col":{span:8},"wrapper-col":{span:16},label:"设备状态"}},[a("a-select",{model:{value:t.dataInfo.status,callback:function(e){t.$set(t.dataInfo,"status",e)},expression:"dataInfo.status"}},[a("a-select-option",{attrs:{value:0}},[t._v(" 在用 ")]),a("a-select-option",{attrs:{value:1}},[t._v(" 待修 ")]),a("a-select-option",{attrs:{value:2}},[t._v(" 闲置 ")]),a("a-select-option",{attrs:{value:3}},[t._v(" 待处置 ")])],1)],1)],1),a("a-col",{attrs:{span:24}},t._l(t.dataInfo.equipmentInfos,(function(e){return a("a-col",{key:e.id,attrs:{span:12}},[a("a-form-model-item",{attrs:{"label-col":{span:8},"wrapper-col":{span:16},label:e.name}},[1==e.type?a("a-input",{model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"equipmentInfo.value"}}):t._e(),2==e.type?a("a-select",{on:{change:t.selectChange},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"equipmentInfo.value"}},t._l(e.options,(function(e){return a("a-select-option",{key:e,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1):t._e()],1)],1)})),1),a("a-col",{attrs:{span:24}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{"label-col":{span:8},"wrapper-col":{span:16},label:"附件1"}},[a("a-upload",{attrs:{"before-upload":t.handleAannexOneUpFile,remove:t.handleAannexOneRemove,"file-list":t.dataInfo.aannexOneFile}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 上传 ")],1)],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{"label-col":{span:8},"wrapper-col":{span:16},label:"附件2"}},[a("a-upload",{attrs:{"before-upload":t.handleAannexTwoUpFile,remove:t.handleAannexTwoRemove,"file-list":t.dataInfo.aannexTwoFile}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 上传 ")],1)],1)],1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{"label-col":{span:8},"wrapper-col":{span:16},label:"附件3"}},[a("a-upload",{attrs:{"before-upload":t.handleAannexThreeUpFile,remove:t.handleAannexThreeRemove,"file-list":t.dataInfo.aannexThreeFile}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 上传 ")],1)],1)],1)],1)],1)],1)],1):t._e(),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnLoading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},Q=[],J=(a("c975"),a("a434"),a("6a7e")),W={status:0,inspectionDate:r()("2020/01/01","YYYY/MM/DD"),aannexTwoFile:[],aannexOneFile:[],aannexThreeFile:[]},Z={components:{dragModal:m["a"]},data:function(){return{visible:!1,btnLoading:!1,dateFormat:"YYYY/MM/DD",specialEquipmentGuid:"",reFresh:!0,title:"",dataInfo:{},branchCode:"",id:null,specialEquipment:[],rules:{equipmentGuid:[{required:!0,message:"未选择设备类型!"}],name:[{required:!0,message:"未填写设备名称!"}]}}},watch:{specialEquipmentGuid:function(){var t=this;this.reFresh=!1,this.$nextTick((function(){t.reFresh=!0}))}},methods:{modalShow:function(t){this.id=null,this.visible=!0,this.dataInfo=Object.assign({},W),this.branchCode=t.branchCode,this.title="添加特种设备",t.id&&(this.id=t.id,this.title="编辑特种设备"),this.init()},handleAannexOneRemove:function(t){var e=this.dataInfo.aannexOneFile.indexOf(t);this.dataInfo.aannexOneFile.splice(e,1),this.dataInfo.aannexOne=""},handleAannexOneUpFile:function(t){var e=this,a=new FormData;return a.append("file",t),Object(J["pb"])(a).then((function(a){t.url=a.url,e.dataInfo.aannexOne=a.code,e.$set(e.dataInfo.aannexOneFile,0,t)})),!1},handleAannexTwoRemove:function(t){var e=this.dataInfo.aannexTwoFile.indexOf(t);this.dataInfo.aannexTwoFile.splice(e,1),this.dataInfo.aannexTwo=""},handleAannexTwoUpFile:function(t){var e=this,a=new FormData;return a.append("file",t),Object(J["pb"])(a).then((function(a){t.url=a.url,e.dataInfo.aannexTwo=a.code,e.$set(e.dataInfo.aannexTwoFile,0,t)})),!1},handleAannexThreeRemove:function(t){var e=this.dataInfo.aannexxThreeFile.indexOf(t);this.dataInfo.aannexxThreeFile.splice(e,1),this.dataInfo.aannexxThree=""},handleAannexThreeUpFile:function(t){var e=this,a=new FormData;return a.append("file",t),Object(J["pb"])(a).then((function(a){t.url=a.url,e.dataInfo.aannexThree=a.code,e.$set(e.dataInfo.aannexThreeFile,0,t)})),!1},init:function(){var t=this;this.id?Object(s["M"])(this.id).then((function(e){t.dataInfo=e,t.reFresh=!1,t.$nextTick((function(){t.reFresh=!0}))})):Object(f["t"])({maxResultCount:999}).then((function(e){t.specialEquipment=e.items}))},handleCancel:function(){this.visible=!1},handleOk:function(){var t=this;this.btnLoading=!0,this.$refs.form.validate((function(e){t.dataInfo.branchCode=t.branchCode,t.id?(t.dataInfo.id=t.id,Object(s["cb"])(t.dataInfo).then((function(e){t.$message.success("修改成功"),setTimeout((function(){t.btnLoading=!1,t.visible=!1,t.$emit("ok")}),1500)}))):Object(s["X"])(t.dataInfo).then((function(e){t.$message.success("添加成功"),setTimeout((function(){t.btnLoading=!1,t.visible=!1,t.$emit("ok")}),1500)}))}))},selectChange:function(t){var e=this;this.reFresh=!1,this.$nextTick((function(){e.reFresh=!0}))},handleTypeChange:function(t){var e=this;Object(f["u"])(t).then((function(a){e.dataInfo=Object.assign({},W),e.dataInfo.equipmentGuid=t,e.dataInfo.equipmentInfos=a.propertys,e.specialEquipmentGuid=t}))}}},X=Z,tt=(a("297c"),Object(_["a"])(X,H,Q,!1,null,null,null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:850,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[this.reFresh?a("a-form-model",{ref:"form",attrs:{model:t.dataInfo,rules:t.rules}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:24}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:16},label:"名称",prop:"name"}},[a("a-input",{model:{value:t.dataInfo.name,callback:function(e){t.$set(t.dataInfo,"name",e)},expression:"dataInfo.name"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:16},label:"类型",prop:"type"}},[a("a-select",{model:{value:t.dataInfo.type,callback:function(e){t.$set(t.dataInfo,"type",e)},expression:"dataInfo.type"}},[a("a-select-option",{attrs:{value:0}},[t._v(" 液体 ")]),a("a-select-option",{attrs:{value:1}},[t._v(" 固体 ")]),a("a-select-option",{attrs:{value:2}},[t._v(" 气体 ")])],1)],1)],1)],1)],1)],1):t._e(),a("template",{slot:"footer"},[a("a-button",{key:"back"},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnLoading}},[t._v("保存")])],1)],2)},nt=[],it={components:{dragModal:m["a"]},data:function(){return{visible:!1,btnLoading:!1,title:"",reFresh:!0,dataInfo:{},branchCode:"",id:null,dangerousgoods:[],dangerousgoodsGuid:"",rules:{name:[{required:!0,message:"未填写物品名称!"}]}}},watch:{dangerousgoodsGuid:function(){var t=this;this.reFresh=!1,this.$nextTick((function(){t.reFresh=!0}))}},methods:{modalShow:function(t){this.id=null,this.visible=!0,this.dataInfo=Object.assign({},dataInfo),this.branchCode=t.branchCode,this.title="添加危险品",t.id&&(this.id=t.id,this.title="编辑危险品"),this.init()},init:function(){var t=this;this.id?getdangerousgoods(this.id).then((function(e){t.dataInfo=e,t.reFresh=!1,t.$nextTick((function(){t.reFresh=!0}))})):getSpecialEquipmenttype({maxResultCount:999}).then((function(e){t.specialEquipment=e.items}))},handleCancel:function(){this.visible=!1},handleOk:function(){var t=this;this.btnLoading=!0,this.$refs.form.validate((function(e){t.dataInfo.branchCode=t.branchCode,t.id?(t.dataInfo.id=t.id,Object(s["db"])(t.dataInfo).then((function(e){t.$message.success("修改成功"),setTimeout((function(){t.btnLoading=!1,t.visible=!1,t.$emit("ok")}),1500)}))):Object(s["Z"])(t.dataInfo).then((function(e){t.$message.success("添加成功"),setTimeout((function(){t.btnLoading=!1,t.visible=!1,t.$emit("ok")}),1500)}))}))}}},ot=it,lt=Object(_["a"])(ot,at,nt,!1,null,null,null),rt=lt.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:800,title:"添加危险品",destroyOnClose:!0,visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}},on:{submit:t.handleOk}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:16},label:"名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:t.detailinfo.name,rules:[{required:!0,message:"请填写名称"}]}],expression:"[\n                'name',\n                { initialValue: detailinfo.name, rules: [{ required: true, message: '请填写名称' }] }\n              ]"}]})],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:16},label:"类型"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:t.detailinfo.type}],expression:"['type', { initialValue: detailinfo.type }]"}]},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 液体 ")]),a("a-select-option",{attrs:{value:"1"}},[t._v(" 固体 ")]),a("a-select-option",{attrs:{value:"2"}},[t._v(" 气体 ")])],1)],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{staticStyle:{display:"none"},attrs:{"label-col":{span:6},"wrapper-col":{span:16},label:"名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["labBranchGuid",{initialValue:t.detailinfo.labBranchGuid,rules:[{required:!0}]}],expression:"['labBranchGuid', { initialValue: detailinfo.labBranchGuid, rules: [{ required: true }] }]"}]})],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},ct=[],dt={components:{dragModal:m["a"]},data:function(){return{visible:!1,btnloading:!1,confirmLoading:!1,labelCol:{span:6},wrapperCol:{span:14},labBranchGuid:"",detailinfo:{},datainfo:{name:"",laboratoryGuid:"",type:""},form:this.$form.createForm(this,{name:"createdangerousegoods"})}},methods:{modalshow:function(t){this.visible=!0,this.detailinfo.labBranchGuid=t},handleOk:function(){var t=this;this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){e?t.btnloading=!1:(Object(s["Z"])(a).then((function(e){t.$message.success("添加成功")})).catch((function(t){})),setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok",a),t.detailinfo={name:"",type:"",labBranchGuid:""}})))}))},handleCancel:function(){this.visible=!1,this.detailinfo={name:"",type:"",labBranchGuid:""}}}},ut=dt,ht=Object(_["a"])(ut,st,ct,!1,null,null,null),mt=ht.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:800,title:"修改危险品",destroyOnClose:!0,visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}},on:{submit:t.handleOk}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:16},label:"名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:t.detailinfo.name,rules:[{required:!0,message:"请输入名称"}]}],expression:"['name',{initialValue: detailinfo.name, rules: [{ required: true, message: '请输入名称' }]}]"}]})],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:16},label:"类型"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:t.detailinfo.type}],expression:"['type',{initialValue: detailinfo.type}]"}]},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 液体 ")]),a("a-select-option",{attrs:{value:"1"}},[t._v(" 固体 ")]),a("a-select-option",{attrs:{value:"2"}},[t._v(" 气体 ")])],1)],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{staticStyle:{display:"none"},attrs:{"label-col":{span:6},"wrapper-col":{span:16},label:"名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["labBranchGuid",{initialValue:t.detailinfo.labBranchGuid,rules:[{required:!0}]}],expression:"['labBranchGuid', { initialValue: detailinfo.labBranchGuid, rules: [{ required: true }] }]"}]})],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},pt=[],bt={components:{dragModal:m["a"]},data:function(){return{visible:!1,btnloading:!1,confirmLoading:!1,labelCol:{span:6},wrapperCol:{span:14},labBranchGuid:"",detailinfo:{},datainfo:{name:"",laboratoryGuid:"",type:""},form:this.$form.createForm(this,{name:"createdangerousegoods"})}},methods:{modalshow:function(t){this.visible=!0,this.detailinfo=t},handleOk:function(){var t=this;this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){e?t.btnloading=!1:(Object(s["db"])(a,t.detailinfo.id).then((function(e){t.$message.success("修改成功")})),setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok",a),t.detailinfo={name:"",type:"",labBranchGuid:""}})))}))},handleCancel:function(){this.visible=!1,this.detailinfo={name:"",type:"",labBranchGuid:""}}}},gt=bt,vt=Object(_["a"])(gt,ft,pt,!1,null,null,null),yt=vt.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:800,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"Form",attrs:{model:t.form,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"理由"}},[a("a-textarea",{attrs:{rows:"4"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},xt=[],Ct={components:{dragModal:m["a"]},data:function(){return{title:"原因",visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},form:{remark:""},type:1,id:""}},methods:{moment:r.a,modalshow:function(t,e){this.type=t,this.id=e,1==this.type?this.title="启用原因":2==this.type&&(this.title="停用原因"),this.visible=!0},handleOk:function(){var t=this;this.btnloading=!0;var e={id:this.id,statusReason:this.form.remark};1==this.type?Object(s["x"])(e).then((function(e){t.btnloading=!1,t.visible=!1,t.$emit("ok"),t.form={remark:""},t.$refs.Form.resetFields()})):2==this.type?Object(s["q"])(e).then((function(e){t.btnloading=!1,t.visible=!1,t.$emit("ok"),t.form={remark:""},t.$refs.Form.resetFields()})):this.btnloading=!1},handleCancel:function(){this.visible=!1,this.$refs.Form.resetFields()},onChange:function(t,e){}}},_t=Ct,wt=Object(_["a"])(_t,kt,xt,!1,null,null,null),St=wt.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:800,title:"日志列表",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-table",{attrs:{rowKey:function(t){return t.id},loading:t.tableLoading,columns:t.columns,"data-source":t.causeList,pagination:!1,scroll:{y:600}},scopedSlots:t._u([{key:"status",fn:function(e){return[0==e?a("a-tag",{attrs:{color:"green"}},[t._v("启用")]):t._e(),1==e?a("a-tag",{attrs:{color:"orange"}},[t._v("停用")]):t._e()]}}])}),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("关闭")])],1)],2)},Lt=[],It=[{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"理由",dataIndex:"content"},{title:"日期",dataIndex:"subTime",scopedSlots:{customRender:"subTime"}},{title:"操作人",dataIndex:"operator"}],Dt={components:{dragModal:m["a"]},data:function(){return{visible:!1,tableLoading:!1,columns:It,causeList:[],guid:""}},methods:{moment:r.a,modalshow:function(t){this.guid=t,this.getList(),this.visible=!0},getList:function(){var t=this;Object(s["J"])({BranchGuid:this.guid,MaxResultCount:1e3}).then((function(e){t.causeList=e.items}))},handleCancel:function(){this.visible=!1}}},$t=Dt,jt=Object(_["a"])($t,Ot,Lt,!1,null,null,null),Pt=jt.exports,qt=a("0ce9"),Rt=[{title:"实验室负责人",dataIndex:"name"},{title:"工号",dataIndex:"code"},{title:"联系电话",dataIndex:"phone"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"100px"}],Tt=[{title:"设备名称",dataIndex:"name"},{title:"设备类型",dataIndex:"equipmentName"},{title:"检验日期",dataIndex:"inspectionDate",scopedSlots:{customRender:"inspectionDate"}},{title:"设备状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",width:"120px",scopedSlots:{customRender:"action"}}],Et=[{title:"物品名称",dataIndex:"name"},{title:"类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"操作",dataIndex:"action",width:"120px",scopedSlots:{customRender:"action"}}],Mt=[{title:"实验分室负责人",dataIndex:"teacherName",width:250},{title:"学历/职称",scopedSlots:{customRender:"education"}},{title:"联系电话",dataIndex:"phone"},{title:"操作",scopedSlots:{customRender:"action"}}],Gt=[{title:"实验分室负责人",dataIndex:"teacherName",width:250},{title:"学历/职称",scopedSlots:{customRender:"education"}},{title:"联系电话",dataIndex:"phone"}],At=[{title:"实验分室安全负责人",dataIndex:"teacherName",width:250},{title:"学历/职称",scopedSlots:{customRender:"education"}},{title:"联系电话",dataIndex:"phone"},{title:"操作",scopedSlots:{customRender:"action"}}],Nt=[{title:"实验分室安全负责人",dataIndex:"teacherName",width:250},{title:"学历/职称",scopedSlots:{customRender:"education"}},{title:"联系电话",dataIndex:"phone"}],Bt=["在用","调出","调入","报停","报废"],Ft={name:"SchoolBase",props:{code:{type:String},guid:{type:String},formType:{type:String}},components:{STable:o["h"],EditBranch:c["a"],EditSchoolAdmin:d["a"],CreateTeacher:qt["a"],EditLabQuality:D,EditRisksourse:T,EditProtectMeasures:B,EditExtinguishingPoints:Y,CreateOrUpdateLabSpEquipment:et,CreateOrUpdateLabDangerousGoods:rt,CreateDangerousgoods:mt,EditDangerousgoods:yt,CauseBranch:St,CauseListBranch:Pt},watch:{EditRisksoursed:function(t,e){this.init()},guid:function(){this.init()}},data:function(){return{columns:Rt,addresponse:Gt,responsecolumns:Mt,addsafeResponse:Nt,safecolumns:At,iptvisible:!1,tableLoading:!1,nametvisible:!0,specialcolumns:Tt,riskscolumns:Et,statusToString:Bt,labbranchinfo:{},labQualityList:[],riskSourseList:[],dangerousgoodsList:[],labBranchGuid:"",labSpEquipments:[],protectiveMeasuresList:[],extinguishingPointsList:[],responsible:[],safetyResponsible:[],description:""}},created:function(){this.init()},methods:{moment:r.a,init:function(){var t=this;this.tableLoading=!0,Object(s["H"])({guid:this.guid}).then((function(e){t.labbranchinfo=e,t.responsible=e.responsible,t.safetyResponsible=e.safetyResponsible,t.labQualityList=e.laboratoryQualifications,t.riskSourseList=e.riskSources,t.protectiveMeasuresList=e.protectiveMeasures,t.extinguishingPointsList=e.extinguishingPoints,t.labSpEquipments=e.labSpEquipments,t.labBranchGuid=e.guid,t.tableLoading=!1,t.description=e.description})),Object(s["V"])({LabBranchGuid:this.guid}).then((function(e){t.dangerousgoodsList=e.items}))},handleClear:function(t){var e=this;this.params={teacherCode:"",bindCode:this.guid,level:t.level,id:t.id},Object(s["r"])(this.params).then((function(t){e.init()}))},handleEdit:function(){this.$refs.editbranch.modalshow(2,null,this.labbranchinfo)},handleQRCode:function(){localStorage.getItem("tenant");var t=this.$router.resolve({name:"safetyQRCode",query:{guid:this.labbranchinfo.guid}}),e=(window.screen.availHeight-30-500)/2,a=(window.screen.availWidth-500)/2;window.open(t.href,"_blank","height=500, width=500, top="+e+", left="+a+", toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no")},handleCard:function(){var t=this.$router.resolve({name:"safetysesponCard",query:{id:this.labbranchinfo.id}}),e=(window.screen.availHeight-30-500)/2,a=(window.screen.availWidth-500)/2;window.open(t.href,"_blank","height=500, width=500, top="+e+", left="+a+", toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no")},causeEnable:function(t,e){this.$refs.causebranch.modalshow(t,e)},causeList:function(){this.$refs.causelistbranch.modalshow(this.guid)},handleback:function(){this.$router.push("labbranch")},handleEditAdmin:function(t){this.$refs.editteacher.modalshow(t)},handleAddAdmin:function(){this.$refs.editadminmodules.modalshow(this.responsible.bindCode,this.guid,6)},handleAddSafeAdmin:function(){this.$refs.editadminmodules.modalshow(this.safetyResponsible.bindCode,this.guid,8)},handleDeleteAdmin:function(t){var e=this;Object(s["i"])(t).then((function(t){e.init()}))},handleEditRiskSourse:function(){this.$refs.editrisksourse.modalshow(this.guid,this.riskSourseList,this.labbranchinfo.riskLevel)},handleEditProtectMeasures:function(){this.$refs.editprotectmeasures.modalshow(this.guid,this.protectiveMeasuresList)},handleEditExtinguishingPoints:function(){this.$refs.editextinguishingpoints.modalshow(this.guid,this.extinguishingPointsList)},handleCreateOrUpdateLabSpEquipment:function(t){this.$refs.createOrUpdateLabSpEquipment.modalShow({id:t,branchCode:this.guid})},handleCreateLabDangerousGoods:function(t){this.$refs.createdangerousgoods.modalshow(t)},handleEditDangerousGoods:function(t){this.$refs.editdangerousgoods.modalshow(t)},handleDeleteDangerousgoods:function(t){var e=this;Object(s["p"])(t).then((function(t){e.$message.success("删除成功"),e.init()}))},handleOk:function(){this.init(),this.$emit("ok")},handlePersonOk:function(){this.init()},handleDeleteLabSpEquipment:function(t){var e=this;Object(s["m"])(t).then((function(t){e.$message.success("删除成功"),e.init()}))},handleSubmit:function(t){var e=this;this.labbranchinfo.description=t,Object(s["t"])(this.labbranchinfo).then((function(t){e.$message.success("添加成功")}))}}},zt=Ft,Vt=(a("0239"),Object(_["a"])(zt,n,i,!1,null,null,null));e["a"]=Vt.exports},"873b":function(t,e,a){"use strict";var n=a("a475"),i=a.n(n);i.a},8752:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"active-detail"},[a("a-page-header",{staticClass:"pageheader",on:{back:function(){return t.$router.push({name:"activelist"})}}},[a("a-button",{attrs:{slot:"backIcon",icon:"left"},slot:"backIcon"},[t._v("返回")]),a("template",{slot:"title"},[t._v(t._s(t.detailInfo.name))]),a("template",{slot:"extra"},[a("span",[t._v("总活动进度 ")]),a("a-progress",{staticStyle:{width:"250px"},attrs:{"stroke-color":{"0%":"#108ee9","100%":"#87d068"},percent:t.detailInfo.eventProgress}})],1),a("table",{staticStyle:{width:"100%","border-top":"1px solid #e1e1e1"}},[a("tr",[a("td",{staticStyle:{"vertical-align":"top",padding:"10px",width:"25%"}},[a("p",{staticStyle:{color:"#6f6f6f","font-weight":"600","font-size":"16px","line-heght":"22px","font-family":"PingFangSC-Medium, PingFang SC"}},[t._v(" 剩余完成时间 ")]),a("a-statistic-countdown",{staticStyle:{"padding-top":"20px","padding-bottom":"20px"},attrs:{value:Date.now()+t.detailInfo.remainingTime,format:"D 天 H 时 m 分 s 秒"}}),a("p",{staticStyle:{"line-height":"30px"}},[t._v("发起时间："+t._s(t.detailInfo.startTime))]),a("p",{staticStyle:{"line-height":"30px"}},[t._v("结束时间："+t._s(t.detailInfo.endTime))])],1),a("td",{staticStyle:{"padding-top":"10px","border-left":"1px solid #e1e1e1"}},[a("div",{staticStyle:{height:"200px",width:"100%"},attrs:{id:"chart2"}})])])])],2),a("a-card",[a("a-tabs",{attrs:{"default-active-key":"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"学院清单"}},[a("a-table",{attrs:{columns:t.columns,"data-source":t.detailInfo.eventCollegeDetails,pagination:!1,rowKey:"collegeGuid",scroll:{y:400}},scopedSlots:t._u([{key:"eventProgress",fn:function(t,e){return[a("a-progress",{staticStyle:{width:"150px"},attrs:{"stroke-color":{"0%":"#108ee9","100%":"#87d068"},percent:t}})]}},{key:"status",fn:function(e,n){return[0==e?a("a-tag",{attrs:{color:"gray"}},[t._v("未开始")]):1==e?a("a-tag",{attrs:{color:"red"}},[t._v("自查中")]):2==e?a("a-tag",{attrs:{color:"orange"}},[t._v("院系自查负责人审核")]):3==e?a("a-tag",{attrs:{color:"blue"}},[t._v("校管理员审核")]):a("a-tag",{attrs:{color:"green"}},[t._v("已审核")])]}},{key:"action",fn:function(e,n){return[a("a-button",{on:{click:function(e){return t.handleDetail(n)}}},[t._v("查看")]),t._v(" "),a("a-button",{attrs:{disabled:!(1!=n.status&&0!=n.status),icon:"download"},on:{click:function(e){return t.handleexport(n)}}},[t._v("导出")])]}}])})],1),a("a-tab-pane",{key:"2"},[a("span",{staticStyle:{display:"flex"},attrs:{slot:"tab"},slot:"tab"},[a("span",{staticStyle:{"margin-right":"5px"}},[t._v("不符合")]),a("a-badge",{attrs:{"number-style":{minWidth:"14px",height:"14px",lineHeight:"14px"},count:t.detailInfo.incoincidence}})],1),a("a-table",{attrs:{columns:t.incolumns,"data-source":t.detailInfo.incoincidenceItems}})],1),a("a-tab-pane",{key:"3"},[a("span",{staticStyle:{display:"flex"},attrs:{slot:"tab"},slot:"tab"},[a("span",{staticStyle:{"margin-right":"5px"}},[t._v("隐患")]),a("a-badge",{attrs:{"number-style":{minWidth:"14px",height:"14px",lineHeight:"14px"},count:t.detailInfo.hiddenDangerNum}})],1),a("a-table",{attrs:{columns:t.dangercolumns,"data-source":t.dangerlist},scopedSlots:t._u([{key:"status",fn:function(e,n){return[0==e?a("a-tag",{attrs:{color:"red"}},[t._v("整改中")]):t._e(),1==e?a("a-tag",{attrs:{color:"blue"}},[t._v("审核中")]):t._e(),2==e?a("a-tag",{attrs:{color:"green"}},[t._v("整改完成")]):t._e()]}},{key:"action",fn:function(e,n){return[a("a-button",{staticStyle:{"margin-right":"4px"},attrs:{icon:"file-search",shape:"circle",title:"详情"},on:{click:function(e){return t.handleDangerDetail(n)}}})]}}])})],1)],1)],1)],1)},i=[],o=(a("4160"),a("b0c0"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("2b3d"),a("2af9")),l=a("6a7e"),r=a("c1df"),s=a.n(r),c=[{title:"学院名称",dataIndex:"name"},{title:"负责人",dataIndex:"principal"},{title:"联系方式",dataIndex:"contact"},{title:"隐患",dataIndex:"hiddenDanger",width:"100px"},{title:"状态",dataIndex:"status",width:"160px",scopedSlots:{customRender:"status"}},{title:"完成度",dataIndex:"eventProgress",width:"150px",scopedSlots:{customRender:"eventProgress"}},{title:"操作",dataIndex:"action",width:"200px",scopedSlots:{customRender:"action"}}],d=[{title:"序号",dataIndex:"code"},{title:"检查项目",dataIndex:"checkItem"},{title:"学院",dataIndex:"collegeName"}],u=[{title:"学院",dataIndex:"collegeName"},{title:"实验分室",dataIndex:"branchName"},{title:"隐患内容",dataIndex:"content",ellipsis:!0},{title:"整改内容",dataIndex:"rectifyContent",ellipsis:!0},{title:"实验分室负责人",dataIndex:"branchPrincipal",width:"150px"},{title:"整改负责人",dataIndex:"principal",width:"120px"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"},width:"120px"},{title:"操作",dataIndex:"action",width:"100px",scopedSlots:{customRender:"action"}}],h={components:{ChartCard:o["b"]},data:function(){return{columns:c,incolumns:d,dangercolumns:u,currect:"",info:this.$route.query,data1:[{activename:"能源与机械工程学院",principal:"超",phone:"2646452",danger:"5",process:89,status:"自查中"}],detailInfo:{eventCollegeDetails:[],checkStatistics:{}},dangerlist:[]}},mounted:function(){},created:function(){this.init()},methods:{moment:s.a,init:function(){var t=this;Object(l["K"])(this.info.id).then((function(e){t.detailInfo=e,t.myEcharts()}));var e={EventId:this.info.id,SkipCount:0,MaxResultCount:999};Object(l["S"])(e).then((function(e){t.dangerlist=e.items}))},handleDangerDetail:function(t){this.$router.push({name:"dangerDetail",query:{id:t.id}})},handleDetail:function(t){this.$router.push({name:"selfprocess",query:{id:this.info.id,collegeguid:t.collegeGuid,name:this.detailInfo.name}})},handleexport:function(t){var e=this,a={EventId:this.info.id,CollegeGuid:t.collegeGuid};Object(l["t"])(a).then((function(a){var n=a,i=new Blob([n]),o=e.detailInfo.name+"("+t.name+").xlsx";if("download"in document.createElement("a")){var l=document.createElement("a");l.download=o,l.style.display="none",l.href=URL.createObjectURL(i),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l)}else navigator.msSaveBlob(i,o)}))},getx:function(){var t=[];return this.detailInfo.hiddenDangerInfos.forEach((function(e){t.push(e.x.substring(0,5))})),t},gety:function(){var t=[];return this.detailInfo.hiddenDangerInfos.forEach((function(e){t.push(e.y)})),t},myEcharts:function(){var t=this.$echarts.init(document.getElementById("chart2")),e={title:{text:"隐患统计",textStyle:{color:"#6F6F6F",fontSize:16}},xAxis:{type:"category",data:this.getx(),axisLabel:{interval:0,rotate:30}},yAxis:{type:"value"},series:[{data:this.gety(),label:{position:"top",show:!0,color:"#000000"},itemStyle:{color:"#FD6C2A"},type:"bar"}]};t.setOption(e),window.onresize=function(){t.resize()}}}},m=h,f=(a("ad4d"),a("2877")),p=Object(f["a"])(m,n,i,!1,null,null,null);e["default"]=p.exports},"88bf":function(t,e,a){},"8f7c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return 0!==Object.keys(t.campuLabBranchCountItem).length?a("div",{staticClass:"Allschooldata"},[a("a-card",{staticStyle:{border:"none"}},[a("div",{staticClass:"cardtitle",attrs:{slot:"title"},slot:"title"},[a("span",[t._v("上海电力大学全校实验室数据统计表")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-radio-group",{attrs:{"button-style":"solid"},on:{change:t.changeType},model:{value:t.checkTypeValue,callback:function(e){t.checkTypeValue=e},expression:"checkTypeValue"}},[a("a-radio-button",{attrs:{value:0}},[t._v(" 全部 ")]),a("a-radio-button",{attrs:{value:1}},[t._v(" 启用 ")]),a("a-radio-button",{attrs:{value:2}},[t._v(" 未启用 ")])],1),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.handleExport}},[t._v("导出")])],1),a("table",{staticClass:"headerTable"},[a("tr",[a("td",{attrs:{rowspan:"12",width:"90"}},[a("p",[t._v("全校院部总数")])]),a("td",{attrs:{rowspan:"12",width:"90"}},[t._v(t._s(t.topData.collegeCount))]),a("td",{attrs:{rowspan:"12",width:"90"}},[a("p",[t._v("全校实验中心总数")])]),a("td",{attrs:{rowspan:"12",width:"90"}},[t._v(t._s(t.topData.labCenterCount))]),a("td",{attrs:{rowspan:"12",width:"90"}},[a("p",[t._v("全校实验室总数")])]),a("td",{attrs:{rowspan:"12",width:"90"}},[t._v(t._s(t.laboratoryCount))]),a("td",{attrs:{rowspan:"6",width:"180"}},[t._v("全校实验分室总数")]),a("td",{attrs:{rowspan:"6"}},[t._v(t._s(t.labBranchCount))]),a("td",{attrs:{rowspan:"3"}},[t._v(" "+t._s(t.campuLabBranchCountItem[0].name)+" ")]),a("td",{attrs:{rowspan:"3"}},[t._v(t._s(t.campuLabBranchCountItem[0].value))]),a("td",[t._v(" "+t._s(t.campuLabBranchCountItem[0].labTypeBranchItems[0].key)+" ")]),a("td",[t._v(" "+t._s(t.campuLabBranchCountItem[0].labTypeBranchItems[0].value)+" ")])]),a("tr",[a("td",[t._v(t._s(t.campuLabBranchCountItem[0].labTypeBranchItems[1].key))]),a("td",[t._v(t._s(t.campuLabBranchCountItem[0].labTypeBranchItems[1].value))])]),a("tr",[a("td",[t._v(t._s(t.campuLabBranchCountItem[0].labTypeBranchItems[2].key))]),a("td",[t._v(t._s(t.campuLabBranchCountItem[0].labTypeBranchItems[2].value))])]),a("tr",[a("td",{attrs:{rowspan:"3"}},[t._v(" "+t._s(t.campuLabBranchCountItem[1].name)+" ")]),a("td",{attrs:{rowspan:"3"}},[t._v(t._s(t.campuLabBranchCountItem[1].value))]),a("td",[t._v(t._s(t.campuLabBranchCountItem[1].labTypeBranchItems[0].key))]),a("td",[t._v(t._s(t.campuLabBranchCountItem[1].labTypeBranchItems[0].value))])]),a("tr",[a("td",[t._v(t._s(t.campuLabBranchCountItem[1].labTypeBranchItems[1].key))]),a("td",[t._v(t._s(t.campuLabBranchCountItem[1].labTypeBranchItems[1].value))])]),a("tr",[a("td",[t._v(t._s(t.campuLabBranchCountItem[1].labTypeBranchItems[2].key))]),a("td",[t._v(t._s(t.campuLabBranchCountItem[1].labTypeBranchItems[2].value))])]),a("tr",[a("td",{attrs:{rowspan:"6"}},[t._v("全校实验分室总面积（m"),a("sup",[t._v("2")]),t._v("）")]),a("td",{attrs:{rowspan:"6"}},[t._v(t._s(t.labBranchTotalArea))]),a("td",{attrs:{rowspan:"3"}},[t._v(" "+t._s(t.campuLabBranchTotalAreaItem[0].name)+" ")]),a("td",{attrs:{rowspan:"3"}},[t._v(t._s(t.campuLabBranchTotalAreaItem[0].value))]),a("td",[t._v(t._s(t.campuLabBranchTotalAreaItem[0].labTypeBranchItems[0].key))]),a("td",[t._v(t._s(t.campuLabBranchTotalAreaItem[0].labTypeBranchItems[0].value))])]),a("tr",[a("td",[t._v(t._s(t.campuLabBranchTotalAreaItem[0].labTypeBranchItems[1].key))]),a("td",[t._v(t._s(t.campuLabBranchTotalAreaItem[0].labTypeBranchItems[1].value))])]),a("tr",[a("td",[t._v(t._s(t.campuLabBranchTotalAreaItem[0].labTypeBranchItems[2].key))]),a("td",[t._v(t._s(t.campuLabBranchTotalAreaItem[0].labTypeBranchItems[2].value))])]),a("tr",[a("td",{attrs:{rowspan:"3"}},[t._v(" "+t._s(t.campuLabBranchTotalAreaItem[1].name)+" ")]),a("td",{attrs:{rowspan:"3"}},[t._v(t._s(t.campuLabBranchTotalAreaItem[1].value))]),a("td",[t._v(t._s(t.campuLabBranchTotalAreaItem[1].labTypeBranchItems[0].key))]),a("td",[t._v(t._s(t.campuLabBranchTotalAreaItem[1].labTypeBranchItems[0].value))])]),a("tr",[a("td",[t._v(t._s(t.campuLabBranchTotalAreaItem[1].labTypeBranchItems[1].key))]),a("td",[t._v(t._s(t.campuLabBranchTotalAreaItem[1].labTypeBranchItems[1].value))])]),a("tr",[a("td",[t._v(t._s(t.campuLabBranchTotalAreaItem[1].labTypeBranchItems[2].key))]),a("td",[t._v(t._s(t.campuLabBranchTotalAreaItem[1].labTypeBranchItems[2].value))])])]),a("div",{staticClass:"contentTable"},[a("a-table",{attrs:{bordered:"","data-source":t.tabledata,pagination:!1}},[a("a-table-column",{attrs:{title:"序号"},scopedSlots:t._u([{key:"default",fn:function(e,a){return[t._v(" "+t._s(t.tabledata.indexOf(a)+1)+" ")]}}],null,!1,1408976394)}),a("a-table-column",{key:"collegeName",attrs:{title:"学院(部门)","data-index":"collegeName"}}),a("a-table-column-group",{attrs:{title:"实验室数据"}},[a("a-table-column",{attrs:{"data-index":"laboratoryCount"}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("总数")])]),t._l(t.labhead,(function(e,n){return a("a-table-column",{key:n+"A",scopedSlots:t._u([{key:"default",fn:function(e,i){return[a("span",[t._v(t._s(i.collegeLabTypeLaboratoryStatistics[n].value))])]}}],null,!0)},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.key)+" ")])])}))],2),a("a-table-column-group",{attrs:{title:"实验分室数据"}},[a("a-table-column",{attrs:{"data-index":"labBranchCount"}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("总数")])]),t._l(t.labBranchCountStatistics,(function(e,n){return a("a-table-column",{key:n+"B",scopedSlots:t._u([{key:"default",fn:function(e,i){return[a("span",[t._v(" "+t._s(i.collegeLabTypeCounts[n].value)+" ")])]}}],null,!0)},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.key)+" ")])])})),t._l(t.labBranchAreaStatistics,(function(e,n){return a("a-table-column",{key:n+"C",scopedSlots:t._u([{key:"default",fn:function(e,i){return[a("span",[t._v(" "+t._s(i.collegeLabTypeUsageAreas[n].value)+" ")])]}}],null,!0)},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.key+"分室使用面积")+" ")])])}))],2),t._l(t.camputabhead,(function(e,n){return a("a-table-column-group",{key:n+"L"},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.campusName+"校区分室数据")+" ")]),a("a-table-column",{scopedSlots:t._u([{key:"default",fn:function(e,i){return[a("span",[t._v(" "+t._s(i.campusLaboratoryDataStatistics[n].labBranchCount)+" ")])]}}],null,!0)},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("总数")])]),t._l(e.labTypeBranchItems,(function(e,i){return a("a-table-column",{key:i+n+n+n,scopedSlots:t._u([{key:"default",fn:function(e,o){return[a("span",[t._v(" "+t._s(o.campusLaboratoryDataStatistics[n].labTypeBranchItems[i].value)+" ")])]}}],null,!0)},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.key)+" ")])])})),a("a-table-column",{scopedSlots:t._u([{key:"default",fn:function(e,i){return[a("span",[t._v(" "+t._s(i.campusLaboratoryDataStatistics[n].usageArea)+" ")])]}}],null,!0)},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("使用面积")])])],2)}))],2)],1)])],1):t._e()},i=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("6a7e")),l=(a("788a"),{data:function(){return{topData:{},tabledata:[],laboratoryCount:"",labBranchCount:"",labBranchTotalArea:"",campuLabBranchCountItem:[],campuLabBranchTotalAreaItem:[],camputabhead:[],labhead:[],labBranchCountStatistics:[],labBranchAreaStatistics:[],checkTypeValue:0}},computed:{},created:function(){this.init()},methods:{init:function(){var t=this;Object(o["U"])({status:this.checkTypeValue}).then((function(e){t.topData=e,t.laboratoryCount=e.laboratoryCount,t.labBranchCount=e.labBranchCount,t.labBranchTotalArea=e.labBranchTotalArea,t.campuLabBranchCountItem=e.campuLabBranchCountItems,t.campuLabBranchTotalAreaItem=e.campuLabBranchTotalAreaItems})),Object(o["E"])({status:this.checkTypeValue}).then((function(e){if(e.length>0){var a=e[0];a.campusLaboratoryDataStatistics.length>0&&(t.camputabhead=a.campusLaboratoryDataStatistics),a.collegeLabTypeLaboratoryStatistics.length>0&&(t.labhead=a.collegeLabTypeLaboratoryStatistics),a.collegeLabTypeCounts.length>0&&a.collegeLabTypeUsageAreas.length>0&&(t.labBranchCountStatistics=a.collegeLabTypeCounts,t.labBranchAreaStatistics=a.collegeLabTypeUsageAreas)}t.tabledata=e}))},handleExport:function(){Object(o["r"])({status:this.checkTypeValue}).then((function(t){var e=t,a=new Blob([e]),n="全校实验室数据统计表.xlsx";if("download"in document.createElement("a")){var i=document.createElement("a");i.download=n,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}else navigator.msSaveBlob(a,n)}))},changeType:function(t){this.checkTypeValue=t.target.value,this.init()}}}),r=l,s=(a("627d"),a("2877")),c=Object(s["a"])(r,n,i,!1,null,null,null);e["default"]=c.exports},"8fa8":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-layout",{staticClass:"organization"},[a("a-layout-sider",{staticStyle:{background:"#fff !important","background-image":"#fff"},attrs:{trigger:null,collapsible:"",collapsedWidth:"100",width:"380"},model:{value:t.treeCollapsed,callback:function(e){t.treeCollapsed=e},expression:"treeCollapsed"}},[a("a-tree",{attrs:{draggable:"",showLine:"",showIcon:"",switcherIcon:"","default-checked-keys":t.selectedKeys,"default-expand-parent":!0,"selected-keys":t.selectedKeys,"expanded-keys":t.expandedKeys,"tree-data":t.sidelist},on:{select:t.onSelect,expand:t.onExpand,dragenter:t.onDragenter,drop:t.onDrop},scopedSlots:t._u([{key:"custom",fn:function(e){return[a("span",{class:e.status||5!=e.level?"":"treered"},[t._v(t._s(e.title))])]}}])},[a("a-icon",{attrs:{slot:"smile",type:"smile-o"},slot:"smile"})],1)],1),a("a-layout",{staticClass:"layout-right"},["1"==t.selectedlevel?a("school-base",{attrs:{title:t.schoolName,code:t.selectedKeys[0],role:t.isSchoolAdmin},on:{ok:t.handleOk,selectChange:t.handleChange}}):t._e(),"2"==t.selectedlevel?a("college-base",{attrs:{guid:t.selectedGuid,code:t.selectedKeys[0],role:t.isSchoolAdmin},on:{ok:t.handleOk,selectChange:t.handleChange}}):t._e(),"3"==t.selectedlevel?a("lab-center-base",{attrs:{guid:t.selectedGuid,code:t.selectedKeys[0],role:t.isSchoolAdmin},on:{ok:t.handleOk,selectChange:t.handleChange}}):t._e(),"4"==t.selectedlevel?a("laboratory-base",{attrs:{guid:t.selectedGuid,code:t.selectedKeys[0],role:t.isSchoolAdmin},on:{ok:t.handleOk,selectChange:t.handleChange}}):t._e(),"5"==t.selectedlevel?a("branch-base",{attrs:{guid:t.selectedGuid,code:t.selectedKeys[0],role:t.isSchoolAdmin},on:{ok:t.handleOk}}):t._e()],1)],1)},i=[],o=(a("4160"),a("c975"),a("a434"),a("b0c0"),a("a9e3"),a("ac1f"),a("5319"),a("1276"),a("159b"),a("2909")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"school-base"},[a("a-layout-header",{staticClass:"l_header",attrs:{id:"l_header"}},[a("div",{staticClass:"l_header_top"},[a("div",{staticClass:"head-title"},[a("span",{staticClass:"title"},[t._v(t._s(t.title))])]),a("div",{staticClass:"l_header_extra"},[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small"},on:{click:t.handleImport}},[a("a-icon",{attrs:{type:"plus"}}),t._v(" 导入")],1),a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small"},on:{click:t.handleDownload}},[a("a-icon",{attrs:{type:"download"}}),t._v(" 导出 ")],1),a("a-button",{attrs:{size:"small",disabled:!t.role},on:{click:t.handleEdit}},[a("a-icon",{attrs:{type:"edit"}}),t._v(" 编辑")],1)],1)]),a("div",{staticClass:"l_header_remark"},[a("p")]),a("div",[a("s-table",{ref:"table",attrs:{columns:t.columns,data:t.loaddata,rowKey:"id"},scopedSlots:t._u([{key:"action",fn:function(e,n){return[a("a-popconfirm",{attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.handleDeleteAdmin(n.id)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{shape:"circle",icon:"delete",size:"small",title:"删除"}})],1)]}}])}),a("a-button",{attrs:{icon:"plus",disabled:!t.role},on:{click:t.handleAddAdmin}},[t._v("新增")])],1)]),a("a-layout-content",{staticClass:"l_content"},[a("a-card",[a("div",{attrs:{slot:"title"},slot:"title"},[a("a-button",{attrs:{type:"primary",icon:"plus",disabled:!t.role},on:{click:t.handleAddCollege}},[t._v("新建学院")])],1),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("span",[t._v("数量："+t._s(t.collegetotal))])]),a("s-table",{ref:"roomtable",attrs:{customRow:t.rowClick,columns:t.collegecolumns,data:t.loadCollegeData,rowKey:"id",pagination:{showTotal:function(t){return"共"+t+"条"}}},scopedSlots:t._u([{key:"collegeLeadership",fn:function(e,n){return t._l(e.collegeLeadership,(function(e,n){return a("span",{key:n,staticStyle:{"margin-right":"8px"}},[t._v(" "+t._s(e.teacherName)+" ")])}))}},{key:"action",fn:function(e,n){return[a("a-popconfirm",{attrs:{disabled:!t.role,title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.handleDeleteCollege(n.id)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{disabled:!t.role,shape:"circle",icon:"delete",size:"small",title:"删除"}})],1)]}}])})],1)],1),a("edit-school",{ref:"editmodules",on:{ok:t.handleOk}}),a("edit-school-admin",{ref:"editadminmodules",on:{ok:t.handlePersonOk}}),a("edit-college",{ref:"editcollege",on:{ok:t.handleTreeOk}}),a("import-Organization",{ref:"importOrganization",on:{ok:t.handleTreeOk}}),a("import-lab-branch",{ref:"importbranch"})],1)},r=[],s=a("2af9"),c=a("788a"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:800,title:"编辑学校",visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"Form",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"学校名称",prop:"name"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},u=[],h=a("5530"),m=a("9d2c"),f=a("5880"),p={components:{dragModal:m["a"]},data:function(){return{visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},form:{name:""},rules:{name:[{required:!0,message:"请填写学校名称！",trigger:"blur"}]}}},methods:Object(h["a"])(Object(h["a"])({},Object(f["mapActions"])(["SetTenant"])),{},{modalshow:function(t){this.visible=!0,this.form.name=t},handleOk:function(){var t=this,e=this.SetTenant;this.btnloading=!0,this.$refs.Form.validate((function(a){if(!a)return t.btnloading=!1,!1;Object(c["w"])(t.form).then((function(a){t.btnloading=!1,t.visible=!1,e(),t.$emit("ok")}))}))},handleCancel:function(){this.visible=!1}})},b=p,g=a("2877"),v=Object(g["a"])(b,d,u,!1,null,null,null),y=v.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:800,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"Form",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"院部名称",prop:"name"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("a-form-model-item",{attrs:{label:"编号",prop:"code"}},[a("a-input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),a("a-form-model-item",{attrs:{label:"介绍",prop:"introduce"}},[a("a-input",{model:{value:t.form.introduce,callback:function(e){t.$set(t.form,"introduce",e)},expression:"form.introduce"}})],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},x=[],C={components:{dragModal:m["a"]},data:function(){return{title:"新增院部",visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},form:{name:"",introduce:"",code:"",id:0},type:1,rules:{name:[{required:!0,message:"请填写院部名称！",trigger:"blur"}],code:[{required:!0,message:"编号不能为空",trigger:"blur"}]}}},methods:{modalshow:function(t,e){var a=this;if(this.type=t,1==t){this.title="新增院部";var n={type:0};Object(c["E"])(n).then((function(t){a.form.code=t}))}else 2==t&&(this.title="编辑院部",this.form.name=e.name,this.form.id=e.id,this.form.code=e.code,this.form.index=e.index,this.form.guid=e.guid,this.form.introduce=e.introduce);this.visible=!0},handleOk:function(){var t=this;this.btnloading=!0,this.$refs.Form.validate((function(e){if(!e)return t.btnloading=!1,!1;1==t.type?Object(c["b"])(t.form).then((function(e){t.btnloading=!1,t.visible=!1,t.$emit("ok"),t.form={name:"",introduce:"",code:"",id:0},t.$refs.Form.resetFields()})):2==t.type&&Object(c["s"])(t.form).then((function(e){t.btnloading=!1,t.visible=!1,t.$emit("ok"),t.form={name:"",introduce:"",code:"",id:0},t.$refs.Form.resetFields()}))}))},handleCancel:function(){this.visible=!1,this.form={name:"",introduce:"",code:"",id:0},this.$refs.Form.resetFields()}}},_=C,w=Object(g["a"])(_,k,x,!1,null,null,null),S=w.exports,O=a("2c77"),L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:500,title:"导入实验室列表",visible:t.visible,destoryOnClose:""},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:16}}},[a("a-row",{attrs:{type:"flex",justify:"center"}},[a("a-rol",[t._v(" 请选择需要上传的文件 "),a("a",{on:{click:t.downloadFile}},[a("a-icon",{attrs:{type:"download"}}),t._v("下载模板 ")],1)])],1),a("br"),a("a-upload-dragger",{attrs:{"file-list":t.fileList,remove:t.handleRemove,"before-upload":t.beforeUpload}},[a("p",{staticClass:"ant-upload-drag-icon"},[a("a-icon",{attrs:{type:"inbox"}})],1),a("p",{staticClass:"ant-upload-text"},[t._v("单击或拖动文件到该区域以上传")])])],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},I=[],D=(a("fb6a"),a("411c"),{components:{dragModal:m["a"]},data:function(){return{id:"",fileList:[],visible:!1,btnloading:!1,confirmLoading:!1,form:this.$form.createForm(this,{name:"Materials"})}},methods:{modalshow:function(t){this.visible=!0,this.id=t},downloadFile:function(){var t="/download/实验室列表模板.xlsx";window.location.href=t},handleRemove:function(t){var e=this.fileList.indexOf(t),a=this.fileList.slice();a.splice(e,1),this.fileList=a},beforeUpload:function(t){if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t.type||"application/vnd.ms-excel.sheet.macroEnabled.12"===t.type)return this.$set(this.fileList,0,t),!1;this.responseErrorMsg("文件格式错误")},handleOk:function(){var t=this;this.fileList.length<1?this.responseErrorMsg("未上传文件"):(this.btnloading=!0,this.confirmLoading=!0,this.form.validateFieldsAndScroll((function(e,a){if(e)t.btnloading=!1;else{var n=new FormData;n.append("file",t.fileList[0]),Object(c["W"])(n).then((function(e){e.successfully&&(t.$message.success("导入成功"),t.handleComplete())})).catch((function(e){t.responseErrorMsg(e.response.data.error)}))}})))},handleCancel:function(){this.fileList=[],this.visible=!1},handleComplete:function(){var t=this;setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok")}),1500)},handleChange:function(t){},responseErrorMsg:function(t){var e=this.$createElement;this.$notification.open({message:"提醒",description:t,icon:e("a-icon",{attrs:{type:"exclamation-circle"},style:"color:red"}),style:{fontSize:"18px"}})}}}),$=D,j=Object(g["a"])($,L,I,!1,null,null,null),P=j.exports,q=a("5cf7"),R=[{title:"管理员",dataIndex:"teacherName"},{title:"联系电话",dataIndex:"phone"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"100px"}],T=[{title:"院部",dataIndex:"name"},{title:"院部分管领导",scopedSlots:{customRender:"collegeLeadership"}},{title:"简介",dataIndex:"introduce"},{title:"操作",dataIndex:"action",width:"100px",scopedSlots:{customRender:"action"}}],E={name:"SchoolBase",props:{code:{type:String},title:{type:String},role:{type:Boolean}},components:{STable:s["h"],EditSchool:y,EditCollege:S,EditSchoolAdmin:O["a"],importOrganization:P,ImportLabBranch:q["a"]},data:function(){var t=this;return{columns:R,collegecolumns:T,params:{Level:1,SkipCount:0,MaxResultCount:5},params2:{Key:"",SkipCount:0,MaxResultCount:5},collegetotal:0,adminBindCode:"",loaddata:function(e){return t.params.SkipCount=(e.pageNo-1)*e.pageSize,t.params.MaxResultCount=e.pageSize,Object(c["R"])(t.params).then((function(a){a.items.length>0&&(t.adminBindCode=a.items[0].bindCode);var n={};return n={data:a.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:a.totalCount},n}))},loadCollegeData:function(e){return t.params2.SkipCount=(e.pageNo-1)*e.pageSize,t.params2.MaxResultCount=e.pageSize,Object(c["z"])(t.params2).then((function(a){var n={};return n={data:a.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:a.totalCount},t.collegetotal=a.totalCount,n}))}}},created:function(){},methods:{handleEdit:function(){this.$refs.editmodules.modalshow(this.title)},handleDownload:function(){this.$refs.importbranch.modalshow()},handleImport:function(){this.$refs.importOrganization.modalshow()},handleAddAdmin:function(){this.$refs.editadminmodules.modalshow(this.adminBindCode,this.code,1)},handleAddCollege:function(){this.$refs.editcollege.modalshow(1)},handleOk:function(){this.$emit("ok")},handlePersonOk:function(){this.$refs.table.refresh()},handleTreeOk:function(){this.$refs.roomtable.refresh(),this.$emit("ok")},handleDeleteAdmin:function(t){var e=this;Object(c["i"])(t).then((function(t){e.$refs.table.refresh(),e.$refs.roomtable.refresh(),e.$emit("ok")}))},handleDeleteCollege:function(t){var e=this;Object(c["j"])(t).then((function(t){e.$refs.roomtable.refresh(!0),e.handleTreeOk()}))},rowClick:function(t,e){var a=this;return{style:{cursor:"pointer"},on:{dblclick:function(){t.level=2,a.$emit("selectChange",t,a.code)}}}}}},M=E,G=(a("16c0"),Object(g["a"])(M,l,r,!1,null,null,null)),A=G.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"college-base"},[a("a-layout-header",{staticClass:"l_header",attrs:{id:"l_header"}},[a("div",{staticClass:"l_header_top"},[a("div",{staticClass:"head-title"},[a("div",{staticStyle:{height:"20px","line-height":"20px"}}),a("span",{staticClass:"title"},[t._v(t._s(t.collegeinfo.name))])]),a("div",{staticClass:"l_header_extra"},[a("span",{staticClass:"code"},[t._v(t._s(t.collegeinfo.code))]),a("a-button",{attrs:{size:"small"},on:{click:t.handleEdit}},[a("a-icon",{attrs:{type:"edit"}}),t._v(" 编辑")],1)],1)]),a("div",{staticClass:"l_header_remark"},[a("p",{staticClass:"l_header_remark_p"},[a("span",[t._v("实验分室数量： "+t._s(t.collegeinfo.collegeData?t.collegeinfo.collegeData.branchNum:""))]),a("span",[t._v("1级危险源实验室数量： "+t._s(t.collegeinfo.collegeData?t.collegeinfo.collegeData.riskSourceNum:""))]),a("span",[t._v("特种设备数量："+t._s(t.collegeinfo.collegeData?t.collegeinfo.collegeData.spEquipmentNum:""))])]),a("p",[t._v(t._s(t.collegeinfo.introduce))])]),void 0,a("table",{staticClass:"l_table"},[a("tbody",[a("tr",[a("td",{staticClass:"rowhead"},[t._v("院部分管领导")]),t._l(t.collegeLeadership,(function(e,n){return a("td",{key:n},[a("span",[t._v(t._s(e.teacherName))]),a("a-popconfirm",{staticStyle:{float:"right"},attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(a){return t.handleClear(e)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{shape:"circle",disabled:!t.role,icon:"delete",size:"small",title:"删除"}})],1)],1)})),a("td",{staticClass:"rowend"},[a("a-button",{attrs:{shape:"circle",disabled:!t.role,size:"small",icon:"plus",title:"新增"},on:{click:function(e){return t.handleEditAdmin(2)}}})],1)],2),a("tr",[a("td",{staticClass:"rowhead"},[t._v("院部实验室安全自查负责人")]),t._l(t.collegeAdministratory,(function(e,n){return a("td",{key:n},[a("span",[t._v(t._s(e.teacherName)+" ")]),a("a-popconfirm",{staticStyle:{float:"right"},attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(a){return t.handleClear(e)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{shape:"circle",disabled:!t.role,icon:"delete",size:"small",title:"删除"}})],1)],1)})),a("td",{staticClass:"rowend"},[a("a-button",{attrs:{shape:"circle",disabled:!t.role,size:"small",icon:"plus",title:"新增"},on:{click:function(e){return t.handleEditAdmin(3)}}})],1)],2),a("tr",[a("td",{staticClass:"rowhead"},[t._v("院部实验室中心主任")]),t._l(t.collegeLabCenterDirector,(function(e,n){return a("td",{key:n},[a("span",[t._v(t._s(e.teacherName))]),a("a-popconfirm",{staticStyle:{float:"right"},attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(a){return t.handleClear(e)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{shape:"circle",disabled:!t.role,icon:"delete",size:"small",title:"删除"}})],1)],1)})),a("td",{staticClass:"rowend"},[a("a-button",{attrs:{shape:"circle",disabled:!t.role,size:"small",icon:"plus",title:"新增"},on:{click:function(e){return t.handleEditAdmin(9)}}})],1)],2),a("tr",[a("td",{staticClass:"rowhead"},[t._v("院部实验室安全管理员")]),t._l(t.labSafetyManager,(function(e,n){return a("td",{key:n},[a("span",[t._v(t._s(e.teacherName)+" ")]),a("a-popconfirm",{staticStyle:{float:"right"},attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(a){return t.handleClear(e)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{shape:"circle",disabled:!t.role,icon:"delete",size:"small",title:"删除"}})],1)],1)})),a("td",{staticClass:"rowend"},[a("a-button",{attrs:{shape:"circle",disabled:!t.role,size:"small",icon:"plus",title:"新增"},on:{click:function(e){return t.handleEditAdmin(10)}}})],1)],2),a("tr",[a("td",{staticClass:"rowhead"},[t._v("院部危险化学品联络人")]),t._l(t.collegeContact,(function(e,n){return a("td",{key:n},[a("span",[t._v(t._s(e.teacherName))]),a("a-popconfirm",{staticStyle:{float:"right"},attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(a){return t.handleClear(e)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{shape:"circle",disabled:!t.role,icon:"delete",size:"small",title:"删除"}})],1)],1)})),a("td",{staticClass:"rowend"},[a("a-button",{attrs:{shape:"circle",disabled:!t.role,size:"small",icon:"plus",title:"新增"},on:{click:function(e){return t.handleEditAdmin(7)}}})],1)],2)])])],2),a("a-layout-content",{staticClass:"l_content"},[a("a-card",[a("div",{attrs:{slot:"title"},slot:"title"},[a("a-button",{attrs:{icon:"plus"},on:{click:t.handleAddLabCenter}},[t._v("新建实验中心")])],1),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("span",[t._v("数量："+t._s(t.labcentertotal))])]),a("s-table",{ref:"roomtable",attrs:{customRow:t.rowClick,columns:t.labcentercolumns,data:t.loadLabCenter,rowKey:"id"},scopedSlots:t._u([{key:"personInCharge",fn:function(e,n){return t._l(e.teacherFunctions,(function(e,n){return a("span",{key:n,staticStyle:{"margin-right":"8px"}},[t._v(" "+t._s(e.teacherName)+" ")])}))}},{key:"action",fn:function(e,n){return[a("a-popconfirm",{attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消",disabled:!t.role},on:{confirm:function(e){return t.handleDeleteLabCenter(n.id)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{shape:"circle",disabled:!t.role,icon:"delete",size:"small",title:"删除"}})],1)]}}])})],1)],1),a("edit-college",{ref:"editcollege",on:{ok:t.handleOk}}),a("edit-school-admin",{ref:"editadminmodules",on:{ok:t.handlePersonOk}}),a("edit-lab-center",{ref:"editlabcenter",on:{ok:t.handleCenterOk}})],1)},B=[],F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:800,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"Form",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"实验中心名称",prop:"name"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("a-form-model-item",{attrs:{label:"编号",prop:"code"}},[a("a-input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),a("a-form-model-item",{attrs:{label:"备注",prop:"reMark"}},[a("a-input",{model:{value:t.form.reMark,callback:function(e){t.$set(t.form,"reMark",e)},expression:"form.reMark"}})],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},z=[],V={components:{dragModal:m["a"]},data:function(){return{title:"新建实验中心",visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},form:{name:"",reMark:"",code:"",collegeCode:"",collegeGuid:""},type:1,rules:{name:[{required:!0,message:"请填写实验中心名称！",trigger:"blur"}],code:[{required:!0,message:"编号不能为空",trigger:"blur"}]}}},methods:{modalshow:function(t,e,a,n){var i=this;if(this.type=t,1==this.type){this.form.collegeCode=e,this.form.collegeGuid=a,this.title="新建实验中心";var o={parentCode:e,parentGuid:a,type:1};Object(c["E"])(o).then((function(t){i.form.code=t}))}else 2==this.type&&(this.title="编辑实验中心",delete n.teacherFunctions,this.form=n);this.visible=!0},handleOk:function(){var t=this;this.btnloading=!0,this.$refs.Form.validate((function(e){if(!e)return t.btnloading=!1,!1;1==t.type?Object(c["d"])(t.form).then((function(e){t.btnloading=!1,t.visible=!1,t.$emit("ok"),t.form={name:"",reMark:"",code:"",collegeCode:"",collegeGuid:""},t.$refs.Form.resetFields()})):2==t.type&&Object(c["u"])(t.form).then((function(e){t.btnloading=!1,t.visible=!1,t.$emit("ok"),t.form={name:"",reMark:"",code:"",collegeCode:"",collegeGuid:""},t.$refs.Form.resetFields()}))}))},handleCancel:function(){this.visible=!1,this.form={name:"",reMark:"",code:"",collegeCode:"",collegeGuid:""},this.$refs.Form.resetFields()}}},K=V,U=Object(g["a"])(K,F,z,!1,null,null,null),Y=U.exports,H=[{title:"管理员",dataIndex:"name"},{title:"工号",dataIndex:"code"},{title:"联系电话",dataIndex:"phone"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"100px"}],Q=[{title:"实验中心",dataIndex:"name"},{title:"实验中心主任",scopedSlots:{customRender:"personInCharge"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],J={name:"CollegeBase",props:{code:{type:String},guid:{type:String},role:{type:Boolean}},watch:{guid:function(t,e){this.init(),this.params2.CollegeGuid=t,this.$refs.roomtable.refresh()}},components:{STable:s["h"],EditCollege:S,EditLabCenter:Y,EditSchoolAdmin:O["a"]},data:function(){var t=this;return{schoolName:"",columns:H,labcentercolumns:Q,collegeinfo:{},collegeLeadership:[],collegeContact:[],collegeAdministratory:[],collegeLabCenterDirector:[],labSafetyManager:[],params2:{CollegeGuid:this.guid,Key:"",SkipCount:0,MaxResultCount:5},labcentertotal:0,loadLabCenter:function(e){return t.params2.SkipCount=(e.pageNo-1)*e.pageSize,t.params2.MaxResultCount=e.pageSize,Object(c["K"])(t.params2).then((function(a){var n={};return n={data:a.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:a.totalCount},t.labcentertotal=a.totalCount,n}))}}},created:function(){this.init()},methods:{init:function(){var t=this;Object(c["C"])({guid:this.guid}).then((function(e){t.collegeinfo=e,t.collegeLeadership=e.collegeLeadership,t.collegeContact=e.collegeContact,t.collegeAdministratory=e.collegeAdministratory,t.collegeLabCenterDirector=e.collegeLabCenterDirector,t.labSafetyManager=e.labSafetyManager,null==t.collegeLabCenterDirector&&(t.collegeLabCenterDirector={teacherName:"",teacherCode:"",phone:null,level:9}),null==t.labSafetyManager&&(t.labSafetyManager={teacherName:"",teacherCode:"",phone:null,level:10})}))},handleClear:function(t){var e=this;Object(c["i"])(t.id).then((function(t){e.init()}))},handleEdit:function(){this.$refs.editcollege.modalshow(2,this.collegeinfo)},handleEditAdmin:function(t){this.$refs.editadminmodules.modalshow("",this.guid,t)},handleAddLabCenter:function(){this.$refs.editlabcenter.modalshow(1,this.collegeinfo.code,this.guid)},handleDeleteLabCenter:function(t){var e=this;Object(c["l"])(t).then((function(t){e.$refs.roomtable.refresh(),e.$emit("ok")}))},handleOk:function(){this.init(),this.$emit("ok")},handlePersonOk:function(){this.init()},handleCenterOk:function(){this.$refs.roomtable.refresh(),this.$emit("ok")},rowClick:function(t,e){var a=this;return{style:{cursor:"pointer"},on:{dblclick:function(){t.level=3,a.$emit("selectChange",t,a.collegeinfo.code)}}}}}},W=J,Z=(a("2641"),Object(g["a"])(W,N,B,!1,null,null,null)),X=Z.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lab_center_base"},[a("a-layout-header",{staticClass:"l_header"},[a("div",{staticClass:"l_header_top"},[a("div",{staticClass:"head-title"},[a("div",{staticStyle:{height:"20px","line-height":"20px"}},[a("a-breadcrumb-item",[t._v(" "+t._s(t.labcenterinfo.collegeName))])],1),a("span",{staticClass:"title"},[t._v(t._s(t.labcenterinfo.name))])]),a("div",{staticClass:"l_header_extra"},[a("span",{staticClass:"code"},[t._v(t._s(t.labcenterinfo.code))]),a("a-button",{attrs:{size:"small"},on:{click:t.handleEdit}},[a("a-icon",{attrs:{type:"edit"}}),t._v(" 编辑")],1)],1)]),a("div",{staticClass:"l_header_remark"},[a("p",[t._v(t._s(t.labcenterinfo.remark))])]),a("div",[a("a-table",{attrs:{columns:t.columns,"data-source":t.teacherFunctions,rowKey:"id"},scopedSlots:t._u([{key:"action",fn:function(e,n){return[a("a-popconfirm",{attrs:{disabled:9==n.level,title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.handleDeleteAdmin(n.id)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{disabled:9==n.level,shape:"circle",icon:"delete",size:"small",title:"删除"}})],1)]}}])}),a("a-button",{attrs:{icon:"plus"},on:{click:t.handleAddAdmin}},[t._v("新增")])],1)]),a("a-layout-content",{staticClass:"l_content"},[a("a-card",[a("div",{attrs:{slot:"title"},slot:"title"},[a("a-button",{attrs:{icon:"plus"},on:{click:t.handleAddLab}},[t._v("新建实验室")])],1),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("span",[t._v("数量："+t._s(t.laboratorytotal))])]),a("s-table",{ref:"roomtable",attrs:{customRow:t.rowClick,columns:t.labcolumns,data:t.loadLaboratory,rowKey:"id"},scopedSlots:t._u([{key:"action",fn:function(e,n){return[a("a-popconfirm",{attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消",disabled:!t.role},on:{confirm:function(e){return t.handleDeleteLaboratory(n.id)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{shape:"circle",disabled:!t.role,icon:"delete",size:"small",title:"删除"}})],1)]}}])})],1)],1),a("edit-lab-center",{ref:"editlabcenter",on:{ok:t.handleOk}}),a("edit-laboratory",{ref:"editlaboratory",on:{ok:t.handleLabOk}}),a("edit-school-admin",{ref:"editadminmodules",on:{ok:t.handlePersonOk}})],1)},et=[],at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:800,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"Form",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"实验室名称",prop:"name"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"编号",prop:"code"}},[a("a-input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"建立时间",prop:"createTime"}},[a("a-date-picker",{on:{change:t.onChange},model:{value:t.form.establishmentTime,callback:function(e){t.$set(t.form,"establishmentTime",e)},expression:"form.establishmentTime"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"所在校区",prop:"schoolRegionCode"}},[a("a-select",{model:{value:t.form.schoolRegionCode,callback:function(e){t.$set(t.form,"schoolRegionCode",e)},expression:"form.schoolRegionCode"}},t._l(t.regions,(function(e){return a("a-select-option",{key:e.code},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"备注",prop:"remark","label-col":{span:3},"wrapper-col":{span:19}}},[a("a-textarea",{attrs:{rows:"4"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},nt=[],it=a("c1df"),ot=a.n(it),lt={name:"",code:"",establishmentTime:ot()(),usageArea:0,remark:"",labCenterCode:"",labCenterGuid:"",level:""},rt={components:{dragModal:m["a"]},data:function(){return{title:"新建实验室",visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},form:this.clone(lt),rules:{name:[{required:!0,message:"请填写实验中心名称！",trigger:"blur"}],code:[{required:!0,message:"编号不能为空",trigger:"blur"}],schoolRegionCode:[{required:!0,message:"校区不能为空",trigger:"blur"}]},type:1,labTypes:[],labCategory:[],labLevel:[],regions:[]}},created:function(){this.handleInit()},methods:{moment:ot.a,clone:function(t){var e=JSON.parse(JSON.stringify(t));return e},handleInit:function(){var t=this;Object(c["S"])().then((function(e){t.regions=e.items}))},modalshow:function(t,e,a){var n=this;if(this.type=t,1==this.type){this.form.labCenterCode=e.code,this.form.labCenterGuid=e.guid,this.form.collegeGuid=e.collegeGuid,this.title="新建实验室";var i={parentCode:this.form.labCenterCode,parentGuid:this.form.labCenterGuid,type:2};Object(c["E"])(i).then((function(t){n.form.code=t}))}else 2==this.type&&(this.title="编辑实验室",delete a.teacherFunctions,this.form=a);this.visible=!0},handleOk:function(){var t=this;this.btnloading=!0,this.$refs.Form.validate((function(e){if(!e)return t.btnloading=!1,!1;1==t.type?Object(c["e"])(t.form).then((function(e){t.btnloading=!1,t.visible=!1,t.form=t.clone(lt),t.$emit("ok")})):2==t.type&&Object(c["v"])(t.form).then((function(e){t.btnloading=!1,t.visible=!1,t.$emit("ok"),t.form=t.clone(lt)}))}))},handleCancel:function(){this.form=this.clone(lt),this.visible=!1},onChange:function(t,e){}}},st=rt,ct=Object(g["a"])(st,at,nt,!1,null,null,null),dt=ct.exports,ut=[{title:"实验中心主任",dataIndex:"teacherName"},{title:"联系电话",dataIndex:"phone"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"100px"}],ht=[{title:"实验室",dataIndex:"name"},{title:"实验室负责人",dataIndex:"teacherFunctionsName"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"100px"}],mt={name:"LabCenterBase",props:{code:{type:String},guid:{type:String},role:{type:Boolean}},watch:{guid:function(t,e){this.init(),this.params2.LabCenterGuid=t,this.$refs.roomtable.refresh()}},components:{STable:s["h"],EditLabCenter:Y,EditLaboratory:dt,EditSchoolAdmin:O["a"]},data:function(){var t=this;return{columns:ut,labcolumns:ht,labcenterinfo:{},teacherFunctions:[],params2:{LabCenterGuid:this.guid,Key:"",SkipCount:0,MaxResultCount:5},laboratorytotal:0,adminBindCode:"",loadLaboratory:function(e){return t.params2.SkipCount=(e.pageNo-1)*e.pageSize,t.params2.MaxResultCount=e.pageSize,Object(c["N"])(t.params2).then((function(a){var n={};return n={data:a.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:a.totalCount},t.laboratorytotal=a.totalCount,n}))}}},created:function(){this.init()},methods:{init:function(){var t=this;Object(c["L"])({guid:this.guid}).then((function(e){t.labcenterinfo=e,t.teacherFunctions=e.teacherFunctions,t.teacherFunctions.length>0&&(t.adminBindCode=t.teacherFunctions[0].bindCode)}))},handleEdit:function(){this.$refs.editlabcenter.modalshow(2,null,null,this.labcenterinfo)},handleAddLab:function(){this.$refs.editlaboratory.modalshow(1,this.labcenterinfo)},handleDeleteLaboratory:function(t){var e=this;Object(c["n"])(t).then((function(t){e.$refs.roomtable.refresh(),e.$emit("ok")}))},handleAddAdmin:function(){this.$refs.editadminmodules.modalshow(this.adminBindCode,this.guid,4)},handleDeleteAdmin:function(t){var e=this;Object(c["i"])(t).then((function(t){e.init()}))},rowClick:function(t,e){var a=this;return{style:{cursor:"pointer"},on:{dblclick:function(){t.level=4,a.$emit("selectChange",t,a.labcenterinfo.code)}}}},handleOk:function(){this.init(),this.$emit("ok")},handleLabOk:function(){this.$refs.roomtable.refresh(),this.$emit("ok")},handlePersonOk:function(){this.init()}}},ft=mt,pt=(a("0d59"),Object(g["a"])(ft,tt,et,!1,null,null,null)),bt=pt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"laboratory-base"},[a("a-layout-header",{staticClass:"l_header",attrs:{id:"l_header"}},[a("div",{staticClass:"l_header_top"},[a("div",{staticClass:"head-title"},[a("div",{staticStyle:{height:"20px","line-height":"20px"}},[a("a-breadcrumb-item",[t._v(" "+t._s(t.laboratoryinfo.collegeName))]),a("a-breadcrumb-item",[t._v(" "+t._s(t.laboratoryinfo.labCenterName))])],1),a("span",{staticClass:"title"},[t._v(t._s(t.laboratoryinfo.name))])]),a("div",{staticClass:"l_header_extra"},[a("span",{staticClass:"code"},[t._v(t._s(t.laboratoryinfo.code))]),a("a-button",{attrs:{size:"small"},on:{click:t.handleEdit}},[a("a-icon",{attrs:{type:"edit"}}),t._v("编辑")],1)],1)]),a("div",{staticClass:"l_header_remark"},[a("p")]),a("div",[a("a-table",{ref:"table",attrs:{columns:t.columns,"data-source":t.teacherFunctions,rowKey:"id"},scopedSlots:t._u([{key:"action",fn:function(e,n){return[a("a-popconfirm",{attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.handleDeleteAdmin(n.id)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{shape:"circle",icon:"delete",size:"small",title:"删除"}})],1)]}}])}),a("a-button",{attrs:{icon:"plus"},on:{click:t.handleAddAdmin}},[t._v("新增")])],1)]),a("a-layout-content",{staticClass:"l_content"},[a("a-card",[a("div",{attrs:{slot:"title"},slot:"title"},[a("a-button",{attrs:{icon:"plus"},on:{click:t.handleAddBranch}},[t._v("新建实验分室")])],1),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("span",[t._v("数量："+t._s(t.branchtotal))])]),a("s-table",{ref:"roomtable",attrs:{customRow:t.rowClick,columns:t.branchcolumns,data:t.loadbranch,rowKey:"id"},scopedSlots:t._u([{key:"teacherName",fn:function(e,n){return t._l(e.responsible,(function(e,n){return a("span",{key:n,staticStyle:{"margin-right":"8px"}},[t._v(t._s(e.teacherName))])}))}},{key:"action",fn:function(e,n){return[a("a-popconfirm",{attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消",disabled:!t.role},on:{confirm:function(e){return t.handleDeleteLabBranch(n.id)}}},[a("a-button",{staticStyle:{color:"red"},attrs:{shape:"circle",disabled:!t.role,icon:"delete",size:"small",title:"删除"}})],1)]}}])})],1)],1),a("edit-laboratory",{ref:"editlaboratory",on:{ok:t.handleOk}}),a("edit-school-admin",{ref:"editadminmodules",on:{ok:t.handlePersonOk}}),a("edit-branch",{ref:"editbranch",on:{ok:t.handleBranchOk}})],1)},vt=[],yt=a("6a0b"),kt=[{title:"实验室负责人",dataIndex:"teacherName"},{title:"联系电话",dataIndex:"phone"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"100px"}],xt=[{title:"实验分室",dataIndex:"name"},{title:"实验分室负责人",scopedSlots:{customRender:"teacherName"}},{title:"校区",dataIndex:"schoolRegionName"},{title:"地点",dataIndex:"address"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"100px"}],Ct={name:"SchoolBase",props:{code:{type:String},guid:{type:String},role:{type:Boolean}},watch:{guid:function(t,e){this.init(),this.$refs.roomtable.refresh(),this.params2.LaboratoryGuid=t}},components:{STable:s["h"],EditLaboratory:dt,EditBranch:yt["a"],EditSchoolAdmin:O["a"]},data:function(){var t=this;return{columns:kt,branchcolumns:xt,laboratoryinfo:{},teacherFunctions:[],params2:{LaboratoryGuid:this.guid,Key:"",SkipCount:0,MaxResultCount:5},branchtotal:0,adminBindCode:"",loadbranch:function(e){return t.params2.SkipCount=(e.pageNo-1)*e.pageSize,t.params2.MaxResultCount=e.pageSize,Object(c["F"])(t.params2).then((function(a){var n={};return n={data:a.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:a.totalCount},t.branchtotal=a.totalCount,n}))}}},created:function(){this.init()},methods:{init:function(){var t=this;Object(c["O"])({guid:this.guid}).then((function(e){t.laboratoryinfo=e,t.teacherFunctions=e.teacherFunctions,t.teacherFunctions.length>0&&(t.adminBindCode=t.teacherFunctions[0].bindCode)}))},handleEdit:function(){this.$refs.editlaboratory.modalshow(2,null,this.laboratoryinfo)},handleAddAdmin:function(){this.$refs.editadminmodules.modalshow(this.adminBindCode,this.guid,5)},handleAddBranch:function(){this.$refs.editbranch.modalshow(1,this.laboratoryinfo)},handleDeleteLabBranch:function(t){var e=this;Object(c["k"])(t).then((function(t){e.$refs.roomtable.refresh(),e.$emit("ok")}))},handleDeleteAdmin:function(t){var e=this;Object(c["i"])(t).then((function(t){e.init()}))},rowClick:function(t,e){var a=this;return{style:{cursor:"pointer"},on:{dblclick:function(){t.level=5,a.$emit("selectChange",t,a.laboratoryinfo.code)}}}},handleOk:function(){this.init(),this.$emit("ok")},handlePersonOk:function(){this.init()},handleBranchOk:function(){this.$refs.roomtable.refresh(),this.$emit("ok")}}},_t=Ct,wt=(a("ccc0"),Object(g["a"])(_t,gt,vt,!1,null,null,null)),St=wt.exports,Ot=a("8459c"),Lt={components:{SchoolBase:A,CollegeBase:X,LabCenterBase:bt,LaboratoryBase:St,BranchBase:Ot["a"]},data:function(){return{sidelist:[],treeCollapsed:!1,selectedKeys:[],expandedKeys:[],selectedlevel:"1",selectedTitle:"",selectedGuid:"",schoolName:"",isSchoolAdmin:!1}},mounted:function(){var t=this.$store.getters.userInfo.role;-1!=t.indexOf("SchoolAdministratory")&&(this.isSchoolAdmin=!0)},created:function(){this.getTree()},methods:{getTree:function(){var t=this;this.sidelist=[],Object(c["P"])().then((function(e){t.schoolName=e.name,0==t.selectedKeys.length&&(t.selectedKeys.push(e.code),t.selectedTitle=e.name),0==t.expandedKeys.length&&t.expandedKeys.push(e.code);var a=JSON.parse(JSON.stringify(e).replace(/name/g,"title").replace(/code/g,"key"));t.treeTraversal(a),t.sidelist.push(a)}))},treeTraversal:function(t){if(t.scopedSlots={title:"custom"},t.children)for(var e=0;e<t.children.length;e++)this.treeTraversal(t.children[e])},handleOk:function(){this.getTree()},handleChange:function(t,e){this.selectedlevel=t.level,this.selectedGuid=t.guid,this.selectedTitle=t.name,this.selectedKeys=[],this.selectedKeys.push(t.code),this.expandedKeys.push(e)},onExpand:function(t,e){this.expandedKeys=t},onSelect:function(t,e){if(e.selectedNodes[0]){var a=e.selectedNodes[0].data.props.level,n=e.selectedNodes[0].data.props.guid,i=e.selectedNodes[0].data.props.title;this.selectedlevel=a,this.selectedGuid=n,this.selectedTitle=i}this.selectedKeys=t},onDragenter:function(t){},onDrop:function(t){var e=t.node.pos.split("-"),a=t.dragNode.pos.split("-");if(a.length===e.length&&e[1]!==a[1])return this.$message.error("不可拖入其他类别");if(e.length!==a.length)return this.$message.error("列表禁止跨级拖拽");if(!t.dropToGap)return this.$message.error("同级列表只能互换顺序");var n,i=t.node.eventKey,l=t.dragNode.eventKey,r=t.node.pos.split("-"),s=t.dropPosition-Number(r[r.length-1]),c=function t(e,a,n){e.forEach((function(e,i,o){return e.key===a?n(e,i,o):e.children?t(e.children,a,n):void 0}))},d=Object(o["a"])(this.sidelist);if(c(d,l,(function(t,e,a){a.splice(e,1),n=t})),t.dropToGap)if((t.node.children||[]).length>0&&t.node.expanded&&1===s)c(d,i,(function(t){t.children=t.children||[],t.children.unshift(n)}));else{var u,h;c(d,i,(function(t,e,a){u=a,h=e})),-1===s?u.splice(h,0,n):u.splice(h+1,0,n)}else c(d,i,(function(t){t.children=t.children||[],t.children.push(n)}));this.sidelist=d}}},It=Lt,Dt=(a("5b7a"),Object(g["a"])(It,n,i,!1,null,null,null));e["default"]=Dt.exports},"928d6":function(t,e,a){"use strict";var n=a("b651"),i=a.n(n);i.a},9447:function(t,e,a){},"95e5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account-settings-info-view"},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:12,lg:12}},[a("a-form",{attrs:{layout:"vertical"}},[a("a-col",{attrs:{md:24,lg:24}},[a("a-form-item",{attrs:{label:"名称","label-col":{span:4}}},[a("a-input",{attrs:{value:t.userInfo.name,disabled:!0}})],1)],1),a("a-col",{attrs:{md:24,lg:24}},[a("a-form-item",{attrs:{label:"电子邮箱","label-col":{span:4}}},[a("a-input",{attrs:{value:t.userInfo.email,disabled:!0}})],1)],1),a("a-col",{staticStyle:{"text-align":"right"},attrs:{md:24,lg:24}},[a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:t.chagePassword}},[t._v("修改用户密码")])],1)],1)],1)],1)],1),a("change-psd",{ref:"changeModal"})],1)},i=[],o=a("4360"),l=a("0dbc"),r={components:{ChangePsd:l["a"]},data:function(){return{userInfo:{},form:this.$form.createForm()}},mounted:function(){this.userInfo=o["a"].getters.userInfo},methods:{chagePassword:function(){this.$refs.changeModal.modalshow()}}},s=r,c=a("2877"),d=Object(c["a"])(s,n,i,!1,null,null,null);e["default"]=d.exports},"9b63":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inspect_stat"},[a("a-layout",[a("a-layout-sider",{staticStyle:{background:"#fff !important","background-image":"#fff"},attrs:{width:"450"}},[a("a-range-picker",{staticStyle:{width:"440px"},attrs:{placeholder:["开始时间","结束时间"]},on:{change:t.rangeChange}}),a("a-table",{attrs:{columns:t.collegcolumns,"data-source":t.collegelist,pagination:!1,customRow:t.rowClick,rowClassName:t.judgeRow}})],1),a("a-layout-content",[a("a-card",{staticClass:"table_con"},[a("s-table",{ref:"table",attrs:{columns:t.columns,data:t.loadData},scopedSlots:t._u([{key:"content",fn:function(e){return[a("pre",[t._v(t._s(e))])]}},{key:"status",fn:function(e){return[0==e?a("a-tag",{attrs:{color:"red"}},[t._v("整改中")]):t._e(),1==e?a("a-tag",{attrs:{color:"blue"}},[t._v("审核中")]):t._e(),2==e?a("a-tag",{attrs:{color:"green"}},[t._v("整改完成")]):t._e()]}},{key:"creationTime",fn:function(e){return[a("span",[t._v(t._s(e?e.substring(0,10):""))])]}},{key:"action",fn:function(e,n){return[a("a-button",{staticStyle:{"margin-right":"4px"},attrs:{icon:"file-search",title:"详情"},on:{click:function(e){return t.handleDetail(n)}}})]}}])})],1)],1)],1)],1)},i=[],o=(a("4160"),a("159b"),a("2af9")),l=a("6a7e"),r=[{title:"实验分室",dataIndex:"name"},{title:"隐患数",dataIndex:"hiddenDangerNum"},{title:"完成数",dataIndex:"completeNum"}],s=[{title:"隐患内容",dataIndex:"content",ellipsis:!0,scopedSlots:{customRender:"content"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"},width:"120px"},{title:"发现时间",dataIndex:"creationTime",scopedSlots:{customRender:"creationTime"},width:"120px"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"60px"}],c={components:{STable:o["h"]},data:function(){var t=this;return{dangerdata:[],columns:s,collegcolumns:r,collegelist:[],MinFindTime:"",MaxFindTime:"",clicked:void 0,queryParam:{CollegeGuid:"",LabBranchGuid:"",IsEventDanger:!1,MinFindTime:"",MaxFindTime:"",SkipCount:0,MaxResultCount:10},loadData:function(e){return t.queryParam.SkipCount=(e.pageNo-1)*e.pageSize,t.queryParam.MaxResultCount=e.pageSize,Object(l["S"])(t.queryParam).then((function(t){var a={};return a={data:t.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:t.totalCount},a}))}}},created:function(){this.init()},methods:{init:function(){this.getCollegeList(!0)},getCollegeList:function(t){var e=this;this.columns=s;var a={MinFindTime:this.MinFindTime,MaxFindTime:this.MaxFindTime};Object(l["C"])(a).then((function(a){e.collegelist=a,t&&e.$refs.table.refresh(),e.collegelist&&e.collegelist.length&&0==e.collegelist[0].level&&(e.collegcolumns.forEach((function(t){"name"==t.dataIndex&&(t.title="学院")})),e.columns=[{title:"实验分室",dataIndex:"branchName"},{title:"隐患内容",dataIndex:"content",ellipsis:!0,scopedSlots:{customRender:"content"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"},width:"120px"},{title:"发现时间",dataIndex:"creationTime",scopedSlots:{customRender:"creationTime"},width:"120px"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"60px"}])}))},getDangerList:function(t){var e=this,a={CollegeGuid:t.collegeGuid,IsEventDanger:!1,MinFindTime:this.MinFindTime,MaxFindTime:this.MaxFindTime,SkipCount:0,MaxResultCount:999};Object(l["S"])(a).then((function(t){e.dangerdata=t.items}))},rowClick:function(t,e){var a=this;return{on:{click:function(n){a.clicked=e,t&&(1==t.level?a.queryParam.LabBranchGuid=t.guid:a.queryParam.CollegeGuid=t.guid),a.$refs.table.refresh()}}}},judgeRow:function(t,e){return e==this.clicked?"selectRow":""},rangeChange:function(t,e){this.MinFindTime=e[0],this.MaxFindTime=e[1],this.queryParam.MinFindTime=e[0],this.queryParam.MaxFindTime=e[1],this.getCollegeList(!0)},handleDetail:function(t){this.$router.push({name:"dangerDetail",query:{id:t.id}})}}},d=c,u=(a("71bf"),a("2877")),h=Object(u["a"])(d,n,i,!1,null,null,null);e["default"]=h.exports},"9fea":function(t,e,a){"use strict";var n=a("1ac9"),i=a.n(n);i.a},a1a3:function(t,e,a){"use strict";var n=a("497f"),i=a.n(n);i.a},a237:function(t,e,a){"use strict";var n=a("3f4c"),i=a.n(n);i.a},a2b2:function(t,e,a){},a2c6:function(t,e,a){"use strict";var n=a("f60b"),i=a.n(n);i.a},a2e7:function(t,e,a){"use strict";var n=a("d7be"),i=a.n(n);i.a},a475:function(t,e,a){},a71d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"hidden_danger"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"headtitle"},[t._v("隐患清单")])]),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{attrs:{icon:"download"},on:{click:t.handleExport}},[t._v("导出数据")])],1),a("a-form-model",{attrs:{model:t.queryParam}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-model-item",{attrs:{label:"活动名称"}},[a("a-select",{ref:"ActivityName",attrs:{"allow-clear":""},model:{value:t.queryParam.EventId,callback:function(e){t.$set(t.queryParam,"EventId",e)},expression:"queryParam.EventId"}},t._l(t.ActivityNameList,(function(e,n){return a("a-select-option",{key:n,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-model-item",{attrs:{label:"院部"}},[a("select-collegeguid",{ref:"Scollege",on:{change:t.handleSelectCollege},model:{value:t.queryParam.CollegeGuid,callback:function(e){t.$set(t.queryParam,"CollegeGuid",e)},expression:"queryParam.CollegeGuid"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-model-item",{attrs:{label:"实验中心"}},[a("select-labcenter",{ref:"Slabcenter",on:{change:t.handleSelectCenter},model:{value:t.queryParam.LabCenterGuid,callback:function(e){t.$set(t.queryParam,"LabCenterGuid",e)},expression:"queryParam.LabCenterGuid"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-model-item",{attrs:{label:"实验室"}},[a("select-lab",{ref:"Slaboratory",on:{change:t.handleSelectOratory},model:{value:t.queryParam.LaboratoryGuid,callback:function(e){t.$set(t.queryParam,"LaboratoryGuid",e)},expression:"queryParam.LaboratoryGuid"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"实验分室"}},[a("select-branch",{ref:"Sbranch",on:{change:t.handleSelectBranch},model:{value:t.queryParam.LabBranchGuid,callback:function(e){t.$set(t.queryParam,"LabBranchGuid",e)},expression:"queryParam.LabBranchGuid"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"整改状态"}},[a("a-select",{ref:"Status",attrs:{"allow-clear":""},model:{value:t.queryParam.Status,callback:function(e){t.$set(t.queryParam,"Status",e)},expression:"queryParam.Status"}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 整改中 ")]),a("a-select-option",{attrs:{value:"1"}},[t._v(" 审核中 ")]),a("a-select-option",{attrs:{value:"2"}},[t._v(" 整改完成 ")])],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"20px"},on:{click:t.handleClear}},[t._v("清空")])],1)],1)],1),a("s-table",{ref:"table",attrs:{columns:t.columns,data:t.loaddata,rowKey:"id",showPagination:!0,pagination:{defaultPageSize:10,showTotal:function(t){return"共 "+t+" 条"}}},scopedSlots:t._u([{key:"branchName",fn:function(e,n){return[a("span",[t._v(t._s(n.branchName))]),a("br"),a("span",[t._v(t._s(n.address))])]}},{key:"picture",fn:function(e,n){return t._l(n.photos.filter(t.findDanger).slice(0,1),(function(t,e){return a("div",{key:e,staticStyle:{float:"left"}},[a("img",{staticStyle:{"margin-right":"4px"},attrs:{src:t.url+"&type=3",alt:"",width:"80px"}})])}))}},{key:"rectifypicture",fn:function(e,n){return t._l(n.photos.filter(t.findRectify).slice(0,1),(function(t,e){return a("div",{key:e,staticStyle:{float:"left"}},[a("img",{staticStyle:{"margin-right":"4px"},attrs:{src:t.url+"&type=3",alt:"",width:"80px"}})])}))}},{key:"status",fn:function(e){return[0==e?a("a-tag",{attrs:{color:"red"}},[t._v("整改中")]):t._e(),1==e?a("a-tag",{attrs:{color:"blue"}},[t._v("审核中")]):t._e(),2==e?a("a-tag",{attrs:{color:"green"}},[t._v("整改完成")]):t._e()]}},{key:"action",fn:function(e,n){return[a("a-button",{staticStyle:{"margin-right":"4px"},attrs:{icon:"file-search",shape:"circle",title:"详情"},on:{click:function(e){return t.handleDetail(n)}}}),0!=n.status||-1==n.level.indexOf(9)&&-1==n.level.indexOf(10)&&-1==n.level.indexOf(7)?t._e():a("a-button",{staticStyle:{"margin-right":"4px"},attrs:{title:"上传整改图片",icon:"edit",shape:"circle"},on:{click:function(e){return t.uploadRectify(n)}}}),-1!=n.level.indexOf(1)||-1!=n.level.indexOf(3)||-1!=n.level.indexOf(2)?a("a-button",{staticStyle:{"margin-right":"4px"},attrs:{title:"审核",icon:"file-done",shape:"circle",disabled:1!=n.status},on:{click:function(e){return t.HandleRectify(n)}}}):t._e(),-1!=n.level.indexOf(1)?a("a-popconfirm",{attrs:{title:"确认删除","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(e){return t.handledelete(n)}}},[a("a-button",{staticStyle:{"margin-right":"4px"},attrs:{icon:"delete",shape:"circle",type:"danger",title:"删除"}})],1):t._e()]}}])}),a("edit-rectify",{ref:"modal",on:{ok:t.handleRefresh}}),a("verity-rectify",{ref:"vemodal",on:{ok:t.handleRefresh}})],1)},i=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("d973")),l=a("f0a9"),r=a("1d87"),s=(a("ea98"),a("2af9")),c=a("6a7e"),d=[{title:"院部",dataIndex:"collegeName",width:"140px"},{title:"实验室分室/所在地点",dataIndex:"branchName",width:"200px",scopedSlots:{customRender:"branchName"}},{title:"隐患内容",dataIndex:"content",ellipsis:!0,width:"200px",scopedSlots:{customRender:"content"}},{title:"实验分室负责人",dataIndex:"branchPrincipal",width:"130px"},{title:"整改负责人",dataIndex:"principal",width:"120px"},{title:"联系方式",dataIndex:"phoneNum",ellipsis:!0},{title:"整改状态",dataIndex:"status",scopedSlots:{customRender:"status"},width:"90px"},{title:"隐患照片",dataIndex:"picture",scopedSlots:{customRender:"picture"},ellipsis:!0},{title:"整改照片",dataIndex:"rectifypicture",scopedSlots:{customRender:"rectifypicture"},ellipsis:!0},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"150px"}],u={components:{ASpace:r["a"],EditRectify:o["a"],VerityRectify:l["a"],SelectCollegeguid:s["k"],SelectLabcenter:s["m"],SelectLab:s["l"],SelectBranch:s["i"],STable:s["h"]},data:function(){var t=this;return{form:this.$form.createForm(this),columns:d,data:[],ActivityNameList:[],queryParam:{CollegeGuid:"",LabCenterGuid:"",LaboratoryGuid:"",LabBranchGuid:"",ActivityName:"",EventId:"",Status:"",IsEventDanger:!0,SkipCount:0,MaxResultCount:10},loaddata:function(e){return t.queryParam.SkipCount=(e.pageNo-1)*e.pageSize,t.queryParam.MaxResultCount=e.pageSize,Object(c["S"])(t.queryParam).then((function(t){var a={};return a={data:t.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:t.totalCount},a}))}}},created:function(){this.getActivityNameList()},methods:{getActivityNameList:function(){var t=this,e={Key:"",SkipCount:0,MaxResultCount:1e3};Object(c["z"])(e).then((function(e){t.ActivityNameList=e.items}))},handleSelectCollege:function(t){this.queryParam.CollegeGuid=t,this.queryParam.LabCenterGuid="",this.queryParam.LaboratoryGuid="",this.queryParam.LabBranchGuid="",this.$refs.Slabcenter.handleCollegeChange(t),this.$refs.Slaboratory.handleCollegeChange(t),this.$refs.Sbranch.handleParamChange(this.queryParam.CollegeGuid,this.queryParam.LabCenterGuid,this.queryParam.LaboratoryGuid)},handleSelectCenter:function(t){""==t&&this.$refs.Slabcenter.handleCollegeChange(this.queryParam.CollegeGuid),this.queryParam.LabCenterGuid=t,this.queryParam.LaboratoryGuid="",this.queryParam.LabBranchGuid="",this.$refs.Slaboratory.handleLabcenterChange(t),this.$refs.Sbranch.handleParamChange(this.queryParam.CollegeGuid,this.queryParam.LabCenterGuid,this.queryParam.LaboratoryGuid)},handleSelectOratory:function(t){""==t&&(this.$refs.Slaboratory.handleCollegeChange(this.queryParam.CollegeGuid),this.$refs.Slaboratory.handleLabcenterChange(this.queryParam.labcenterGuid)),this.queryParam.LaboratoryGuid=t,this.queryParam.LabBranchGuid="",this.$refs.Sbranch.handleParamChange(this.queryParam.CollegeGuid,this.queryParam.LabCenterGuid,this.queryParam.LaboratoryGuid)},handleSelectBranch:function(t){""==t&&this.$refs.Sbranch.handleParamChange(this.queryParam.CollegeGuid,this.queryParam.LabCenterGuid,this.queryParam.LaboratoryGuid),this.queryParam.LabBranchGuid=t},handleSearch:function(){var t=this;this.form.validateFieldsAndScroll((function(e,a){e||Object.assign(t.queryParam,a)})),this.$refs.table.refresh(!0)},handleDownLoad:function(){var t=this;Object(c["w"])(this.queryParam).then((function(e){var a=e,n=new Blob([a]),i=t.info.collegename+"实验室检查隐患登记表.xlsx";if("download"in document.createElement("a")){var o=document.createElement("a");o.download=i,o.style.display="none",o.href=URL.createObjectURL(n),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(n,i)}))},handleClear:function(){this.queryParam={CollegeGuid:"",LabCenterGuid:"",LaboratoryGuid:"",LabBranchGuid:"",ActivityName:"",EventId:"",Status:"",IsEventDanger:!0,SkipCount:0,MaxResultCount:10},this.$refs.Scollege.handleClear(),this.$refs.Slaboratory.handleClear(),this.$refs.Slabcenter.handleClear(),this.$refs.Sbranch.handleClear(),this.form.resetFields(),this.$refs.table.refresh(!0)},findDanger:function(t,e,a){if(0==t.type)return t},findRectify:function(t,e,a){if(1==t.type)return t},findRecNum:function(t,e,a){if(0!=t.status)return t},uploadRectify:function(t){this.$refs.modal.modalshow(t)},handleDetail:function(t){this.$router.push({name:"dangerDetail",query:{id:t.id}})},HandleRectify:function(t){this.$refs.vemodal.modalshow(t.id)},handleRefresh:function(){this.$refs.table.refresh()},handledelete:function(t){var e=this;Object(c["p"])(t.id).then((function(t){e.$refs.table.refresh()}))},handleExport:function(){var t={collegeGuid:this.queryParam.CollegeGuid,labCenterGuid:this.queryParam.LabCenterGuid,laboratoryGuid:this.queryParam.LaboratoryGuid,labBranchGuid:this.queryParam.LabBranchGuid,eventId:this.queryParam.EventId,status:""!=this.queryParam.Status?this.queryParam.Status:null,isEventDanger:!0,skipCount:this.queryParam.SkipCount,maxResultCount:this.queryParam.MaxResultCount};Object(c["x"])(t).then((function(t){var e=t,a=new Blob([e]),n="自查隐患清单.xlsx";if("download"in document.createElement("a")){var i=document.createElement("a");i.download=n,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}else navigator.msSaveBlob(a,n)}))}}},h=u,m=(a("5619"),a("2877")),f=Object(m["a"])(h,n,i,!1,null,null,null);e["default"]=f.exports},a857:function(t,e,a){},aa74:function(t,e,a){},aae1:function(t,e,a){"use strict";var n=a("a2b2"),i=a.n(n);i.a},ad4d:function(t,e,a){"use strict";var n=a("bd40"),i=a.n(n);i.a},b079:function(t,e,a){"use strict";var n=a("75d9"),i=a.n(n);i.a},b164:function(t,e,a){"use strict";var n=a("3115"),i=a.n(n);i.a},b651:function(t,e,a){},b6cf:function(t,e,a){},bc83:function(t,e,a){"use strict";var n=a("217f"),i=a.n(n);i.a},bd40:function(t,e,a){},c310:function(t,e,a){},c5db:function(t,e,a){"use strict";var n=a("172a"),i=a.n(n);i.a},c78d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"teacherpage"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("a-input-search",{staticStyle:{"margin-left":"16px",width:"290px"},attrs:{placeholder:"请输入学工号或姓名","allow-clear":""},on:{search:t.onSearch,input:t.onChange},model:{value:t.input_key,callback:function(e){t.input_key=e},expression:"input_key"}}),a("a",{staticStyle:{"margin-left":"8px"},on:{click:t.toggleAdvanced}},[t._v(" 高级查询 "),a("a-icon",{attrs:{type:t.advanced?"up":"down"}})],1),t.advanced?[a("a-form-model",{staticStyle:{"margin-top":"12px","margin-left":"16px"},attrs:{"v-model":t.queryParam,form:t.form}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"院部"}},[a("select-collegeguid",{ref:"Scollege",on:{change:t.handleSelectCollege},model:{value:t.queryParam.CollegeCode,callback:function(e){t.$set(t.queryParam,"CollegeCode",e)},expression:"queryParam.CollegeCode"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"状态"}},[a("a-select",{attrs:{"allow-clear":""},model:{value:t.queryParam.StatusId,callback:function(e){t.$set(t.queryParam,"StatusId",e)},expression:"queryParam.StatusId"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("未在职")]),a("a-select-option",{attrs:{value:"1"}},[t._v("在职")])],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"20px"},on:{click:t.handleClear}},[t._v("清空")])],1)],1)],1)]:t._e()],2),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{attrs:{type:"primary"},on:{click:t.handleImport}},[t._v("导入")]),t._v(" "),a("a-button",{attrs:{icon:"plus"},on:{click:t.handleadd}},[t._v("新增")])],1),a("s-table",{ref:"table",attrs:{columns:t.columns,data:t.loaddata,rowKey:"id",pagination:{showTotal:function(t){return"共 "+t+" 条"}}},scopedSlots:t._u([{key:"gender",fn:function(e,n){return a("span",{},[[1==n.gender?a("span",[t._v("男")]):0==n.gender?a("span",[t._v("女")]):t._e()]],2)}},{key:"typeOfId",fn:function(e,n){return a("span",{},[[0==n.typeOfId?a("span",[t._v("身份证")]):1==n.typeOfId?a("span",[t._v("护照")]):2==n.typeOfId?a("span",[t._v("驾照")]):t._e()]],2)}},{key:"statusId",fn:function(e,n){return a("span",{},[[0==n.statusId?a("span",[t._v("未在职 ")]):1==n.statusId?a("span",[t._v("在职 ")]):t._e()]],2)}},{key:"action",fn:function(e,n){return a("span",{},[[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{staticStyle:{"font-size":"16px"},on:{click:function(e){return t.handleEdit(n)}}},[t._v("编辑")]),a("a-menu-item",{staticStyle:{"font-size":"16px"},on:{click:function(e){return t.handleDetail(n)}}},[t._v("详情")]),a("a-menu-item",{staticStyle:{"font-size":"16px"},on:{click:function(e){return t.handleModify(n.code)}}},[t._v("修改密码")]),a("a-menu-item",{staticStyle:{"font-size":"16px"}},[a("a-popconfirm",{attrs:{title:"确定要删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.confirm(n.id)},cancel:t.cancel}},[t._v("删除")])],1)],1),a("a-button",{attrs:{icon:"bars"}})],1)]],2)}}])}),a("create-teacher",{ref:"createmodal",on:{ok:t.handleOk}}),a("teacher-detail",{ref:"detailmodal"}),a("change-psd",{ref:"modiftymodal"}),a("import-modal",{ref:"imodal",on:{ok:t.handleOk}})],1)},i=[],o=(a("c1df"),a("2af9")),l=a("788a"),r=a("0ce9"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:1e3,title:"教师详情",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-descriptions",{attrs:{bordered:""}},[a("a-descriptions-item",{attrs:{label:"姓名"}},[t._v(t._s(t.detailinfo.name))]),a("a-descriptions-item",{attrs:{label:"工号"}},[t._v(t._s(t.detailinfo.code))]),a("a-descriptions-item",{attrs:{label:"所属院部"}},[t._v(t._s(t.detailinfo.collegeName))]),a("a-descriptions-item",{attrs:{label:"手机号码"}},[t._v(t._s(t.detailinfo.phoneNumber))]),a("a-descriptions-item",{attrs:{label:"学历"}},[t._v(t._s(t.detailinfo.education))]),a("a-descriptions-item",{attrs:{label:"职称"}},[t._v(t._s(t.detailinfo.jobTitleCode))]),a("a-descriptions-item",{attrs:{label:"状态"}},[0==t.detailinfo.statusId?a("span",[t._v("未在职")]):t._e(),1==t.detailinfo.statusId?a("span",[t._v("在职")]):t._e()]),a("a-descriptions-item",{attrs:{label:"备注",span:3}},[t._v(t._s(t.detailinfo.notes))])],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",attrs:{type:"primary"},on:{click:t.handleCancel}},[t._v("返回")])],1)],2)},c=[],d=a("9d2c"),u={components:{dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,detailinfo:{address:"",birthday:"",code:"",collegeCode:"",collegeName:"",countryCode:"",countryName:"",creationTime:"",creatorId:"",email:"",englishName:"",gender:"",id:"",jobTitleCode:"",jobTitleName:"",lastModificationTime:"",lastModifierId:"",name:"",notes:"",numberOfId:"",phoneNumber:"",statusId:"",typeOfId:"",workTypeCode:"",workTypeName:""},form:this.$form.createForm(this,{name:"teacher"})}},methods:{modalshow:function(t){this.detailinfo=t,this.visible=!0},handleOk:function(){},handleCancel:function(){this.visible=!1}}},h=u,m=a("2877"),f=Object(m["a"])(h,s,c,!1,null,null,null),p=f.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:900,title:"修改密码",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:7},"wrapper-col":{span:12}}},[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"用户名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userName",{initialValue:t.code}],expression:"['userName', { initialValue: code }]"}],attrs:{disabled:""}})],1),a("a-form-item",{attrs:{label:"原密码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["currentPassword",{rules:[{required:!0,message:"请输入原密码"}]}],expression:"['currentPassword', { rules: [{ required: true, message: '请输入原密码' }] }]"}]})],1),a("a-form-item",{attrs:{label:"新密码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入新密码"}]}],expression:"['password', { rules: [{ required: true, message: '请输入新密码' }] }]"}]})],1),a("a-form-item",{attrs:{label:"确认密码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmPassword",{rules:[{required:!0,message:"请输入新密码"}]}],expression:"['confirmPassword', { rules: [{ required: true, message: '请输入新密码' }] }]"}],attrs:{placeholder:"请再输入一遍"}})],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},g=[],v=(a("411c"),{components:{dragModal:d["a"]},data:function(){return{visible:!1,confirmLoading:!1,btnloading:!1,code:"",type:"",form:this.$form.createForm(this,{name:"changepsd"})}},methods:{modalshow:function(t,e){this.code=t,this.type=e,this.visible=!0},handleCancel:function(){this.visible=!1},handleOk:function(){var t=this;this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){e?t.btnloading=!1:("student"==t.type?Object(l["g"])(a).then((function(e){t.$message.info("修改成功")})).catch((function(t){})):"teacher"==t.type&&Object(l["h"])(a).then((function(e){t.$message.info("修改成功")})).catch((function(t){})),setTimeout((function(){t.btnloading=!1,t.visible=!1})))})),this.form.resetFields()}}}),y=v,k=(a("7cb8"),Object(m["a"])(y,b,g,!1,null,null,null)),x=k.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:600,visible:t.visible,title:"导入信息",destoryOnClose:""},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("div",{staticStyle:{"text-align":"center"}},[a("p",[t._v(" 请选择需要上传的文件 "),a("a",{on:{click:t.downloadFile}},[a("a-icon",{attrs:{type:"download"}}),t._v("下载模板 ")],1)]),a("a-upload",{attrs:{"file-list":t.fileList,name:"file","before-upload":t.beforeUpload}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v("上传 ")],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("返回")]),a("a-button",{key:"submit",attrs:{loading:t.loading,type:"primary"},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},_=[],w=a("81a0");function S(t){return Object(w["a"])({url:"/app/educationResources/importCollage",method:"post",data:t})}function O(t){return Object(w["a"])({url:"/app/educationResources/importCourse",method:"post",data:t})}function L(t){return Object(w["a"])({url:"/app/educationResources/importCourseType",method:"post",data:t})}function I(t){return Object(w["a"])({url:"/app/educationResources/importSemester",method:"post",data:t})}function D(t){return Object(w["a"])({url:"/app/educationResources/importSpecialty",method:"post",data:t})}function $(t){return Object(w["a"])({url:"/app/student/importStudent",method:"post",data:t})}function j(t){return Object(w["a"])({url:"/app/classInfo/importClassInfo",method:"post",data:t})}function P(t){return Object(w["a"])({url:"/app/teacher/importTeacher",method:"post",data:t})}function q(t){return Object(w["a"])({url:"/app/laboratoryInfo/importLaboratoryInfo",method:"post",data:t})}var R={components:{dragModal:d["a"]},data:function(){return{type:"",fileList:[],visible:!1,loading:!1}},methods:{modalshow:function(t){this.visible=!0,this.type=t},handleOk:function(){var t=this,e=new FormData;e.append("file",this.fileList[0]),"specialty"==this.type?D(e).then((function(e){t.submitSuccess()})).catch((function(e){t.notification(e.response.data.error.message)})):"course"==this.type?O(e).then((function(e){t.submitSuccess()})).catch((function(e){t.notification(e.response.data.error.message)})):"coursetype"==this.type?L(e).then((function(e){t.submitSuccess()})).catch((function(e){t.notification(e.response.data.error.message)})):"semester"==this.type?I(e).then((function(e){t.submitSuccess()})).catch((function(e){t.notification(e.response.data.error.message)})):"collage"==this.type?S(e).then((function(e){t.submitSuccess()})).catch((function(e){t.notification(e.response.data.error.message)})):"student"==this.type?$(e).then((function(e){t.submitSuccess()})).catch((function(e){t.notification(e.response.data.error.message)})):"classes"==this.type?j(e).then((function(e){t.submitSuccess()})).catch((function(e){t.notification(e.response.data.error.message)})):"teacher"==this.type?P(e).then((function(e){t.submitSuccess()})).catch((function(e){t.notification(e.response.data.error.message)})):"labinfo"==this.type&&q(e).then((function(e){t.submitSuccess()})).catch((function(e){t.notification(e.response.data.error.message)}))},handleCancel:function(){this.fileList=[],this.visible=!1},beforeUpload:function(t){var e="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t.type,a="application/vnd.ms-excel.sheet.macroEnabled.12"===t.type;if(e||a)return this.$set(this.fileList,0,t),!1;this.$message.error("文件格式不正确!")},downloadFile:function(){if("collage"==this.type){var t="/download/学院模板.xlsx";window.location.href=t}else if("specialty"==this.type){var e="/download/专业模板.xlsx";window.location.href=e}else if("course"==this.type){var a="/download/课程模板.xlsx";window.location.href=a}else if("coursetype"==this.type){var n="/download/课程类型.xlsx";window.location.href=n}else if("semester"==this.type){var i="/download/学期模板.xlsx";window.location.href=i}else if("student"==this.type){var o="/download/学生模板.xlsx";window.location.href=o}else if("classes"==this.type){var l="/download/班级模板.xlsx";window.location.href=l}else if("teacher"==this.type){var r="/download/老师模板.xlsx";window.location.href=r}else if("labinfo"==this.type){var s="/download/实验室模板.xlsx";window.location.href=s}},notification:function(t){var e=this.$createElement;this.$notification.open({message:"提醒",description:t,icon:e("a-icon",{attrs:{type:"exclamation-circle"},style:"color:red"}),style:{fontSize:"18px"},duration:0}),this.fileList=[],this.$emit("ok")},submitSuccess:function(){this.$message.success("上传成功!"),this.fileList=[],this.$emit("ok"),this.visible=!1}}},T=R,E=Object(m["a"])(T,C,_,!1,null,null,null),M=E.exports,G={components:{STable:o["h"],CreateTeacher:r["a"],TeacherDetail:p,ChangePsd:x,ImportModal:M,SelectCollegeguid:o["k"]},data:function(){var t=this;return{advanced:!0,queryParam:{SkipCount:0,MaxResultCount:10,Key:"",CollegeCode:"",StatusId:"",WorkTypeCode:"",JobTitleCode:""},input_key:"",form:this.$form.createForm(this),columns:[{title:"工号",dataIndex:"code",width:120},{title:"姓名",dataIndex:"name",width:150},{title:"所属院部",dataIndex:"collegeName"},{title:"手机号码",dataIndex:"phoneNumber"},{title:"学历",dataIndex:"education"},{title:"职称",dataIndex:"jobTitleCode"},{title:"状态",dataIndex:"statusId",scopedSlots:{customRender:"statusId"},width:80},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:100}],loaddata:function(e){return t.queryParam.SkipCount=(e.pageNo-1)*e.pageSize,t.queryParam.MaxResultCount=e.pageSize,Object(l["U"])(t.queryParam).then((function(t){var a={};return a={data:t.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:t.totalCount},a}))}}},methods:{toggleAdvanced:function(){this.advanced=!this.advanced},onChange:function(t){this.queryParam.Key=t.target.value},handleadd:function(){this.$refs.createmodal.modalshow()},handleEdit:function(t){this.$refs.createmodal.modalshow(t)},handleDetail:function(t){this.$refs.detailmodal.modalshow(t)},handleOk:function(){this.$refs.table.refresh(!0)},confirm:function(t){var e=this;Object(l["o"])(t).then((function(t){e.$refs.table.refresh()}))},cancel:function(){},handleModify:function(t){var e="teacher";this.$refs.modiftymodal.modalshow(t,e)},onSearch:function(t){this.queryParam.Key=t,this.$refs.table.refresh(!0)},handleSearch:function(){var t=this;this.form.validateFieldsAndScroll((function(e,a){e||Object.assign(t.queryParam,a)})),this.$refs.table.refresh(!0)},handleSelectCollege:function(t){this.queryParam.CollegeCode=t},handleClear:function(){this.queryParam={SkipCount:0,MaxResultCount:10,Key:"",CollegeCode:"",StatusId:"",WorkTypeCode:"",JobTitleCode:""},this.$refs.Scollege.handleClear(),this.input_key="",this.form.resetFields(),this.$refs.table.refresh(!0)},handleImport:function(){var t="teacher";this.$refs.imodal.modalshow(t)}}},A=G,N=(a("928d6"),Object(m["a"])(A,n,i,!1,null,null,null));e["default"]=N.exports},cc5f:function(t,e,a){},cc70c:function(t,e,a){"use strict";var n=a("88bf"),i=a.n(n);i.a},ccc0:function(t,e,a){"use strict";var n=a("00bd"),i=a.n(n);i.a},cf1d:function(t,e,a){"use strict";a.d(e,"q",(function(){return i})),a.d(e,"b",(function(){return o})),a.d(e,"l",(function(){return l})),a.d(e,"g",(function(){return r})),a.d(e,"s",(function(){return s})),a.d(e,"d",(function(){return c})),a.d(e,"n",(function(){return d})),a.d(e,"i",(function(){return u})),a.d(e,"r",(function(){return h})),a.d(e,"c",(function(){return m})),a.d(e,"m",(function(){return f})),a.d(e,"h",(function(){return p})),a.d(e,"p",(function(){return b})),a.d(e,"a",(function(){return g})),a.d(e,"k",(function(){return v})),a.d(e,"f",(function(){return y})),a.d(e,"t",(function(){return k})),a.d(e,"e",(function(){return x})),a.d(e,"o",(function(){return C})),a.d(e,"j",(function(){return _})),a.d(e,"u",(function(){return w}));var n=a("81a0");function i(t){var e="/app/LaboratoryQualification";return Object(n["a"])({url:e,method:"get",params:t})}function o(t){var e="/app/LaboratoryQualification";return Object(n["a"])({url:e,method:"post",data:t})}function l(t){var e="/app/LaboratoryQualification/"+t;return Object(n["a"])({url:e,method:"delete"})}function r(t,e){var a="/app/LaboratoryQualification/"+e;return Object(n["a"])({url:a,method:"put",data:t})}function s(t){var e="/app/RiskSource";return Object(n["a"])({url:e,method:"get",params:t})}function c(t){var e="/app/RiskSource";return Object(n["a"])({url:e,method:"post",data:t})}function d(t){var e="/app/RiskSource/"+t;return Object(n["a"])({url:e,method:"delete"})}function u(t,e){var a="/app/RiskSource/"+e;return Object(n["a"])({url:a,method:"put",data:t})}function h(t){var e="/app/ProtectiveMeasures";return Object(n["a"])({url:e,method:"get",params:t})}function m(t){var e="/app/ProtectiveMeasures";return Object(n["a"])({url:e,method:"post",data:t})}function f(t){var e="/app/ProtectiveMeasures/"+t;return Object(n["a"])({url:e,method:"delete"})}function p(t,e){var a="/app/ProtectiveMeasures/"+e;return Object(n["a"])({url:a,method:"put",data:t})}function b(t){var e="/app/ExtinguishingPoints";return Object(n["a"])({url:e,method:"get",params:t})}function g(t){var e="/app/ExtinguishingPoints";return Object(n["a"])({url:e,method:"post",data:t})}function v(t){var e="/app/ExtinguishingPoints/"+t;return Object(n["a"])({url:e,method:"delete"})}function y(t,e){var a="/app/ExtinguishingPoints/"+e;return Object(n["a"])({url:a,method:"put",data:t})}function k(t){var e="/app/SpecialEquipment";return Object(n["a"])({url:e,method:"get",params:t})}function x(t){var e="/app/SpecialEquipment";return Object(n["a"])({url:e,method:"post",data:t})}function C(t){var e="/app/SpecialEquipment/"+t;return Object(n["a"])({url:e,method:"delete"})}function _(t,e){var a="/app/SpecialEquipment/"+e;return Object(n["a"])({url:a,method:"put",data:t})}function w(t){var e="/app/SpecialEquipment/"+t;return Object(n["a"])({url:e,method:"get"})}},d05a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"danger_detail"},[a("a-page-header",{staticClass:"pageheader"},[a("template",{slot:"title"},[t._v(" 隐患详情 "),0==t.dangerDetail.status?a("span",{staticClass:"status",staticStyle:{color:"red"}},[t._v("整改中")]):t._e(),1==t.dangerDetail.status?a("span",{staticClass:"status",staticStyle:{color:"orange"}},[t._v("审核中")]):t._e(),2==t.dangerDetail.status?a("span",{staticClass:"status",staticStyle:{color:"green"}},[t._v("完成")]):t._e()]),a("template",{slot:"extra"},[a("a-button",{attrs:{icon:"left"},on:{click:t.back}},[t._v("返回")]),t.judgeReview()?a("a-button",{attrs:{disabled:1!=t.dangerDetail.status},on:{click:function(e){return t.verity()}}},[t._v("审核")]):t._e(),t.judgeRectify()?a("a-button",{attrs:{type:"primary",disabled:0!=t.dangerDetail.status},on:{click:function(e){return t.submitRecitify()}}},[t._v("整改 ")]):t._e()],1),a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"院部"}},[t._v(" "+t._s(t.dangerDetail.collegeName)+" ")]),a("a-descriptions-item",{attrs:{label:"实验分室名称"}},[t._v(" "+t._s(t.dangerDetail.branchName)+" ")]),a("a-descriptions-item",{attrs:{label:"实验室分室地点"}},[t._v(" "+t._s(t.dangerDetail.address)+" ")]),a("a-descriptions-item",{attrs:{label:"检查人员"}},[t._v(" "+t._s(t.dangerDetail.inspectors)+" ")]),a("a-descriptions-item",{attrs:{label:"实验分室负责人"}},[t._v(" "+t._s(t.dangerDetail.branchPrincipal)+" ")]),a("a-descriptions-item",{attrs:{label:"整改负责人"}},[t._v(" "+t._s(t.dangerDetail.principal)+" ")]),a("a-descriptions-item",{attrs:{label:"发现时间"}},[t._v(" "+t._s(t.dangerDetail.creationTime?t.dangerDetail.creationTime.substring(0,10):"")+" ")]),a("a-descriptions-item",{attrs:{label:"级别"}},[0==t.dangerDetail.dangerLevel?a("a-tag",{attrs:{color:"orange"}},[t._v("校级")]):t._e(),1==t.dangerDetail.dangerLevel?a("a-tag",{attrs:{color:"pink"}},[t._v("院级")]):t._e()],1)],1),a("a-descriptions",{directives:[{name:"show",rawName:"v-show",value:1==t.dangerDetail.status,expression:"dangerDetail.status == 1"}]},[a("a-descriptions-item",{attrs:{label:"整改时间"}},[t._v(" "+t._s(t.dangerDetail.rectifyTime?t.dangerDetail.rectifyTime.substring(0,10):"")+" ")])],1)],2),a("a-card",[a("div",{staticClass:"hidden"},[a("span",{staticClass:"ipttext"},[t._v(" 隐患内容："+t._s(t.dangerDetail.content)+" ")]),0!=t.dangerDetail.photos.filter(t.findDanger).length?a("div",[a("a-divider",[t._v("隐患图片")]),a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"imglist"},t._l(t.dangerDetail.photos.filter(t.findDanger),(function(t,e){return a("div",{key:e+"B"},[a("img",{ref:"dangerimage",refInFor:!0,attrs:{src:t.url+"&type=3",dataSource:t.url,alt:""}})])})),0)],1):t._e()])]),a("a-card",{directives:[{name:"show",rawName:"v-show",value:t.cardshow,expression:"cardshow"}],staticClass:"rectify"},[a("div",[a("div",{staticClass:"content"},[a("div",{staticClass:"ipttext"},[t._v("整改内容："+t._s(t.dangerDetail.rectifyContent))]),a("a-textarea",{directives:[{name:"show",rawName:"v-show",value:t.textvisible,expression:"textvisible"}],staticClass:"text",attrs:{placeholder:"请输入整改内容"},model:{value:t.form.rectifyContent,callback:function(e){t.$set(t.form,"rectifyContent",e)},expression:"form.rectifyContent"}})],1),a("div",{staticClass:"uploadimg"},[a("a-upload",{directives:[{name:"show",rawName:"v-show",value:t.textvisible,expression:"textvisible"}],attrs:{customRequest:t.uploadImg,remove:t.deletePhoto,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview}},[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("Upload")]),a("a-progress",{directives:[{name:"show",rawName:"v-show",value:t.progressVisible,expression:"progressVisible"}],attrs:{type:"line",percent:t.proGress}})],1),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancelp}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1),a("a-popconfirm",{attrs:{title:"确定提交吗？","ok-text":"是","cancel-text":"否"},on:{confirm:t.submit}},[a("a-button",{directives:[{name:"show",rawName:"v-show",value:t.textvisible,expression:"textvisible"}],staticClass:"submit",attrs:{type:"primary"}},[t._v("提交")])],1)],1),a("div",{staticClass:"rectifyimg"},[a("a-divider",{directives:[{name:"show",rawName:"v-show",value:0!=t.dangerDetail.photos.filter(t.findRectify).length&&1==t.dangerDetail.status,expression:"dangerDetail.photos.filter(findRectify).length != 0 && dangerDetail.status == 1"}]},[t._v(" 整改图片 ")]),a("div",{directives:[{name:"viewer",rawName:"v-viewer"},{name:"show",rawName:"v-show",value:1==t.dangerDetail.status,expression:"dangerDetail.status == 1"}],staticClass:"imglist"},t._l(t.dangerDetail.photos.filter(t.findRectify),(function(t,e){return a("div",{key:e},[a("img",{ref:"rectifyimage",refInFor:!0,attrs:{src:t.url+"&type=3",dataSource:t.url,alt:""}})])})),0)],1)]),a("edit-rectify",{ref:"remodel",on:{ok:t.handleOk}}),a("verity-rectify",{ref:"vemodel",on:{ok:t.handleOk}})],1)},i=[],o=(a("4160"),a("c975"),a("a434"),a("d3b7"),a("159b"),a("96cf"),a("1da1")),l=a("6a7e"),r=a("d973"),s=a("f0a9"),c=a("c1df"),d=a.n(c);function u(t){return new Promise((function(e,a){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(t){return a(t)}}))}var h={components:{EditRectify:r["a"],VerityRectify:s["a"]},data:function(){return{progressVisible:!1,proGress:0,textvisible:!1,cardshow:!1,fileList:[],form:{id:"",rectifyContent:""},previewVisible:!1,previewImage:"",info:this.$route.query,dangerDetail:{photos:[],level:[]}}},created:function(){this.init()},methods:{moment:d.a,judgeRectify:function(){return 0==this.dangerDetail.dangerLevel?-1!=this.dangerDetail.level.indexOf(9)||-1!=this.dangerDetail.level.indexOf(10)||-1!=this.dangerDetail.level.indexOf(7):1==this.dangerDetail.dangerLevel?-1!=this.dangerDetail.level.indexOf(6)||-1!=this.dangerDetail.level.indexOf(8):void 0},judgeReview:function(){return 0==this.dangerDetail.dangerLevel?-1!=this.dangerDetail.level.indexOf(1)||-1!=this.dangerDetail.level.indexOf(3)||-1!=this.dangerDetail.level.indexOf(2):1==this.dangerDetail.dangerLevel?-1!=this.dangerDetail.level.indexOf(9)||-1!=this.dangerDetail.level.indexOf(10)||-1!=this.dangerDetail.level.indexOf(7):void 0},init:function(){var t=this;Object(l["T"])(this.info.id).then((function(e){t.dangerDetail=e,t.form.rectifyContent=e.rectifyContent,t.form.id=e.id,t.dangerDetail.status&&(t.cardshow=!0),e.photos.forEach((function(e){1==e.type&&t.fileList.push({uid:e.materialCode,url:e.url,name:e.materialCode,status:"done",infoid:e.id})}))}))},findDanger:function(t,e,a){if(0==t.type)return t},findRectify:function(t,e,a){if(1==t.type)return t},submitRecitify:function(){this.textvisible=!0,this.cardshow=!0},submit:function(){var t=this;this.havesubmit=!0,Object(l["nb"])(this.form).then((function(e){t.$message.success("已提交，请等待审核"),t.textvisible=!1,t.$emit("ok"),t.form={id:"",rectifyContent:""},t.fileList=[]})),setTimeout((function(){t.init()}),100)},verity:function(){this.$refs.vemodel.modalshow(this.dangerDetail.id)},handlePreview:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,u(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleCancelp:function(){this.previewVisible=!1},uploadImg:function(t){var e=this,a=new FormData;a.append("file",t.file),Object(l["qb"])(a).then((function(t){var a={hiddenDangerId:e.form.id,materialCode:t.code,type:1};e.progressVisible=!0,e.proGress=60,Object(l["a"])(a).then((function(a){e.fileList.push({uid:t.code,url:t.url,name:t.code,status:"done",infoid:a.id}),e.$message.success("图片上传成功"),e.progressVisible=!1,e.proGress=0}))}))},deletePhoto:function(t){var e=this;Object(l["l"])(t.infoid).then((function(a){var n=e.fileList.indexOf(t);-1!=n&&e.fileList.splice(n,1)}))},handleOk:function(){this.init()},back:function(){this.$router.go(-1),this.form={id:"",rectifyContent:""}}}},m=h,f=(a("169d"),a("2877")),p=Object(f["a"])(m,n,i,!1,null,null,null);e["default"]=p.exports},d07a:function(t,e,a){},d261:function(t,e,a){"use strict";var n=a("d371"),i=a.n(n);i.a},d274:function(t,e,a){"use strict";var n=a("4d7e"),i=a.n(n);i.a},d2df:function(t,e,a){"use strict";var n=a("47e1"),i=a.n(n);i.a},d371:function(t,e,a){},d6da:function(t,e,a){},d71a:function(t,e,a){},d7be:function(t,e,a){},d973:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:700,title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"formModel",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{ref:"rectifyContent",attrs:{label:"隐患信息"}},[a("div",[t._v(t._s(t.detailData.content))])]),a("a-form-model-item",{ref:"rectifyContent",attrs:{label:"整改内容",prop:"rectifyContent"}},[a("a-textarea",{attrs:{placeholder:"请输入内容",rows:4},model:{value:t.form.rectifyContent,callback:function(e){t.$set(t.form,"rectifyContent",e)},expression:"form.rectifyContent"}})],1),a("a-form-model-item",{attrs:{label:"上传整改照片"}},[a("a-upload",{attrs:{customRequest:t.uploadImg,remove:t.deletePhoto,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview}},[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancelp}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{disabled:0!=t.status,type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("确认")])],1)],2)},i=[],o=(a("4160"),a("c975"),a("a434"),a("d3b7"),a("159b"),a("96cf"),a("1da1")),l=a("6a7e"),r=a("2af9");function s(t){return new Promise((function(e,a){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(t){return a(t)}}))}var c={data:function(){return{title:"上传整改内容",visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},form:{rectifyContent:""},rules:{rectifyContent:[{required:!0,message:"隐患内容不能为空！"}]},fileList:[],previewVisible:!1,previewImage:"",detailData:"",yhid:"",status:0}},components:{DragModal:r["c"]},methods:{modalshow:function(t){var e=this;this.visible=!0,this.form.id=t.id,this.detailData=t,this.yhid=t.id,Object(l["T"])(this.yhid).then((function(t){e.form.rectifyContent=t.rectifyContent,e.status=t.status,t.photos.forEach((function(t){1==t.type&&e.fileList.push({uid:t.materialCode,url:t.url,name:t.materialCode,status:"done",infoid:t.id})}))}))},handleOk:function(){var t=this;this.btnloading=!0,this.$refs.formModel.validate((function(e){e?Object(l["nb"])(t.form).then((function(e){t.$message.success("已提交，请等待审核"),t.btnloading=!1,t.visible=!1,t.$emit("ok"),t.form={rectifyContent:""},t.fileList=[]})).catch((function(e){t.btnloading=!1})):t.btnloading=!1}))},handleCancel:function(){this.visible=!1,this.$emit("ok"),this.form={rectifyContent:""},this.fileList=[]},handleCancelp:function(){this.previewVisible=!1},handlePreview:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,s(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},uploadImg:function(t){var e=this,a=new FormData;a.append("file",t.file),Object(l["qb"])(a).then((function(t){var a={hiddenDangerId:e.yhid,materialCode:t.code,type:1};Object(l["a"])(a).then((function(a){e.fileList.push({uid:t.code,url:t.url,name:t.code,status:"done",infoid:a.id}),e.$message.success("图片上传成功")}))}))},deletePhoto:function(t){var e=this;Object(l["l"])(t.infoid).then((function(a){var n=e.fileList.indexOf(t);-1!=n&&e.fileList.splice(n,1)}))}}},d=c,u=a("2877"),h=Object(u["a"])(d,n,i,!1,null,null,null);e["a"]=h.exports},dd10:function(t,e,a){},de5d:function(t,e,a){"use strict";var n=a("6423"),i=a.n(n);i.a},e24d:function(t,e,a){"use strict";var n=a("a857"),i=a.n(n);i.a},e6e7:function(t,e,a){},ea98:function(t,e,a){"use strict";a("b2a3"),a("0a2a")},ec86:function(t,e,a){"use strict";var n=a("5592"),i=a.n(n);i.a},eca1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plan_detail"},[a("a-page-header",{staticClass:"pageheader",on:{back:function(){return t.$router.go(-1)}}},[a("a-button",{attrs:{slot:"backIcon",icon:"left"},slot:"backIcon"},[t._v("返回")]),a("template",{slot:"title"},[t._v(t._s(t.planDetail.name))]),a("template",{slot:"tags"},[t._v(t._s(t.planDetail.beginTime?t.planDetail.beginTime.substring(0,10):"")+" — "+t._s(t.planDetail.endTime?t.planDetail.endTime.substring(0,10):""))]),a("template",{slot:"extra"},[a("a-progress",{staticStyle:{width:"250px"},attrs:{"stroke-color":{"0%":"#108ee9","100%":"#87d068"},percent:t.planDetail.progressRate}}),a("a-button",{staticStyle:{"margin-left":"25px"},attrs:{icon:"download"},on:{click:t.handleDownload}},[t._v("导出汇总表")])],1)],2),a("a-card",[a("a-table",{attrs:{columns:t.columns,"data-source":t.collegelist,rowKey:"collegeId",pagination:!1,scroll:{y:600}},scopedSlots:t._u([{key:"statusId",fn:function(e,n){return[0==e?a("a-badge",{attrs:{color:"gray",text:"未提交"}}):1==e?a("a-badge",{attrs:{color:"yellow",text:"审核中"}}):2==e?a("a-badge",{attrs:{color:"green",text:"审核通过"}}):t._e(),3==e?a("a-badge",{attrs:{color:"red",text:"审核失败"}}):t._e()]}},{key:"action",fn:function(e,n){return[a("a",{on:{click:function(e){return t.onDetail(n)}}},[t._v("详情")])]}}])})],1)],1)},i=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("6a7e")),l=[{title:"院系名称",dataIndex:"collegeName"},{title:"状态",dataIndex:"statusId",scopedSlots:{customRender:"statusId"}},{title:"操作",dataIndex:"action",width:"100px",scopedSlots:{customRender:"action"}}],r={data:function(){return{columns:l,info:this.$route.query,collegelist:[],planDetail:{}}},created:function(){this.init()},methods:{init:function(){var t=this;Object(o["M"])(this.info.planId).then((function(e){t.planDetail=e,t.collegelist=e.departmentPlans}))},onDetail:function(t){if(0!=t.statusId){var e={collegeId:t.collegeId,planId:t.planId};this.$router.push({name:"verifyopenplan",query:e})}else this.$message.error("院系计划未提交！")},handleDownload:function(){Object(o["u"])({id:this.info.planId}).then((function(t){var e=t,a=new Blob([e]),n="开放计划统计表.xlsx";if("download"in document.createElement("a")){var i=document.createElement("a");i.download=n,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}else navigator.msSaveBlob(a,n)}))}}},s=r,c=(a("cc70c"),a("2877")),d=Object(c["a"])(s,n,i,!1,null,null,null);e["default"]=d.exports},edb5:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"specialequipment"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"headtitle"},[t._v("特种设备")])]),a("div",{attrs:{slot:"extra"},slot:"extra"}),a("a-form",{staticClass:"selectform",attrs:{form:t.form}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"院系"}},[a("select-collegeguid",{directives:[{name:"decorator",rawName:"v-decorator",value:["CollegeGuid"],expression:"['CollegeGuid']"}],ref:"Scollege",on:{change:t.handleSelectCollege}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"实验分室"}},[a("select-branch",{directives:[{name:"decorator",rawName:"v-decorator",value:["BranchGuid"],expression:"['BranchGuid']"}],ref:"Sbranch",on:{change:t.handleSelectBranch}})],1)],1)],1)],1),a("s-table",{ref:"table",attrs:{columns:t.columns,data:t.loadData,"row-key":"id"},scopedSlots:t._u([{key:"inspectionDate",fn:function(e){return[a("span",[t._v(t._s(e?e.substring(0,10):""))])]}},{key:"status",fn:function(e){return[a("a-tag",{attrs:{color:0==e?"green":1==e||2==e?"orange":"red"}},[t._v(" "+t._s(1==e?"调出":2==e?"调入":3==e?"报停":4==e?"报废":"在用")+" ")])]}},{key:"action",fn:function(e,n){return a("span",{},[[a("span",{on:{click:function(e){return t.handleDetail(n)}}},[a("a",[t._v("查看详情")])])]],2)}}])}),a("equipment-detail",{ref:"equipmentdetail",on:{click:t.handleOk}})],1)},i=[],o=a("2af9"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:1e3,title:"设备详情",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-descriptions",{attrs:{bordered:""}},[a("a-descriptions-item",{attrs:{label:"设备名称"}},[t._v(t._s(t.detailinfo.name))]),a("a-descriptions-item",{attrs:{label:"负责人"}},[t._v(t._s(t.detailinfo.responsible))]),a("a-descriptions-item",{attrs:{label:"所属类型"}},[t._v(t._s(t.detailinfo.equipmentName))]),a("a-descriptions-item",{attrs:{label:"所属实验室"}},[t._v(t._s(t.detailinfo.branchName))]),a("a-descriptions-item",{attrs:{label:"状态"}},[t._v(" "+t._s(1==t.detailinfo.status?"调出":2==t.detailinfo.status?"调入":3==t.detailinfo.status?"报停":4==t.detailinfo.status?"报废":"在用")+" ")]),a("a-descriptions-item",{attrs:{label:"资产编号"}},[t._v(t._s(t.detailinfo.assetNumber))]),a("a-descriptions-item",{attrs:{label:"检验日期"}},[t._v(t._s(t.detailinfo.inspectionDate))])],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",attrs:{type:"primary"},on:{click:t.handleCancel}},[t._v("返回")])],1)],2)},r=[],s=a("9d2c"),c={components:{dragModal:s["a"]},data:function(){return{visible:!1,confirmLoading:!1,detailinfo:{},form:this.$form.createForm(this,{name:"equipment"})}},methods:{modalshow:function(t){this.detailinfo=t,this.visible=!0},handleOk:function(){},handleCancel:function(){this.visible=!1}}},d=c,u=a("2877"),h=Object(u["a"])(d,l,r,!1,null,null,null),m=h.exports,f=(a("b047"),a("788a")),p=[{title:"设备名称",dataIndex:"name"},{title:"设备类型",dataIndex:"equipmentName"},{title:"检验日期",dataIndex:"inspectionDate",scopedSlots:{customRender:"inspectionDate"}},{title:"设备状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",scopedSlots:{customRender:"action"}}],b={components:{STable:o["h"],SelectCollegeguid:o["k"],SelectBranch:o["i"],EquipmentDetail:m},data:function(){var t=this;return{labelCol:{span:6},wrapperCol:{span:18},queryParam:{CollegeGuid:"",BranchGuid:"",Key:"",SkipCount:0,MaxResultCount:10},branchlist:[],columns:p,form:this.$form.createForm(this),loadData:function(e){return t.queryParam.SkipCount=(e.pageNo-1)*e.pageSize,t.queryParam.MaxResultCount=e.pageSize,Object(f["A"])(t.queryParam).then((function(t){return{pageNo:e.pageNo,pageSize:e.pageSize,data:t.items,totalCount:t.totalCount}}))}}},methods:{handleSelectCollege:function(t){this.queryParam.CollegeGuid=t,this.queryParam.BranchGuid="",this.$refs.Sbranch.handleParamChange(this.queryParam.CollegeGuid),this.$refs.table.refresh()},handleSelectBranch:function(t){""==t&&this.$refs.Sbranch.handleParamChange(this.queryParam.CollegeGuid),this.queryParam.BranchGuid=t,this.$refs.table.refresh()},handleDetail:function(t){this.$refs.equipmentdetail.modalshow(t)},handleOk:function(){}}},g=b,v=(a("f086"),Object(u["a"])(g,n,i,!1,null,"6ee4eba8",null));e["default"]=v.exports},ee78:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"checkbookdetail",attrs:{title:"检查表："+this.dataInfo.name}},[a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{staticStyle:{"margin-right":"20px"},attrs:{size:"default",type:"primary",icon:"plus"},on:{click:function(e){return t.handleImport()}}},[t._v("导入")]),a("a-button",{staticStyle:{"margin-right":"20px"},attrs:{icon:"download"},on:{click:function(e){return t.handleExport()}}},[t._v("导出")]),a("a-button",{attrs:{size:"default",icon:"rollback"},on:{click:function(e){return t.handleBack()}}},[t._v("返回")])],1),a("a-tabs",{attrs:{type:"card","tab-position":"left"}},t._l(t.dataInfo.items,(function(e){return a("a-tab-pane",{key:e.id,attrs:{tab:e.index+1+"、"+e.checkItem}},[a("a-switch",{staticStyle:{"margin-bottom":"10px"},attrs:{"checked-children":"启用","un-checked-children":"禁用",checked:1==e.statusId,disabled:t.spinning},on:{change:function(a){return t.handleStatusChange(e)}}}),a("a-spin",{attrs:{spinning:t.spinning}},[a("a-table",{attrs:{columns:t.columns,"data-source":e.children,rowKey:"id",pagination:!1,scroll:{y:500}},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[a("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"禁用",checked:1==n.statusId},on:{change:function(e){return t.handleStatusChange2(n)}}})],1)}}],null,!0)})],1)],1)})),1),a("import-checkItem",{ref:"imodal",on:{ok:t.handleOk}})],1)},i=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("6a7e")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("drag-modal",{attrs:{width:500,title:"上传文件",visible:t.visible},on:{cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form,layout:"horizontal","label-col":{span:6},"wrapper-col":{span:16}}},[a("a-row",{attrs:{type:"flex",justify:"center"}},[a("a-rol",[t._v(" 请选择需要上传的文件 "),a("a",{on:{click:t.downloadFile}},[a("a-icon",{attrs:{type:"download"}}),t._v("下载模板 ")],1)])],1),a("br"),a("a-upload-dragger",{attrs:{"file-list":t.fileList,remove:t.handleRemove,"before-upload":t.beforeUpload}},[a("p",{staticClass:"ant-upload-drag-icon"},[a("a-icon",{attrs:{type:"inbox"}})],1),a("p",{staticClass:"ant-upload-text"},[t._v("单击或拖动文件到该区域以上传")])])],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},r=[],s=(a("c975"),a("fb6a"),a("a434"),a("2af9")),c={data:function(){return{id:"",fileList:[],visible:!1,btnloading:!1,confirmLoading:!1,form:this.$form.createForm(this,{name:"Materials"})}},components:{DragModal:s["c"]},methods:{downloadFile:function(){var t="/download/安全检查表模板.xlsx";window.location.href=t},modalshow:function(t){this.visible=!0,this.id=t},handleRemove:function(t){var e=this.fileList.indexOf(t),a=this.fileList.slice();a.splice(e,1),this.fileList=a},beforeUpload:function(t){if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t.type||"application/vnd.ms-excel.sheet.macroEnabled.12"===t.type)return this.$set(this.fileList,0,t),!1;this.responseErrorMsg("文件格式错误")},handleOk:function(){var t=this;this.fileList.length<1?this.responseErrorMsg("未上传文件"):(this.btnloading=!0,this.form.validateFieldsAndScroll((function(e,a){if(e)t.btnloading=!1;else{var n=new FormData;n.append("file",t.fileList[0]),Object(o["V"])(t.id,n).then((function(e){e.successfully&&(t.$message.success("导入成功"),t.handleComplete())})).catch((function(e){t.responseErrorMsg(e.response.data.error)}))}})))},handleCancel:function(){this.fileList=[],this.visible=!1},handleComplete:function(){var t=this;setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.btnloading=!1,t.$emit("ok")}),1500)},handleChange:function(t){},responseErrorMsg:function(t){var e=this.$createElement;this.$notification.open({message:"提醒",description:t,icon:e("a-icon",{attrs:{type:"exclamation-circle"},style:"color:red"}),style:{fontSize:"18px"}})}}},d=c,u=a("2877"),h=Object(u["a"])(d,l,r,!1,null,null,null),m=h.exports,f=[{title:"NO.",dataIndex:"code",width:100},{title:"检查项目",dataIndex:"checkItem"},{title:"检查要点",dataIndex:"checkPoint"},{title:"是否启用",dataIndex:"statusId",width:100,scopedSlots:{customRender:"action"}}],p={components:{importCheckItem:m},data:function(){return this.columns=f,{info:{},dataInfo:{},spinning:!1}},beforeRouteEnter:function(t,e,a){a((function(e){e.init(t.params)}))},methods:{init:function(t){if(t.id)localStorage.setItem("bookId",t.id),this.$set(this.info,"id",t.id);else{var e=localStorage.getItem("bookId");this.$set(this.info,"id",e)}this.loadData()},loadData:function(){var t=this;Object(o["O"])(this.info.id).then((function(e){t.dataInfo=e,t.spinning=!1}))},handleOk:function(){this.loadData()},handleImport:function(){this.$refs.imodal.modalshow(this.info.id)},handleExport:function(){Object(o["s"])({bookId:this.info.id}).then((function(t){var e=t,a=new Blob([e]),n="安全检查表.xlsx";if("download"in document.createElement("a")){var i=document.createElement("a");i.download=n,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}else navigator.msSaveBlob(a,n)}))},handleStatusChange:function(t){var e=this;this.spinning=!0;var a={id:t.id,status:1==t.statusId?0:1};Object(o["d"])(a).then((function(t){e.loadData(),e.$message.success("修改成功")})).catch((function(t){e.$message.error("修改失败"),e.spinning=!1}))},handleStatusChange2:function(t){var e=this,a={id:t.id,status:1==t.statusId?0:1};Object(o["d"])(a).then((function(t){e.loadData(),e.$message.success("修改成功")})).catch((function(t){e.$message.error("修改失败")}))},handleBack:function(){this.$router.push({name:"checkbook"})}}},b=p,g=(a("36a3"),Object(u["a"])(b,n,i,!1,null,null,null));e["default"]=g.exports},f06c:function(t,e,a){"use strict";var n=a("d6da"),i=a.n(n);i.a},f086:function(t,e,a){"use strict";var n=a("9447"),i=a.n(n);i.a},f0a9:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{width:"700px",title:t.title,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-form-model",{ref:"formModel",attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{ref:"content",attrs:{label:"整改内容"}},[a("pre",[t._v(t._s(t.info.rectifyContent))])]),a("a-form-model-item",{ref:"content",attrs:{label:"整改图片"}},t._l(t.info.photos.filter(t.findRectify),(function(t,e){return a("div",{key:e},[a("img",{staticStyle:{"margin-right":"4px","max-width":"100px"},attrs:{src:t.url,alt:""}})])})),0),a("a-form-model-item",{attrs:{label:"审核"}},[a("a-radio-group",{on:{change:t.onChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("a-radio",{attrs:{value:!0}},[t._v("通过")]),a("a-radio",{attrs:{value:!1}},[t._v("不通过")])],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.btnloading},on:{click:t.handleOk}},[t._v("保存")])],1)],2)},i=[],o=a("6a7e"),l={data:function(){return{title:"审核",visible:!1,btnloading:!1,labelCol:{span:6},wrapperCol:{span:14},value:!0,info:{photos:[]}}},methods:{modalshow:function(t){var e=this;this.visible=!0,Object(o["T"])(t).then((function(t){e.info=t}))},handleOk:function(){var t=this;Object(o["sb"])({dangerId:this.info.id,passing:this.value}).then((function(e){t.visible=!1,t.$emit("ok"),t.$message.info("已审核"),t.info={photos:[]}}))},handleCancel:function(){this.visible=!1,this.info={photos:[]}},onChange:function(){},findRectify:function(t,e,a){if(1==t.type)return t}}},r=l,s=a("2877"),c=Object(s["a"])(r,n,i,!1,null,null,null);e["a"]=c.exports},f307:function(t,e,a){},f5d2:function(t,e,a){},f60b:function(t,e,a){},f60b4:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"lab_branch"},[a("div",{attrs:{slot:"title"},slot:"title"},[a("a-input-search",{staticStyle:{"margin-left":"16px",width:"290px"},attrs:{placeholder:"请输入实验分室名称或编号","allow-clear":""},on:{search:t.onSearch,input:t.onChange},model:{value:t.queryParam.Key,callback:function(e){t.$set(t.queryParam,"Key",e)},expression:"queryParam.Key"}}),a("a",{staticStyle:{"margin-left":"8px"},on:{click:t.toggleAdvanced}},[t._v(" 高级查询 "),a("a-icon",{attrs:{type:t.advanced?"up":"down"}})],1),a("a-button",{staticStyle:{"margin-left":"20px"},attrs:{hidden:!t.advanced,type:"primary"},on:{click:t.handleSearch}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"20px"},attrs:{hidden:!t.advanced},on:{click:t.handleClear}},[t._v("清空")]),a("a-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.handleDownload}},[t._v("导出")]),t.advanced?[a("a-form-model",{staticStyle:{"margin-top":"12px","margin-left":"16px"},attrs:{model:t.queryParam}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"校区"}},[a("select-campus",{ref:"Scampus",model:{value:t.queryParam.CampusCode,callback:function(e){t.$set(t.queryParam,"CampusCode",e)},expression:"queryParam.CampusCode"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"院系"}},[a("select-collegeguid",{ref:"Scollege",on:{change:t.handleSelectCollege},model:{value:t.queryParam.CollegeGuid,callback:function(e){t.$set(t.queryParam,"CollegeGuid",e)},expression:"queryParam.CollegeGuid"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"实验中心"}},[a("select-labcenter",{ref:"Slabcenter",on:{change:t.handleSelectCenter},model:{value:t.queryParam.LabcenterGuid,callback:function(e){t.$set(t.queryParam,"LabcenterGuid",e)},expression:"queryParam.LabcenterGuid"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"实验室"}},[a("select-lab",{ref:"Slaboratory",on:{change:t.handleSelectLab},model:{value:t.queryParam.LaboratoryGuid,callback:function(e){t.$set(t.queryParam,"LaboratoryGuid",e)},expression:"queryParam.LaboratoryGuid"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"实验室负责人"}},[a("select-teacher",{ref:"Slabteacher",on:{change:t.handleSelectTeacher},model:{value:t.queryParam.LabPrincipalCode,callback:function(e){t.$set(t.queryParam,"LabPrincipalCode",e)},expression:"queryParam.LabPrincipalCode"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"实验分室负责人"}},[a("select-teacher",{ref:"Sbranchteacher",on:{change:t.handleSelectBranchTeacher},model:{value:t.queryParam.LabBranchPrincipalCode,callback:function(e){t.$set(t.queryParam,"LabBranchPrincipalCode",e)},expression:"queryParam.LabBranchPrincipalCode"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("div",{staticStyle:{width:"100%"}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{label:"面积"}},[a("a-input-number",{staticStyle:{width:"46%"},model:{value:t.queryParam.MinUsageArea,callback:function(e){t.$set(t.queryParam,"MinUsageArea",e)},expression:"queryParam.MinUsageArea"}}),t._v(" -- "),a("a-input-number",{staticStyle:{width:"46%"},model:{value:t.queryParam.MaxUsageArea,callback:function(e){t.$set(t.queryParam,"MaxUsageArea",e)},expression:"queryParam.MaxUsageArea"}})],1)],1)]),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"属性"}},[a("a-select",{attrs:{"allow-clear":""},model:{value:t.queryParam.BranchPropertyKey,callback:function(e){t.$set(t.queryParam,"BranchPropertyKey",e)},expression:"queryParam.BranchPropertyKey"}},[a("a-select-option",{attrs:{value:"1"}},[t._v("实体")]),a("a-select-option",{attrs:{value:"2"}},[t._v("虚拟")])],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"是否启用"}},[a("a-select",{attrs:{"allow-clear":""},model:{value:t.queryParam.status,callback:function(e){t.$set(t.queryParam,"status",e)},expression:"queryParam.status"}},[a("a-select-option",{attrs:{value:"true"}},[t._v("启用")]),a("a-select-option",{attrs:{value:"false"}},[t._v("停用")])],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"是否存在特种设备"}},[a("a-select",{attrs:{"allow-clear":""},model:{value:t.queryParam.ExistSpecialtyEquipment,callback:function(e){t.$set(t.queryParam,"ExistSpecialtyEquipment",e)},expression:"queryParam.ExistSpecialtyEquipment"}},[a("a-select-option",{attrs:{value:"true"}},[t._v("存在")]),a("a-select-option",{attrs:{value:"false"}},[t._v("不存在")])],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"是否存在危险品"}},[a("a-select",{attrs:{"allow-clear":""},model:{value:t.queryParam.ExistHazardousArticle,callback:function(e){t.$set(t.queryParam,"ExistHazardousArticle",e)},expression:"queryParam.ExistHazardousArticle"}},[a("a-select-option",{attrs:{value:"true"}},[t._v("存在")]),a("a-select-option",{attrs:{value:"false"}},[t._v("不存在")])],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"实验室类型"}},[a("a-select",{attrs:{"allow-clear":""},model:{value:t.queryParam.LaboratoryTypeKey,callback:function(e){t.$set(t.queryParam,"LaboratoryTypeKey",e)},expression:"queryParam.LaboratoryTypeKey"}},t._l(t.labTypes,(function(e){return a("a-select-option",{key:e.key},[t._v(" "+t._s(e.value)+" ")])})),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"危险源级别"}},[a("a-select",{attrs:{"allow-clear":""},model:{value:t.queryParam.RiskLevel,callback:function(e){t.$set(t.queryParam,"RiskLevel",e)},expression:"queryParam.RiskLevel"}},[a("a-select-option",{attrs:{value:"1"}},[t._v("1")]),a("a-select-option",{attrs:{value:"2"}},[t._v("2")]),a("a-select-option",{attrs:{value:"3"}},[t._v("3")])],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-model-item",{attrs:{label:"实验室地址"}},[a("a-input",{attrs:{"allow-clear":""},model:{value:t.queryParam.Address,callback:function(e){t.$set(t.queryParam,"Address",e)},expression:"queryParam.Address"}})],1)],1)],1)],1)]:t._e()],2),a("s-table",{ref:"table",attrs:{customRow:t.rowClick,columns:t.columns,data:t.loaddata,rowKey:"id",pagination:{showTotal:function(t){return"共"+t+"条"}}},scopedSlots:t._u([{key:"responsible",fn:function(e,n){return a("span",{},[[a("span",[t._v(t._s(n.responsible.map(t.joinOne).join(",")))])]],2)}},{key:"status",fn:function(e,n){return a("span",{},[1==n.status?a("a-tag",{attrs:{color:"green"}},[t._v("启用")]):0==n.status?a("a-tag",{attrs:{color:"red"}},[t._v("停用")]):t._e()],1)}},{key:"action",fn:function(e,n){return a("span",{},[[a("a",{on:{click:function(e){return t.handleDetail(n)}}},[t._v("查看详情")])]],2)}}])}),a("import-lab-branch",{ref:"importbranch"})],1)},i=[],o=a("2af9"),l=a("788a"),r=a("5cf7"),s={SkipCount:0,MaxResultCount:10,Key:"",status:"",CollegeGuid:"",LaboratoryGuid:"",LabcenterGuid:"",LabPrincipalCode:"",LabBranchPrincipalCode:"",BranchPropertyKey:"",ExistSpecialtyEquipment:"",ExistHazardousArticle:"",CampusCode:"",RiskLevel:"",Address:""},c={name:"LabBranch",components:{STable:o["h"],SelectCollegeguid:o["k"],SelectLab:o["l"],SelectLabcenter:o["m"],SelectTeacher:o["n"],SelectCampus:o["j"],ImportLabBranch:r["a"]},data:function(){var t=this;return{queryParam:this.clone(s),propertyId:"",laboratoryinfo:{},advanced:!0,form:this.$form.createForm(this),labTypes:[],AddressList:[],columns:[{title:"学院",dataIndex:"collegeName"},{title:"实验中心",dataIndex:"labCenterName"},{title:"实验室",dataIndex:"laboratoryName"},{title:"实验分室",dataIndex:"name"},{title:"实验分室负责人",dataIndex:"responsible",scopedSlots:{customRender:"responsible"}},{title:"地址",dataIndex:"address"},{title:"面积",dataIndex:"usageArea"},{title:"类型",dataIndex:"typeName"},{title:"是否启用",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:"100px"}],loaddata:function(e){return t.queryParam.SkipCount=(e.pageNo-1)*e.pageSize,t.queryParam.MaxResultCount=e.pageSize,Object(l["F"])(t.queryParam).then((function(t){var a={};return a={data:t.items,pageNo:e.pageNo,pageSize:e.pageSize,totalCount:t.totalCount},a}))}}},created:function(){this.getDictionaryInfoList()},mounted:function(){},methods:{clone:function(t){var e=JSON.parse(JSON.stringify(t));return e},joinOne:function(t,e){return t.teacherName},getDictionaryInfoList:function(){var t=this;Object(l["D"])({PropertyKey:"laboratoryType"}).then((function(e){t.labTypes=e.items}))},onSearch:function(t){this.queryParam.Key=t,this.$refs.table.refresh(!0)},onChange:function(t){this.queryParam.Key=t.target.value},toggleAdvanced:function(){this.advanced=!this.advanced},handleDetail:function(t){this.$router.push({name:"branchdetail",query:{guid:t.guid}})},rowClick:function(t){var e=this;return{style:{cursor:"pointer"},on:{dblclick:function(){e.handleDetail(t)}}}},handleSearch:function(){var t=this;this.form.validateFieldsAndScroll((function(e,a){e||Object.assign(t.queryParam,a)})),this.$refs.table.refresh(!0)},handleClear:function(){this.queryParam=this.clone(s),this.$refs.Scollege.handleClear(),this.$refs.Slaboratory.handleClear(),this.$refs.Slabcenter.handleClear(),this.$refs.Slabteacher.handleClear(),this.$refs.Sbranchteacher.handleClear(),this.$refs.Scampus.handleClear(),this.form.resetFields(),this.$refs.table.refresh(!0)},handleadd:function(){this.$refs.createmodal.modalshow()},handleOk:function(){this.$refs.table.refresh()},confirm:function(t){var e=this;Object(l["k"])(t).then((function(t){e.$refs.table.refresh()}))},cancel:function(){},handleModify:function(t){this.$refs.modiftymodal.modalshow(t)},handleSelectCollege:function(t){this.queryParam.CollegeGuid=t,this.queryParam.LabCenterGuid="",this.queryParam.LaboratoryGuid="",this.$refs.Slabcenter.handleCollegeChange(t),this.$refs.Slaboratory.handleCollegeChange(t),this.$refs.Slabteacher.handleCollegeChange(t),this.$refs.Sbranchteacher.handleCollegeChange(t)},handleSelectCenter:function(t){""==t&&this.$refs.Slabcenter.handleCollegeChange(this.queryParam.CollegeGuid),this.queryParam.LabcenterGuid=t,this.queryParam.LaboratoryGuid="",this.$refs.Slaboratory.handleLabcenterChange(t)},handleSelectLab:function(t){""==t&&(this.$refs.Slaboratory.handleCollegeChange(this.queryParam.CollegeGuid),this.$refs.Slaboratory.handleLabcenterChange(this.queryParam.labcenterGuid)),this.queryParam.LaboratoryGuid=t},handleSelectTeacher:function(t){""==t&&this.$refs.Slabteacher.handleCollegeChange(this.queryParam.CollegeGuid)},handleSelectBranchTeacher:function(t){""==t&&this.$refs.Sbranchteacher.handleCollegeChange(this.queryParam.CollegeGuid)},handleDownload:function(){this.$refs.importbranch.modalshow(this.queryParam)}}},d=c,u=(a("d261"),a("2877")),h=Object(u["a"])(d,n,i,!1,null,null,null);e["default"]=h.exports},f8a9:function(t,e,a){}}]);